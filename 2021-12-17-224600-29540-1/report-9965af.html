<!doctype html>
<html>
<head>
<title>/home/daniel/Projects/java/jdk/src/hotspot/share/oops/constMethod.hpp</title>

<style type="text/css">
body { color:#000000; background-color:#ffffff }
body { font-family:Helvetica, sans-serif; font-size:10pt }
h1 { font-size:14pt }
.FileName { margin-top: 5px; margin-bottom: 5px; display: inline; }
.FileNav { margin-left: 5px; margin-right: 5px; display: inline; }
.FileNav a { text-decoration:none; font-size: larger; }
.divider { margin-top: 30px; margin-bottom: 30px; height: 15px; }
.divider { background-color: gray; }
.code { border-collapse:collapse; width:100%; }
.code { font-family: "Monospace", monospace; font-size:10pt }
.code { line-height: 1.2em }
.comment { color: green; font-style: oblique }
.keyword { color: blue }
.string_literal { color: red }
.directive { color: darkmagenta }

/* Macros and variables could have pop-up notes hidden by default.
  - Macro pop-up:    expansion of the macro
  - Variable pop-up: value (table) of the variable */
.macro_popup, .variable_popup { display: none; }

/* Pop-up appears on mouse-hover event. */
.macro:hover .macro_popup, .variable:hover .variable_popup {
  display: block;
  padding: 2px;
  -webkit-border-radius:5px;
  -webkit-box-shadow:1px 1px 7px #000;
  border-radius:5px;
  box-shadow:1px 1px 7px #000;
  position: absolute;
  top: -1em;
  left:10em;
  z-index: 1
}

.macro_popup {
  border: 2px solid red;
  background-color:#FFF0F0;
  font-weight: normal;
}

.variable_popup {
  border: 2px solid blue;
  background-color:#F0F0FF;
  font-weight: bold;
  font-family: Helvetica, sans-serif;
  font-size: 9pt;
}

/* Pop-up notes needs a relative position as a base where they pops up. */
.macro, .variable {
  background-color: PaleGoldenRod;
  position: relative;
}
.macro { color: DarkMagenta; }

#tooltiphint {
  position: fixed;
  width: 50em;
  margin-left: -25em;
  left: 50%;
  padding: 10px;
  border: 1px solid #b0b0b0;
  border-radius: 2px;
  box-shadow: 1px 1px 7px black;
  background-color: #c0c0c0;
  z-index: 2;
}

.num { width:2.5em; padding-right:2ex; background-color:#eeeeee }
.num { text-align:right; font-size:8pt }
.num { color:#444444 }
.line { padding-left: 1ex; border-left: 3px solid #ccc }
.line { white-space: pre }
.msg { -webkit-box-shadow:1px 1px 7px #000 }
.msg { box-shadow:1px 1px 7px #000 }
.msg { -webkit-border-radius:5px }
.msg { border-radius:5px }
.msg { font-family:Helvetica, sans-serif; font-size:8pt }
.msg { float:left }
.msg { padding:0.25em 1ex 0.25em 1ex }
.msg { margin-top:10px; margin-bottom:10px }
.msg { font-weight:bold }
.msg { max-width:60em; word-wrap: break-word; white-space: pre-wrap }
.msgT { padding:0x; spacing:0x }
.msgEvent { background-color:#fff8b4; color:#000000 }
.msgControl { background-color:#bbbbbb; color:#000000 }
.msgNote { background-color:#ddeeff; color:#000000 }
.mrange { background-color:#dfddf3 }
.mrange { border-bottom:1px solid #6F9DBE }
.PathIndex { font-weight: bold; padding:0px 5px; margin-right:5px; }
.PathIndex { -webkit-border-radius:8px }
.PathIndex { border-radius:8px }
.PathIndexEvent { background-color:#bfba87 }
.PathIndexControl { background-color:#8c8c8c }
.PathIndexPopUp { background-color: #879abc; }
.PathNav a { text-decoration:none; font-size: larger }
.CodeInsertionHint { font-weight: bold; background-color: #10dd10 }
.CodeRemovalHint { background-color:#de1010 }
.CodeRemovalHint { border-bottom:1px solid #6F9DBE }
.selected{ background-color:orange !important; }

table.simpletable {
  padding: 5px;
  font-size:12pt;
  margin:20px;
  border-collapse: collapse; border-spacing: 0px;
}
td.rowname {
  text-align: right;
  vertical-align: top;
  font-weight: bold;
  color:#444444;
  padding-right:2ex;
}

/* Hidden text. */
input.spoilerhider + label {
  cursor: pointer;
  text-decoration: underline;
  display: block;
}
input.spoilerhider {
 display: none;
}
input.spoilerhider ~ .spoiler {
  overflow: hidden;
  margin: 10px auto 0;
  height: 0;
  opacity: 0;
}
input.spoilerhider:checked + label + .spoiler{
  height: auto;
  opacity: 1;
}
</style>
</head>
<body>
<!-- BUGDESC Null pointer passed to 2nd parameter expecting 'nonnull' -->

<!-- BUGTYPE Argument with 'nonnull' attribute passed null -->

<!-- BUGCATEGORY API -->

<!-- BUGFILE /home/daniel/Projects/java/jdk/src/hotspot/share/oops/constMethod.hpp -->

<!-- FILENAME constMethod.hpp -->

<!-- FUNCTIONNAME set_code -->

<!-- ISSUEHASHCONTENTOFLINEINCONTEXT 7ddac5b4dde36582a2a9921391a75ea1 -->

<!-- BUGLINE 449 -->

<!-- BUGCOLUMN 7 -->

<!-- BUGPATHLENGTH 45 -->

<!-- BUGMETAEND -->
<!-- REPORTHEADER -->
<h3>Bug Summary</h3>
<table class="simpletable">
<tr><td class="rowname">File:</td><td>jdk/src/hotspot/share/oops/constMethod.hpp</td></tr>
<tr><td class="rowname">Warning:</td><td><a href="#EndPath">line 449, column 7</a><br />Null pointer passed to 2nd parameter expecting 'nonnull'</td></tr>

</table>
<!-- REPORTSUMMARYEXTRA -->
<h3>Annotated Source Code</h3>
<p>Press <a href="#" onclick="toggleHelp(); return false;">'?'</a>
   to see keyboard shortcuts</p>
<input type="checkbox" class="spoilerhider" id="showinvocation" />
<label for="showinvocation" >Show analyzer invocation</label>
<div class="spoiler">clang -cc1 -triple x86_64-pc-linux-gnu -analyze -disable-free -disable-llvm-verifier -discard-value-names -main-file-name defaultMethods.cpp -analyzer-store=region -analyzer-opt-analyze-nested-blocks -analyzer-checker=core -analyzer-checker=apiModeling -analyzer-checker=unix -analyzer-checker=deadcode -analyzer-checker=cplusplus -analyzer-checker=security.insecureAPI.UncheckedReturn -analyzer-checker=security.insecureAPI.getpw -analyzer-checker=security.insecureAPI.gets -analyzer-checker=security.insecureAPI.mktemp -analyzer-checker=security.insecureAPI.mkstemp -analyzer-checker=security.insecureAPI.vfork -analyzer-checker=nullability.NullPassedToNonnull -analyzer-checker=nullability.NullReturnedFromNonnull -analyzer-output plist -w -setup-static-analyzer -mrelocation-model pic -pic-level 2 -mthread-model posix -fno-delete-null-pointer-checks -mframe-pointer=all -relaxed-aliasing -fmath-errno -fno-rounding-math -masm-verbose -mconstructor-aliases -munwind-tables -target-cpu x86-64 -dwarf-column-info -fno-split-dwarf-inlining -debugger-tuning=gdb -resource-dir /usr/lib/llvm-10/lib/clang/10.0.0 -I /home/daniel/Projects/java/jdk/build/linux-x86_64-server-fastdebug/hotspot/variant-server/libjvm/objs/precompiled -D __STDC_FORMAT_MACROS -D __STDC_LIMIT_MACROS -D __STDC_CONSTANT_MACROS -D _GNU_SOURCE -D _REENTRANT -D LIBC=gnu -D LINUX -D VM_LITTLE_ENDIAN -D _LP64=1 -D ASSERT -D CHECK_UNHANDLED_OOPS -D TARGET_ARCH_x86 -D INCLUDE_SUFFIX_OS=_linux -D INCLUDE_SUFFIX_CPU=_x86 -D INCLUDE_SUFFIX_COMPILER=_gcc -D TARGET_COMPILER_gcc -D AMD64 -D HOTSPOT_LIB_ARCH="amd64" -D COMPILER1 -D COMPILER2 -I /home/daniel/Projects/java/jdk/build/linux-x86_64-server-fastdebug/hotspot/variant-server/gensrc/adfiles -I /home/daniel/Projects/java/jdk/src/hotspot/share -I /home/daniel/Projects/java/jdk/src/hotspot/os/linux -I /home/daniel/Projects/java/jdk/src/hotspot/os/posix -I /home/daniel/Projects/java/jdk/src/hotspot/cpu/x86 -I /home/daniel/Projects/java/jdk/src/hotspot/os_cpu/linux_x86 -I /home/daniel/Projects/java/jdk/build/linux-x86_64-server-fastdebug/hotspot/variant-server/gensrc -I /home/daniel/Projects/java/jdk/src/hotspot/share/precompiled -I /home/daniel/Projects/java/jdk/src/hotspot/share/include -I /home/daniel/Projects/java/jdk/src/hotspot/os/posix/include -I /home/daniel/Projects/java/jdk/build/linux-x86_64-server-fastdebug/support/modules_include/java.base -I /home/daniel/Projects/java/jdk/build/linux-x86_64-server-fastdebug/support/modules_include/java.base/linux -I /home/daniel/Projects/java/jdk/src/java.base/share/native/libjimage -I /home/daniel/Projects/java/jdk/build/linux-x86_64-server-fastdebug/hotspot/variant-server/gensrc/adfiles -I /home/daniel/Projects/java/jdk/src/hotspot/share -I /home/daniel/Projects/java/jdk/src/hotspot/os/linux -I /home/daniel/Projects/java/jdk/src/hotspot/os/posix -I /home/daniel/Projects/java/jdk/src/hotspot/cpu/x86 -I /home/daniel/Projects/java/jdk/src/hotspot/os_cpu/linux_x86 -I /home/daniel/Projects/java/jdk/build/linux-x86_64-server-fastdebug/hotspot/variant-server/gensrc -D _FORTIFY_SOURCE=2 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/x86_64-linux-gnu/c++/7.5.0 -internal-isystem /usr/lib/gcc/x86_64-linux-gnu/7.5.0/../../../../include/c++/7.5.0/backward -internal-isystem /usr/local/include -internal-isystem /usr/lib/llvm-10/lib/clang/10.0.0/include -internal-externc-isystem /usr/include/x86_64-linux-gnu -internal-externc-isystem /include -internal-externc-isystem /usr/include -O3 -Wno-format-zero-length -Wno-unused-parameter -Wno-unused -Wno-parentheses -Wno-comment -Wno-unknown-pragmas -Wno-address -Wno-delete-non-virtual-dtor -Wno-char-subscripts -Wno-array-bounds -Wno-int-in-bool-context -Wno-ignored-qualifiers -Wno-missing-field-initializers -Wno-implicit-fallthrough -Wno-empty-body -Wno-strict-overflow -Wno-sequence-point -Wno-maybe-uninitialized -Wno-misleading-indentation -Wno-cast-function-type -Wno-shift-negative-value -std=c++14 -fdeprecated-macro -fdebug-compilation-dir /home/daniel/Projects/java/jdk/make/hotspot -ferror-limit 19 -fmessage-length 0 -fvisibility hidden -stack-protector 1 -fno-rtti -fgnuc-version=4.2.1 -fobjc-runtime=gcc -fdiagnostics-show-option -vectorize-loops -vectorize-slp -analyzer-output=html -faddrsig -o /home/daniel/Projects/java/scan/2021-12-21-193737-8510-1 -x c++ /home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp
</div>
<div id='tooltiphint' hidden="true">
  <p>Keyboard shortcuts: </p>
  <ul>
    <li>Use 'j/k' keys for keyboard navigation</li>
    <li>Use 'Shift+S' to show/hide relevant lines</li>
    <li>Use '?' to toggle this window</li>
  </ul>
  <a href="#" onclick="toggleHelp(); return false;">Close</a>
</div>
<script type='text/javascript'>
var relevant_lines = {"1": {"109": 1, "110": 1, "111": 1, "112": 1, "113": 1, "117": 1, "122": 1, "129": 1, "140": 1, "141": 1, "142": 1, "143": 1, "144": 1, "147": 1, "148": 1, "149": 1, "152": 1, "153": 1, "155": 1, "167": 1, "168": 1, "171": 1, "172": 1, "178": 1, "179": 1, "185": 1, "186": 1, "187": 1, "189": 1, "191": 1, "192": 1, "193": 1, "195": 1, "198": 1, "200": 1, "201": 1, "203": 1, "204": 1, "205": 1, "206": 1, "207": 1, "208": 1, "214": 1, "217": 1, "221": 1, "222": 1, "223": 1, "224": 1, "229": 1, "230": 1, "231": 1, "233": 1, "267": 1, "268": 1, "282": 1, "283": 1, "284": 1, "285": 1, "294": 1, "296": 1, "299": 1, "300": 1, "301": 1, "372": 1, "373": 1, "376": 1, "377": 1, "547": 1, "548": 1, "564": 1, "565": 1, "602": 1, "603": 1, "604": 1, "607": 1, "608": 1, "627": 1, "628": 1, "630": 1, "633": 1, "642": 1, "643": 1, "679": 1, "680": 1, "706": 1, "708": 1, "709": 1, "710": 1, "711": 1, "712": 1, "713": 1, "716": 1, "717": 1, "720": 1, "724": 1, "725": 1, "726": 1, "727": 1, "728": 1, "741": 1, "742": 1, "743": 1, "745": 1, "755": 1, "772": 1, "782": 1, "783": 1, "784": 1, "789": 1, "791": 1, "793": 1, "794": 1, "795": 1, "818": 1, "819": 1, "820": 1, "821": 1, "828": 1, "831": 1, "832": 1, "833": 1, "834": 1, "836": 1, "837": 1, "847": 1, "848": 1, "850": 1, "851": 1, "852": 1, "853": 1, "854": 1, "855": 1, "862": 1, "864": 1, "865": 1, "870": 1, "871": 1, "873": 1, "874": 1, "876": 1, "878": 1, "879": 1, "880": 1, "881": 1, "882": 1, "884": 1, "887": 1, "888": 1, "889": 1, "890": 1, "892": 1, "893": 1, "894": 1, "896": 1, "901": 1, "902": 1, "903": 1, "905": 1, "906": 1, "907": 1, "908": 1, "909": 1, "910": 1, "911": 1, "912": 1, "913": 1, "954": 1, "955": 1, "957": 1, "958": 1, "959": 1, "961": 1, "962": 1, "963": 1, "965": 1, "966": 1, "968": 1, "969": 1, "982": 1, "988": 1, "989": 1, "990": 1, "994": 1, "995": 1, "996": 1, "997": 1, "998": 1, "999": 1, "1000": 1}, "5": {"108": 1, "247": 1, "432": 1, "433": 1, "434": 1, "435": 1}, "31794": {"104": 1}, "36877": {"81": 1}, "39405": {"90": 1, "93": 1}, "39781": {"54": 1, "55": 1, "56": 1, "87": 1}, "44695": {"678": 1}, "44890": {"155": 1, "156": 1, "157": 1, "270": 1, "276": 1, "311": 1, "315": 1, "346": 1, "447": 1, "448": 1, "449": 1, "452": 1, "484": 1, "488": 1, "492": 1}, "45231": {"218": 1}, "45703": {"205": 1, "294": 1, "620": 1}, "45704": {"112": 1, "126": 1, "294": 1, "295": 1, "296": 1, "297": 1}, "46111": {"408": 1, "418": 1, "584": 1, "585": 1, "646": 1, "647": 1, "648": 1, "649": 1, "652": 1, "654": 1}, "48751": {"135": 1, "151": 1, "156": 1, "270": 1, "276": 1, "280": 1, "311": 1, "527": 1}, "51879": {"123": 1, "124": 1, "182": 1, "185": 1, "186": 1}, "57699": {"125": 1, "126": 1, "157": 1, "158": 1}, "57914": {"78": 1, "79": 1, "80": 1, "81": 1, "82": 1, "83": 1, "84": 1, "88": 1, "89": 1, "90": 1, "91": 1, "92": 1, "147": 1, "148": 1, "149": 1, "150": 1, "151": 1, "180": 1, "181": 1, "182": 1, "183": 1, "184": 1, "185": 1, "186": 1, "187": 1, "188": 1, "197": 1, "198": 1}, "59090": {"66": 1, "82": 1, "84": 1, "85": 1, "86": 1, "87": 1, "139": 1, "143": 1, "144": 1, "147": 1, "148": 1, "185": 1, "186": 1}, "59091": {"92": 1, "252": 1, "277": 1, "278": 1}, "59129": {"792": 1}, "90451": {"69": 1}};

var filterCounterexample = function (hide) {
  var tables = document.getElementsByClassName("code");
  for (var t=0; t<tables.length; t++) {
    var table = tables[t];
    var file_id = table.getAttribute("data-fileid");
    var lines_in_fid = relevant_lines[file_id];
    if (!lines_in_fid) {
      lines_in_fid = {};
    }
    var lines = table.getElementsByClassName("codeline");
    for (var i=0; i<lines.length; i++) {
        var el = lines[i];
        var lineNo = el.getAttribute("data-linenumber");
        if (!lines_in_fid[lineNo]) {
          if (hide) {
            el.setAttribute("hidden", "");
          } else {
            el.removeAttribute("hidden");
          }
        }
    }
  }
}

window.addEventListener("keydown", function (event) {
  if (event.defaultPrevented) {
    return;
  }
  if (event.key == "S") {
    var checked = document.getElementsByName("showCounterexample")[0].checked;
    filterCounterexample(!checked);
    document.getElementsByName("showCounterexample")[0].checked = !checked;
  } else {
    return;
  }
  event.preventDefault();
}, true);

document.addEventListener("DOMContentLoaded", function() {
    document.querySelector('input[name="showCounterexample"]').onchange=
        function (event) {
      filterCounterexample(this.checked);
    };
});
</script>

<form>
    <input type="checkbox" name="showCounterexample" id="showCounterexample" />
    <label for="showCounterexample">
       Show only relevant lines
    </label>
</form>

<script type='text/javascript'>
var digitMatcher = new RegExp("[0-9]+");

document.addEventListener("DOMContentLoaded", function() {
    document.querySelectorAll(".PathNav > a").forEach(
        function(currentValue, currentIndex) {
            var hrefValue = currentValue.getAttribute("href");
            currentValue.onclick = function() {
                scrollTo(document.querySelector(hrefValue));
                return false;
            };
        });
});

var findNum = function() {
    var s = document.querySelector(".selected");
    if (!s || s.id == "EndPath") {
        return 0;
    }
    var out = parseInt(digitMatcher.exec(s.id)[0]);
    return out;
};

var scrollTo = function(el) {
    document.querySelectorAll(".selected").forEach(function(s) {
        s.classList.remove("selected");
    });
    el.classList.add("selected");
    window.scrollBy(0, el.getBoundingClientRect().top -
        (window.innerHeight / 2));
}

var move = function(num, up, numItems) {
  if (num == 1 && up || num == numItems - 1 && !up) {
    return 0;
  } else if (num == 0 && up) {
    return numItems - 1;
  } else if (num == 0 && !up) {
    return 1 % numItems;
  }
  return up ? num - 1 : num + 1;
}

var numToId = function(num) {
  if (num == 0) {
    return document.getElementById("EndPath")
  }
  return document.getElementById("Path" + num);
};

var navigateTo = function(up) {
  var numItems = document.querySelectorAll(
      ".line > .msgEvent, .line > .msgControl").length;
  var currentSelected = findNum();
  var newSelected = move(currentSelected, up, numItems);
  var newEl = numToId(newSelected, numItems);

  // Scroll element into center.
  scrollTo(newEl);
};

window.addEventListener("keydown", function (event) {
  if (event.defaultPrevented) {
    return;
  }
  if (event.key == "j") {
    navigateTo(/*up=*/false);
  } else if (event.key == "k") {
    navigateTo(/*up=*/true);
  } else {
    return;
  }
  event.preventDefault();
}, true);
</script>
  
<script type='text/javascript'>

var toggleHelp = function() {
    var hint = document.querySelector("#tooltiphint");
    var attributeName = "hidden";
    if (hint.hasAttribute(attributeName)) {
      hint.removeAttribute(attributeName);
    } else {
      hint.setAttribute("hidden", "true");
    }
};
window.addEventListener("keydown", function (event) {
  if (event.defaultPrevented) {
    return;
  }
  if (event.key == "?") {
    toggleHelp();
  } else {
    return;
  }
  event.preventDefault();
});
</script>
<div id=File1>
<h4 class=FileName>/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp</h4>
<div class=FileNav><a href="#File36877">&#x2192;</a></div></div>
<table class="code" data-fileid="1">
<tr class="codeline" data-linenumber="1"><td class="num" id="LN1">1</td><td class="line"><span class='comment'>/*</span></td></tr>
<tr class="codeline" data-linenumber="2"><td class="num" id="LN2">2</td><td class="line"> <span class='comment'>* Copyright (c) 2012, 2021, Oracle and/or its affiliates. All rights reserved.</span></td></tr>
<tr class="codeline" data-linenumber="3"><td class="num" id="LN3">3</td><td class="line"> <span class='comment'>* DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.</span></td></tr>
<tr class="codeline" data-linenumber="4"><td class="num" id="LN4">4</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="5"><td class="num" id="LN5">5</td><td class="line"> <span class='comment'>* This code is free software; you can redistribute it and/or modify it</span></td></tr>
<tr class="codeline" data-linenumber="6"><td class="num" id="LN6">6</td><td class="line"> <span class='comment'>* under the terms of the GNU General Public License version 2 only, as</span></td></tr>
<tr class="codeline" data-linenumber="7"><td class="num" id="LN7">7</td><td class="line"> <span class='comment'>* published by the Free Software Foundation.</span></td></tr>
<tr class="codeline" data-linenumber="8"><td class="num" id="LN8">8</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="9"><td class="num" id="LN9">9</td><td class="line"> <span class='comment'>* This code is distributed in the hope that it will be useful, but WITHOUT</span></td></tr>
<tr class="codeline" data-linenumber="10"><td class="num" id="LN10">10</td><td class="line"> <span class='comment'>* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span></td></tr>
<tr class="codeline" data-linenumber="11"><td class="num" id="LN11">11</td><td class="line"> <span class='comment'>* FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License</span></td></tr>
<tr class="codeline" data-linenumber="12"><td class="num" id="LN12">12</td><td class="line"> <span class='comment'>* version 2 for more details (a copy is included in the LICENSE file that</span></td></tr>
<tr class="codeline" data-linenumber="13"><td class="num" id="LN13">13</td><td class="line"> <span class='comment'>* accompanied this code).</span></td></tr>
<tr class="codeline" data-linenumber="14"><td class="num" id="LN14">14</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="15"><td class="num" id="LN15">15</td><td class="line"> <span class='comment'>* You should have received a copy of the GNU General Public License version</span></td></tr>
<tr class="codeline" data-linenumber="16"><td class="num" id="LN16">16</td><td class="line"> <span class='comment'>* 2 along with this work; if not, write to the Free Software Foundation,</span></td></tr>
<tr class="codeline" data-linenumber="17"><td class="num" id="LN17">17</td><td class="line"> <span class='comment'>* Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.</span></td></tr>
<tr class="codeline" data-linenumber="18"><td class="num" id="LN18">18</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="19"><td class="num" id="LN19">19</td><td class="line"> <span class='comment'>* Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA</span></td></tr>
<tr class="codeline" data-linenumber="20"><td class="num" id="LN20">20</td><td class="line"> <span class='comment'>* or visit www.oracle.com if you need additional information or have any</span></td></tr>
<tr class="codeline" data-linenumber="21"><td class="num" id="LN21">21</td><td class="line"> <span class='comment'>* questions.</span></td></tr>
<tr class="codeline" data-linenumber="22"><td class="num" id="LN22">22</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="23"><td class="num" id="LN23">23</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="24"><td class="num" id="LN24">24</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="25"><td class="num" id="LN25">25</td><td class="line"><span class='directive'>#include "precompiled.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="26"><td class="num" id="LN26">26</td><td class="line"><span class='directive'>#include "classfile/bytecodeAssembler.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="27"><td class="num" id="LN27">27</td><td class="line"><span class='directive'>#include "classfile/defaultMethods.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="28"><td class="num" id="LN28">28</td><td class="line"><span class='directive'>#include "classfile/symbolTable.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="29"><td class="num" id="LN29">29</td><td class="line"><span class='directive'>#include "classfile/systemDictionary.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="30"><td class="num" id="LN30">30</td><td class="line"><span class='directive'>#include "classfile/vmClasses.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="31"><td class="num" id="LN31">31</td><td class="line"><span class='directive'>#include "classfile/vmSymbols.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="32"><td class="num" id="LN32">32</td><td class="line"><span class='directive'>#include "logging/log.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="33"><td class="num" id="LN33">33</td><td class="line"><span class='directive'>#include "logging/logStream.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="34"><td class="num" id="LN34">34</td><td class="line"><span class='directive'>#include "memory/allocation.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="35"><td class="num" id="LN35">35</td><td class="line"><span class='directive'>#include "memory/metadataFactory.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="36"><td class="num" id="LN36">36</td><td class="line"><span class='directive'>#include "memory/resourceArea.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="37"><td class="num" id="LN37">37</td><td class="line"><span class='directive'>#include "memory/universe.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="38"><td class="num" id="LN38">38</td><td class="line"><span class='directive'>#include "prims/jvmtiExport.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="39"><td class="num" id="LN39">39</td><td class="line"><span class='directive'>#include "runtime/arguments.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="40"><td class="num" id="LN40">40</td><td class="line"><span class='directive'>#include "runtime/handles.inline.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="41"><td class="num" id="LN41">41</td><td class="line"><span class='directive'>#include "runtime/signature.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="42"><td class="num" id="LN42">42</td><td class="line"><span class='directive'>#include "runtime/thread.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="43"><td class="num" id="LN43">43</td><td class="line"><span class='directive'>#include "oops/instanceKlass.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="44"><td class="num" id="LN44">44</td><td class="line"><span class='directive'>#include "oops/klass.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="45"><td class="num" id="LN45">45</td><td class="line"><span class='directive'>#include "oops/method.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="46"><td class="num" id="LN46">46</td><td class="line"><span class='directive'>#include "utilities/accessFlags.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="47"><td class="num" id="LN47">47</td><td class="line"><span class='directive'>#include "utilities/exceptions.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="48"><td class="num" id="LN48">48</td><td class="line"><span class='directive'>#include "utilities/ostream.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="49"><td class="num" id="LN49">49</td><td class="line"><span class='directive'>#include "utilities/pair.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="50"><td class="num" id="LN50">50</td><td class="line"><span class='directive'>#include "utilities/resourceHash.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="51"><td class="num" id="LN51">51</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="52"><td class="num" id="LN52">52</td><td class="line"><span class='keyword'>typedef</span> <span class='keyword'>enum</span> { QUALIFIED, DISQUALIFIED } QualifiedState;</td></tr>
<tr class="codeline" data-linenumber="53"><td class="num" id="LN53">53</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="54"><td class="num" id="LN54">54</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>void</span> print_slot(outputStream* str, Symbol* name, Symbol* signature) {</td></tr>
<tr class="codeline" data-linenumber="55"><td class="num" id="LN55">55</td><td class="line">  str-&gt;print(<span class='string_literal'>"%s%s"</span>, name-&gt;as_C_string(), signature-&gt;as_C_string());</td></tr>
<tr class="codeline" data-linenumber="56"><td class="num" id="LN56">56</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="57"><td class="num" id="LN57">57</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="58"><td class="num" id="LN58">58</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>void</span> print_method(outputStream* str, Method* mo, <span class='keyword'>bool</span> with_class=<span class='keyword'>true</span>) {</td></tr>
<tr class="codeline" data-linenumber="59"><td class="num" id="LN59">59</td><td class="line">  <span class='keyword'>if</span> (with_class) {</td></tr>
<tr class="codeline" data-linenumber="60"><td class="num" id="LN60">60</td><td class="line">    str-&gt;print(<span class='string_literal'>"%s."</span>, mo-&gt;klass_name()-&gt;as_C_string());</td></tr>
<tr class="codeline" data-linenumber="61"><td class="num" id="LN61">61</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="62"><td class="num" id="LN62">62</td><td class="line">  print_slot(str, mo-&gt;name(), mo-&gt;signature());</td></tr>
<tr class="codeline" data-linenumber="63"><td class="num" id="LN63">63</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="64"><td class="num" id="LN64">64</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="65"><td class="num" id="LN65">65</td><td class="line"><span class='comment'>/**</span></td></tr>
<tr class="codeline" data-linenumber="66"><td class="num" id="LN66">66</td><td class="line"> <span class='comment'>* Perform a depth-first iteration over the class hierarchy, applying</span></td></tr>
<tr class="codeline" data-linenumber="67"><td class="num" id="LN67">67</td><td class="line"> <span class='comment'>* algorithmic logic as it goes.</span></td></tr>
<tr class="codeline" data-linenumber="68"><td class="num" id="LN68">68</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="69"><td class="num" id="LN69">69</td><td class="line"> <span class='comment'>* This class is one half of the inheritance hierarchy analysis mechanism.</span></td></tr>
<tr class="codeline" data-linenumber="70"><td class="num" id="LN70">70</td><td class="line"> <span class='comment'>* It is meant to be used in conjunction with another class, the algorithm,</span></td></tr>
<tr class="codeline" data-linenumber="71"><td class="num" id="LN71">71</td><td class="line"> <span class='comment'>* which is indicated by the ALGO template parameter.  This class can be</span></td></tr>
<tr class="codeline" data-linenumber="72"><td class="num" id="LN72">72</td><td class="line"> <span class='comment'>* paired with any algorithm class that provides the required methods.</span></td></tr>
<tr class="codeline" data-linenumber="73"><td class="num" id="LN73">73</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="74"><td class="num" id="LN74">74</td><td class="line"> <span class='comment'>* This class contains all the mechanics for iterating over the class hierarchy</span></td></tr>
<tr class="codeline" data-linenumber="75"><td class="num" id="LN75">75</td><td class="line"> <span class='comment'>* starting at a particular root, without recursing (thus limiting stack growth</span></td></tr>
<tr class="codeline" data-linenumber="76"><td class="num" id="LN76">76</td><td class="line"> <span class='comment'>* from this point).  It visits each superclass (if present) and superinterface</span></td></tr>
<tr class="codeline" data-linenumber="77"><td class="num" id="LN77">77</td><td class="line"> <span class='comment'>* in a depth-first manner, with callbacks to the ALGO class as each class is</span></td></tr>
<tr class="codeline" data-linenumber="78"><td class="num" id="LN78">78</td><td class="line"> <span class='comment'>* encountered (visit()), The algorithm can cut-off further exploration of a</span></td></tr>
<tr class="codeline" data-linenumber="79"><td class="num" id="LN79">79</td><td class="line"> <span class='comment'>* particular branch by returning 'false' from a visit() call.</span></td></tr>
<tr class="codeline" data-linenumber="80"><td class="num" id="LN80">80</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="81"><td class="num" id="LN81">81</td><td class="line"> <span class='comment'>* The ALGO class, must provide a visit() method, which each of which will be</span></td></tr>
<tr class="codeline" data-linenumber="82"><td class="num" id="LN82">82</td><td class="line"> <span class='comment'>* called once for each node in the inheritance tree during the iteration.  In</span></td></tr>
<tr class="codeline" data-linenumber="83"><td class="num" id="LN83">83</td><td class="line"> <span class='comment'>* addition, it can provide a memory block via new_node_data(), which it can</span></td></tr>
<tr class="codeline" data-linenumber="84"><td class="num" id="LN84">84</td><td class="line"> <span class='comment'>* use for node-specific storage (and access via the current_data() and</span></td></tr>
<tr class="codeline" data-linenumber="85"><td class="num" id="LN85">85</td><td class="line"> <span class='comment'>* data_at_depth(int) methods).</span></td></tr>
<tr class="codeline" data-linenumber="86"><td class="num" id="LN86">86</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="87"><td class="num" id="LN87">87</td><td class="line"> <span class='comment'>* Bare minimum needed to be an ALGO class:</span></td></tr>
<tr class="codeline" data-linenumber="88"><td class="num" id="LN88">88</td><td class="line"> <span class='comment'>* class Algo : public HierarchyVisitor&lt;Algo&gt; {</span></td></tr>
<tr class="codeline" data-linenumber="89"><td class="num" id="LN89">89</td><td class="line"> <span class='comment'>*   void* new_node_data() { return NULL; }</span></td></tr>
<tr class="codeline" data-linenumber="90"><td class="num" id="LN90">90</td><td class="line"> <span class='comment'>*   void free_node_data(void* data) { return; }</span></td></tr>
<tr class="codeline" data-linenumber="91"><td class="num" id="LN91">91</td><td class="line"> <span class='comment'>*   bool visit() { return true; }</span></td></tr>
<tr class="codeline" data-linenumber="92"><td class="num" id="LN92">92</td><td class="line"> <span class='comment'>* };</span></td></tr>
<tr class="codeline" data-linenumber="93"><td class="num" id="LN93">93</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="94"><td class="num" id="LN94">94</td><td class="line"><span class='keyword'>template</span> &lt;<span class='keyword'>class</span> ALGO&gt;</td></tr>
<tr class="codeline" data-linenumber="95"><td class="num" id="LN95">95</td><td class="line"><span class='keyword'>class</span> HierarchyVisitor : StackObj {</td></tr>
<tr class="codeline" data-linenumber="96"><td class="num" id="LN96">96</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="97"><td class="num" id="LN97">97</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="98"><td class="num" id="LN98">98</td><td class="line">  <span class='keyword'>class</span> Node : <span class='keyword'>public</span> ResourceObj {</td></tr>
<tr class="codeline" data-linenumber="99"><td class="num" id="LN99">99</td><td class="line">   <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="100"><td class="num" id="LN100">100</td><td class="line">    InstanceKlass* _class;</td></tr>
<tr class="codeline" data-linenumber="101"><td class="num" id="LN101">101</td><td class="line">    <span class='keyword'>bool</span> _super_was_visited;</td></tr>
<tr class="codeline" data-linenumber="102"><td class="num" id="LN102">102</td><td class="line">    <span class='keyword'>int</span> _interface_index;</td></tr>
<tr class="codeline" data-linenumber="103"><td class="num" id="LN103">103</td><td class="line">    <span class='keyword'>void</span>* _algorithm_data;</td></tr>
<tr class="codeline" data-linenumber="104"><td class="num" id="LN104">104</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="105"><td class="num" id="LN105">105</td><td class="line">    Node(InstanceKlass* cls, <span class='keyword'>void</span>* data, <span class='keyword'>bool</span> visit_super)</td></tr>
<tr class="codeline" data-linenumber="106"><td class="num" id="LN106">106</td><td class="line">        : _class(cls), _super_was_visited(!visit_super),</td></tr>
<tr class="codeline" data-linenumber="107"><td class="num" id="LN107">107</td><td class="line">          _interface_index(0), _algorithm_data(data) {}</td></tr>
<tr class="codeline" data-linenumber="108"><td class="num" id="LN108">108</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="109"><td class="num" id="LN109">109</td><td class="line">    <span class='keyword'>void</span> update(InstanceKlass* cls, <span class='keyword'>void</span>* data, <span class='keyword'>bool</span> visit_super) {</td></tr>
<tr class="codeline" data-linenumber="110"><td class="num" id="LN110">110</td><td class="line">      _class = cls;</td></tr>
<tr class="codeline" data-linenumber="111"><td class="num" id="LN111">111</td><td class="line">      _super_was_visited = !visit_super;</td></tr>
<tr class="codeline" data-linenumber="112"><td class="num" id="LN112">112</td><td class="line">      _interface_index = 0;</td></tr>
<tr class="codeline" data-linenumber="113"><td class="num" id="LN113">113</td><td class="line">      _algorithm_data = data;</td></tr>
<tr class="codeline" data-linenumber="114"><td class="num" id="LN114">114</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="115"><td class="num" id="LN115">115</td><td class="line">    <span class='keyword'>int</span> number_of_interfaces() { <span class='keyword'>return</span> _class-&gt;local_interfaces()-&gt;length(); }</td></tr>
<tr class="codeline" data-linenumber="116"><td class="num" id="LN116">116</td><td class="line">    <span class='keyword'>int</span> interface_index() { <span class='keyword'>return</span> _interface_index; }</td></tr>
<tr class="codeline" data-linenumber="117"><td class="num" id="LN117">117</td><td class="line">    <span class='keyword'>void</span> set_super_visited() { _super_was_visited = <span class='keyword'>true</span>; }</td></tr>
<tr class="codeline" data-linenumber="118"><td class="num" id="LN118">118</td><td class="line">    <span class='keyword'>void</span> increment_visited_interface() { ++_interface_index; }</td></tr>
<tr class="codeline" data-linenumber="119"><td class="num" id="LN119">119</td><td class="line">    <span class='keyword'>void</span> set_all_interfaces_visited() {</td></tr>
<tr class="codeline" data-linenumber="120"><td class="num" id="LN120">120</td><td class="line">      _interface_index = number_of_interfaces();</td></tr>
<tr class="codeline" data-linenumber="121"><td class="num" id="LN121">121</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="122"><td class="num" id="LN122">122</td><td class="line">    <span class='keyword'>bool</span> has_visited_super() { <span class='keyword'>return</span> _super_was_visited; }</td></tr>
<tr class="codeline" data-linenumber="123"><td class="num" id="LN123">123</td><td class="line">    <span class='keyword'>bool</span> has_visited_all_interfaces() {</td></tr>
<tr class="codeline" data-linenumber="124"><td class="num" id="LN124">124</td><td class="line">      <span class='keyword'>return</span> interface_index() &gt;= number_of_interfaces();</td></tr>
<tr class="codeline" data-linenumber="125"><td class="num" id="LN125">125</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="126"><td class="num" id="LN126">126</td><td class="line">    InstanceKlass* interface_at(<span class='keyword'>int</span> index) {</td></tr>
<tr class="codeline" data-linenumber="127"><td class="num" id="LN127">127</td><td class="line">      <span class='keyword'>return</span> _class-&gt;local_interfaces()-&gt;at(index);</td></tr>
<tr class="codeline" data-linenumber="128"><td class="num" id="LN128">128</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="129"><td class="num" id="LN129">129</td><td class="line">    InstanceKlass* next_super() { <span class='keyword'>return</span> _class-&gt;java_super(); }</td></tr>
<tr class="codeline" data-linenumber="130"><td class="num" id="LN130">130</td><td class="line">    InstanceKlass* next_interface() {</td></tr>
<tr class="codeline" data-linenumber="131"><td class="num" id="LN131">131</td><td class="line">      <span class='keyword'>return</span> interface_at(interface_index());</td></tr>
<tr class="codeline" data-linenumber="132"><td class="num" id="LN132">132</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="133"><td class="num" id="LN133">133</td><td class="line">  };</td></tr>
<tr class="codeline" data-linenumber="134"><td class="num" id="LN134">134</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="135"><td class="num" id="LN135">135</td><td class="line">  <span class='keyword'>bool</span> _visited_Object;</td></tr>
<tr class="codeline" data-linenumber="136"><td class="num" id="LN136">136</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="137"><td class="num" id="LN137">137</td><td class="line">  GrowableArray&lt;Node*&gt; _path;</td></tr>
<tr class="codeline" data-linenumber="138"><td class="num" id="LN138">138</td><td class="line">  GrowableArray&lt;Node*&gt; _free_nodes;</td></tr>
<tr class="codeline" data-linenumber="139"><td class="num" id="LN139">139</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="140"><td class="num" id="LN140">140</td><td class="line">  Node* current_top() <span class='keyword'>const</span> { <span class='keyword'>return</span> _path.top(); }</td></tr>
<tr class="codeline" data-linenumber="141"><td class="num" id="LN141">141</td><td class="line">  <span class='keyword'>bool</span> has_more_nodes() <span class='keyword'>const</span> { <span class='keyword'>return</span> _path.length() &gt; 0; }</td></tr>
<tr class="codeline" data-linenumber="142"><td class="num" id="LN142">142</td><td class="line">  <span class='keyword'>void</span> push(InstanceKlass* cls, ALGO* algo) {</td></tr>
<tr class="codeline" data-linenumber="143"><td class="num" id="LN143">143</td><td class="line">    <span class='macro'>assert(cls != NULL, <span class='string_literal'>"Requires a valid instance class"</span>)<span class='macro_popup'>do { if (!(cls != __null)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 143, "assert(" "cls != __null" ") failed", "Requires a valid instance class"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="144"><td class="num" id="LN144">144</td><td class="line">    <span class='keyword'>if</span> (cls == vmClasses::Object_klass()) {</td></tr>
<tr class="codeline" data-linenumber="145"><td class="num" id="LN145">145</td><td class="line">      _visited_Object = <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="146"><td class="num" id="LN146">146</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="147"><td class="num" id="LN147">147</td><td class="line">    <span class='keyword'>void</span>* data = algo-&gt;new_node_data();</td></tr>
<tr class="codeline" data-linenumber="148"><td class="num" id="LN148">148</td><td class="line">    Node* node;</td></tr>
<tr class="codeline" data-linenumber="149"><td class="num" id="LN149">149</td><td class="line">    <span class='keyword'>if</span> (_free_nodes.is_empty()) { <span class='comment'>// Add a new node</span></td></tr>
<tr class="codeline" data-linenumber="150"><td class="num" id="LN150">150</td><td class="line">      node = <span class='keyword'>new</span> Node(cls, data, has_super(cls));</td></tr>
<tr class="codeline" data-linenumber="151"><td class="num" id="LN151">151</td><td class="line">    } <span class='keyword'>else</span> { <span class='comment'>// Reuse existing node and data</span></td></tr>
<tr class="codeline" data-linenumber="152"><td class="num" id="LN152">152</td><td class="line">      node = _free_nodes.pop();</td></tr>
<tr class="codeline" data-linenumber="153"><td class="num" id="LN153">153</td><td class="line">      node-&gt;update(cls, data, has_super(cls));</td></tr>
<tr class="codeline" data-linenumber="154"><td class="num" id="LN154">154</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="155"><td class="num" id="LN155">155</td><td class="line">    _path.push(node);</td></tr>
<tr class="codeline" data-linenumber="156"><td class="num" id="LN156">156</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="157"><td class="num" id="LN157">157</td><td class="line">  <span class='keyword'>void</span> pop() {</td></tr>
<tr class="codeline" data-linenumber="158"><td class="num" id="LN158">158</td><td class="line">    Node* node = _path.pop();</td></tr>
<tr class="codeline" data-linenumber="159"><td class="num" id="LN159">159</td><td class="line">    <span class='comment'>// Make the node available for reuse</span></td></tr>
<tr class="codeline" data-linenumber="160"><td class="num" id="LN160">160</td><td class="line">    _free_nodes.push(node);</td></tr>
<tr class="codeline" data-linenumber="161"><td class="num" id="LN161">161</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="162"><td class="num" id="LN162">162</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="163"><td class="num" id="LN163">163</td><td class="line">  <span class='comment'>// Since the starting point can be an interface, we must ensure we catch</span></td></tr>
<tr class="codeline" data-linenumber="164"><td class="num" id="LN164">164</td><td class="line">  <span class='comment'>// j.l.Object as the super once in those cases. The _visited_Object flag</span></td></tr>
<tr class="codeline" data-linenumber="165"><td class="num" id="LN165">165</td><td class="line">  <span class='comment'>// only ensures we don't then repeatedly enqueue Object for each interface</span></td></tr>
<tr class="codeline" data-linenumber="166"><td class="num" id="LN166">166</td><td class="line">  <span class='comment'>// in the class hierarchy.</span></td></tr>
<tr class="codeline" data-linenumber="167"><td class="num" id="LN167">167</td><td class="line">  <span class='keyword'>bool</span> has_super(InstanceKlass* cls) {</td></tr>
<tr class="codeline" data-linenumber="168"><td class="num" id="LN168">168</td><td class="line">    <span class='keyword'>return</span> cls-&gt;super() != <span class='macro'>NULL<span class='macro_popup'>__null</span></span> &amp;&amp; (!_visited_Object || !cls-&gt;is_interface());</td></tr>
<tr class="codeline" data-linenumber="169"><td class="num" id="LN169">169</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="170"><td class="num" id="LN170">170</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="171"><td class="num" id="LN171">171</td><td class="line">  Node* node_at_depth(<span class='keyword'>int</span> i) <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="172"><td class="num" id="LN172">172</td><td class="line">    <span class='keyword'>return</span> (i &gt;= _path.length()) ? <span class='macro'>NULL<span class='macro_popup'>__null</span></span> : _path.at(_path.length() - i - 1);</td></tr>
<tr class="codeline" data-linenumber="173"><td class="num" id="LN173">173</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="174"><td class="num" id="LN174">174</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="175"><td class="num" id="LN175">175</td><td class="line"> <span class='keyword'>protected</span>:</td></tr>
<tr class="codeline" data-linenumber="176"><td class="num" id="LN176">176</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="177"><td class="num" id="LN177">177</td><td class="line">  <span class='comment'>// Resets the visitor</span></td></tr>
<tr class="codeline" data-linenumber="178"><td class="num" id="LN178">178</td><td class="line">  <span class='keyword'>void</span> reset() {</td></tr>
<tr class="codeline" data-linenumber="179"><td class="num" id="LN179">179</td><td class="line">    _visited_Object = <span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="180"><td class="num" id="LN180">180</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="181"><td class="num" id="LN181">181</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="182"><td class="num" id="LN182">182</td><td class="line">  <span class='comment'>// Accessors available to the algorithm</span></td></tr>
<tr class="codeline" data-linenumber="183"><td class="num" id="LN183">183</td><td class="line">  <span class='keyword'>int</span> current_depth() <span class='keyword'>const</span> { <span class='keyword'>return</span> _path.length() - 1; }</td></tr>
<tr class="codeline" data-linenumber="184"><td class="num" id="LN184">184</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="185"><td class="num" id="LN185">185</td><td class="line">  InstanceKlass* class_at_depth(<span class='keyword'>int</span> i) {</td></tr>
<tr class="codeline" data-linenumber="186"><td class="num" id="LN186">186</td><td class="line">    Node* n = node_at_depth(i);</td></tr>
<tr class="codeline" data-linenumber="187"><td class="num" id="LN187">187</td><td class="line">    <span class='keyword'>return</span> n == <span class='macro'>NULL<span class='macro_popup'>__null</span></span> ? <span class='macro'>NULL<span class='macro_popup'>__null</span></span> : n-&gt;_class;</td></tr>
<tr class="codeline" data-linenumber="188"><td class="num" id="LN188">188</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="189"><td class="num" id="LN189">189</td><td class="line">  InstanceKlass* current_class() { <span class='keyword'>return</span> class_at_depth(0); }</td></tr>
<tr class="codeline" data-linenumber="190"><td class="num" id="LN190">190</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="191"><td class="num" id="LN191">191</td><td class="line">  <span class='keyword'>void</span>* data_at_depth(<span class='keyword'>int</span> i) {</td></tr>
<tr class="codeline" data-linenumber="192"><td class="num" id="LN192">192</td><td class="line">    Node* n = node_at_depth(i);</td></tr>
<tr class="codeline" data-linenumber="193"><td class="num" id="LN193">193</td><td class="line">    <span class='keyword'>return</span> n == <span class='macro'>NULL<span class='macro_popup'>__null</span></span> ? <span class='macro'>NULL<span class='macro_popup'>__null</span></span> : n-&gt;_algorithm_data;</td></tr>
<tr class="codeline" data-linenumber="194"><td class="num" id="LN194">194</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="195"><td class="num" id="LN195">195</td><td class="line">  <span class='keyword'>void</span>* current_data() { <span class='keyword'>return</span> data_at_depth(0); }</td></tr>
<tr class="codeline" data-linenumber="196"><td class="num" id="LN196">196</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="197"><td class="num" id="LN197">197</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="198"><td class="num" id="LN198">198</td><td class="line">  HierarchyVisitor() : _visited_Object(<span class='keyword'>false</span>), _path() {}</td></tr>
<tr class="codeline" data-linenumber="199"><td class="num" id="LN199">199</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="200"><td class="num" id="LN200">200</td><td class="line">  <span class='keyword'>void</span> run(InstanceKlass* root) {</td></tr>
<tr class="codeline" data-linenumber="201"><td class="num" id="LN201">201</td><td class="line">    ALGO* algo = <span class='keyword'>static_cast</span>&lt;ALGO*&gt;(<span class='keyword'>this</span>);</td></tr>
<tr class="codeline" data-linenumber="202"><td class="num" id="LN202">202</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="203"><td class="num" id="LN203">203</td><td class="line">    push(root, algo);</td></tr>
<tr class="codeline" data-linenumber="204"><td class="num" id="LN204">204</td><td class="line">    <span class='keyword'>bool</span> top_needs_visit = <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="205"><td class="num" id="LN205">205</td><td class="line">    <span class='keyword'>do</span> {</td></tr>
<tr class="codeline" data-linenumber="206"><td class="num" id="LN206">206</td><td class="line">      Node* top = current_top();</td></tr>
<tr class="codeline" data-linenumber="207"><td class="num" id="LN207">207</td><td class="line">      <span class='keyword'>if</span> (top_needs_visit) {</td></tr>
<tr class="codeline" data-linenumber="208"><td class="num" id="LN208">208</td><td class="line">        <span class='keyword'>if</span> (algo-&gt;visit() == <span class='keyword'>false</span>) {</td></tr>
<tr class="codeline" data-linenumber="209"><td class="num" id="LN209">209</td><td class="line">          <span class='comment'>// algorithm does not want to continue along this path.  Arrange</span></td></tr>
<tr class="codeline" data-linenumber="210"><td class="num" id="LN210">210</td><td class="line">          <span class='comment'>// it so that this state is immediately popped off the stack</span></td></tr>
<tr class="codeline" data-linenumber="211"><td class="num" id="LN211">211</td><td class="line">          top-&gt;set_super_visited();</td></tr>
<tr class="codeline" data-linenumber="212"><td class="num" id="LN212">212</td><td class="line">          top-&gt;set_all_interfaces_visited();</td></tr>
<tr class="codeline" data-linenumber="213"><td class="num" id="LN213">213</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="214"><td class="num" id="LN214">214</td><td class="line">        top_needs_visit = <span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="215"><td class="num" id="LN215">215</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="216"><td class="num" id="LN216">216</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="217"><td class="num" id="LN217">217</td><td class="line">      <span class='keyword'>if</span> (top-&gt;has_visited_super() &amp;&amp; top-&gt;has_visited_all_interfaces()) {</td></tr>
<tr class="codeline" data-linenumber="218"><td class="num" id="LN218">218</td><td class="line">        algo-&gt;free_node_data(top-&gt;_algorithm_data);</td></tr>
<tr class="codeline" data-linenumber="219"><td class="num" id="LN219">219</td><td class="line">        pop();</td></tr>
<tr class="codeline" data-linenumber="220"><td class="num" id="LN220">220</td><td class="line">      } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="221"><td class="num" id="LN221">221</td><td class="line">        InstanceKlass* next = <span class='macro'>NULL<span class='macro_popup'>__null</span></span>;</td></tr>
<tr class="codeline" data-linenumber="222"><td class="num" id="LN222">222</td><td class="line">        <span class='keyword'>if</span> (top-&gt;has_visited_super() == <span class='keyword'>false</span>) {</td></tr>
<tr class="codeline" data-linenumber="223"><td class="num" id="LN223">223</td><td class="line">          next = top-&gt;next_super();</td></tr>
<tr class="codeline" data-linenumber="224"><td class="num" id="LN224">224</td><td class="line">          top-&gt;set_super_visited();</td></tr>
<tr class="codeline" data-linenumber="225"><td class="num" id="LN225">225</td><td class="line">        } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="226"><td class="num" id="LN226">226</td><td class="line">          next = top-&gt;next_interface();</td></tr>
<tr class="codeline" data-linenumber="227"><td class="num" id="LN227">227</td><td class="line">          top-&gt;increment_visited_interface();</td></tr>
<tr class="codeline" data-linenumber="228"><td class="num" id="LN228">228</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="229"><td class="num" id="LN229">229</td><td class="line">        <span class='macro'>assert(next != NULL, <span class='string_literal'>"Otherwise we shouldn't be here"</span>)<span class='macro_popup'>do { if (!(next != __null)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 229, "assert(" "next != __null" ") failed", "Otherwise we shouldn't be here"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="230"><td class="num" id="LN230">230</td><td class="line">        push(next, algo);</td></tr>
<tr class="codeline" data-linenumber="231"><td class="num" id="LN231">231</td><td class="line">        top_needs_visit = <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="232"><td class="num" id="LN232">232</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="233"><td class="num" id="LN233">233</td><td class="line">    } <span class='keyword'>while</span> (has_more_nodes());</td></tr>
<tr class="codeline" data-linenumber="234"><td class="num" id="LN234">234</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="235"><td class="num" id="LN235">235</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="236"><td class="num" id="LN236">236</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="237"><td class="num" id="LN237">237</td><td class="line"><span class='keyword'>class</span> PrintHierarchy : <span class='keyword'>public</span> HierarchyVisitor&lt;PrintHierarchy&gt; {</td></tr>
<tr class="codeline" data-linenumber="238"><td class="num" id="LN238">238</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="239"><td class="num" id="LN239">239</td><td class="line">   outputStream* _st;</td></tr>
<tr class="codeline" data-linenumber="240"><td class="num" id="LN240">240</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="241"><td class="num" id="LN241">241</td><td class="line">  <span class='keyword'>bool</span> visit() {</td></tr>
<tr class="codeline" data-linenumber="242"><td class="num" id="LN242">242</td><td class="line">    InstanceKlass* cls = current_class();</td></tr>
<tr class="codeline" data-linenumber="243"><td class="num" id="LN243">243</td><td class="line">    streamIndentor si(_st, current_depth() * 2);</td></tr>
<tr class="codeline" data-linenumber="244"><td class="num" id="LN244">244</td><td class="line">    _st-&gt;indent().print_cr(<span class='string_literal'>"%s"</span>, cls-&gt;name()-&gt;as_C_string());</td></tr>
<tr class="codeline" data-linenumber="245"><td class="num" id="LN245">245</td><td class="line">    <span class='keyword'>return</span> <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="246"><td class="num" id="LN246">246</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="247"><td class="num" id="LN247">247</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="248"><td class="num" id="LN248">248</td><td class="line">  <span class='keyword'>void</span>* new_node_data() { <span class='keyword'>return</span> <span class='macro'>NULL<span class='macro_popup'>__null</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="249"><td class="num" id="LN249">249</td><td class="line">  <span class='keyword'>void</span> free_node_data(<span class='keyword'>void</span>* data) { <span class='keyword'>return</span>; }</td></tr>
<tr class="codeline" data-linenumber="250"><td class="num" id="LN250">250</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="251"><td class="num" id="LN251">251</td><td class="line">  PrintHierarchy(outputStream* st = tty) : _st(st) {}</td></tr>
<tr class="codeline" data-linenumber="252"><td class="num" id="LN252">252</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="253"><td class="num" id="LN253">253</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="254"><td class="num" id="LN254">254</td><td class="line"><span class='comment'>// Used to register InstanceKlass objects and all related metadata structures</span></td></tr>
<tr class="codeline" data-linenumber="255"><td class="num" id="LN255">255</td><td class="line"><span class='comment'>// (Methods, ConstantPools) as "in-use" by the current thread so that they can't</span></td></tr>
<tr class="codeline" data-linenumber="256"><td class="num" id="LN256">256</td><td class="line"><span class='comment'>// be deallocated by class redefinition while we're using them.  The classes are</span></td></tr>
<tr class="codeline" data-linenumber="257"><td class="num" id="LN257">257</td><td class="line"><span class='comment'>// de-registered when this goes out of scope.</span></td></tr>
<tr class="codeline" data-linenumber="258"><td class="num" id="LN258">258</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="259"><td class="num" id="LN259">259</td><td class="line"><span class='comment'>// Once a class is registered, we need not bother with methodHandles or</span></td></tr>
<tr class="codeline" data-linenumber="260"><td class="num" id="LN260">260</td><td class="line"><span class='comment'>// constantPoolHandles for it's associated metadata.</span></td></tr>
<tr class="codeline" data-linenumber="261"><td class="num" id="LN261">261</td><td class="line"><span class='keyword'>class</span> KeepAliveRegistrar : <span class='keyword'>public</span> StackObj {</td></tr>
<tr class="codeline" data-linenumber="262"><td class="num" id="LN262">262</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="263"><td class="num" id="LN263">263</td><td class="line">  Thread* _thread;</td></tr>
<tr class="codeline" data-linenumber="264"><td class="num" id="LN264">264</td><td class="line">  GrowableArray&lt;ConstantPool*&gt; _keep_alive;</td></tr>
<tr class="codeline" data-linenumber="265"><td class="num" id="LN265">265</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="266"><td class="num" id="LN266">266</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="267"><td class="num" id="LN267">267</td><td class="line">  KeepAliveRegistrar(Thread* thread) : _thread(thread), _keep_alive(6) {</td></tr>
<tr class="codeline" data-linenumber="268"><td class="num" id="LN268">268</td><td class="line">    <span class='macro'>assert(thread == Thread::current(), <span class='string_literal'>"Must be current thread"</span>)<span class='macro_popup'>do { if (!(thread == Thread::current())) { (*g_assert_poison)<br> = 'X';; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 268, "assert(" "thread == Thread::current()" ") failed", "Must be current thread"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="269"><td class="num" id="LN269">269</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="270"><td class="num" id="LN270">270</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="271"><td class="num" id="LN271">271</td><td class="line">  ~KeepAliveRegistrar() {</td></tr>
<tr class="codeline" data-linenumber="272"><td class="num" id="LN272">272</td><td class="line">    <span class='keyword'>for</span> (<span class='keyword'>int</span> i = _keep_alive.length() - 1; i &gt;= 0; --i) {</td></tr>
<tr class="codeline" data-linenumber="273"><td class="num" id="LN273">273</td><td class="line">      ConstantPool* cp = _keep_alive.at(i);</td></tr>
<tr class="codeline" data-linenumber="274"><td class="num" id="LN274">274</td><td class="line">      <span class='keyword'>int</span> idx = _thread-&gt;metadata_handles()-&gt;find_from_end(cp);</td></tr>
<tr class="codeline" data-linenumber="275"><td class="num" id="LN275">275</td><td class="line">      <span class='macro'>assert(idx &gt; 0, <span class='string_literal'>"Must be in the list"</span>)<span class='macro_popup'>do { if (!(idx &gt; 0)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 275, "assert(" "idx &gt; 0" ") failed", "Must be in the list"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="276"><td class="num" id="LN276">276</td><td class="line">      _thread-&gt;metadata_handles()-&gt;remove_at(idx);</td></tr>
<tr class="codeline" data-linenumber="277"><td class="num" id="LN277">277</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="278"><td class="num" id="LN278">278</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="279"><td class="num" id="LN279">279</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="280"><td class="num" id="LN280">280</td><td class="line">  <span class='comment'>// Register a class as 'in-use' by the thread.  It's fine to register a class</span></td></tr>
<tr class="codeline" data-linenumber="281"><td class="num" id="LN281">281</td><td class="line">  <span class='comment'>// multiple times (though perhaps inefficient)</span></td></tr>
<tr class="codeline" data-linenumber="282"><td class="num" id="LN282">282</td><td class="line">  <span class='keyword'>void</span> register_class(InstanceKlass* ik) {</td></tr>
<tr class="codeline" data-linenumber="283"><td class="num" id="LN283">283</td><td class="line">    ConstantPool* cp = ik-&gt;constants();</td></tr>
<tr class="codeline" data-linenumber="284"><td class="num" id="LN284">284</td><td class="line">    _keep_alive.push(cp);</td></tr>
<tr class="codeline" data-linenumber="285"><td class="num" id="LN285">285</td><td class="line">    _thread-&gt;metadata_handles()-&gt;push(cp);</td></tr>
<tr class="codeline" data-linenumber="286"><td class="num" id="LN286">286</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="287"><td class="num" id="LN287">287</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="288"><td class="num" id="LN288">288</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="289"><td class="num" id="LN289">289</td><td class="line"><span class='keyword'>class</span> KeepAliveVisitor : <span class='keyword'>public</span> HierarchyVisitor&lt;KeepAliveVisitor&gt; {</td></tr>
<tr class="codeline" data-linenumber="290"><td class="num" id="LN290">290</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="291"><td class="num" id="LN291">291</td><td class="line">  KeepAliveRegistrar* _registrar;</td></tr>
<tr class="codeline" data-linenumber="292"><td class="num" id="LN292">292</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="293"><td class="num" id="LN293">293</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="294"><td class="num" id="LN294">294</td><td class="line">  KeepAliveVisitor(KeepAliveRegistrar* registrar) : _registrar(registrar) {}</td></tr>
<tr class="codeline" data-linenumber="295"><td class="num" id="LN295">295</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="296"><td class="num" id="LN296">296</td><td class="line">  <span class='keyword'>void</span>* new_node_data() { <span class='keyword'>return</span> <span class='macro'>NULL<span class='macro_popup'>__null</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="297"><td class="num" id="LN297">297</td><td class="line">  <span class='keyword'>void</span> free_node_data(<span class='keyword'>void</span>* data) { <span class='keyword'>return</span>; }</td></tr>
<tr class="codeline" data-linenumber="298"><td class="num" id="LN298">298</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="299"><td class="num" id="LN299">299</td><td class="line">  <span class='keyword'>bool</span> visit() {</td></tr>
<tr class="codeline" data-linenumber="300"><td class="num" id="LN300">300</td><td class="line">    _registrar-&gt;register_class(current_class());</td></tr>
<tr class="codeline" data-linenumber="301"><td class="num" id="LN301">301</td><td class="line">    <span class='keyword'>return</span> <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="302"><td class="num" id="LN302">302</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="303"><td class="num" id="LN303">303</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="304"><td class="num" id="LN304">304</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="305"><td class="num" id="LN305">305</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="306"><td class="num" id="LN306">306</td><td class="line"><span class='comment'>// A method family contains a set of all methods that implement a single</span></td></tr>
<tr class="codeline" data-linenumber="307"><td class="num" id="LN307">307</td><td class="line"><span class='comment'>// erased method. As members of the set are collected while walking over the</span></td></tr>
<tr class="codeline" data-linenumber="308"><td class="num" id="LN308">308</td><td class="line"><span class='comment'>// hierarchy, they are tagged with a qualification state.  The qualification</span></td></tr>
<tr class="codeline" data-linenumber="309"><td class="num" id="LN309">309</td><td class="line"><span class='comment'>// state for an erased method is set to disqualified if there exists a path</span></td></tr>
<tr class="codeline" data-linenumber="310"><td class="num" id="LN310">310</td><td class="line"><span class='comment'>// from the root of hierarchy to the method that contains an interleaving</span></td></tr>
<tr class="codeline" data-linenumber="311"><td class="num" id="LN311">311</td><td class="line"><span class='comment'>// erased method defined in an interface.</span></td></tr>
<tr class="codeline" data-linenumber="312"><td class="num" id="LN312">312</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="313"><td class="num" id="LN313">313</td><td class="line"><span class='keyword'>class</span> MethodState {</td></tr>
<tr class="codeline" data-linenumber="314"><td class="num" id="LN314">314</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="315"><td class="num" id="LN315">315</td><td class="line">  Method* _method;</td></tr>
<tr class="codeline" data-linenumber="316"><td class="num" id="LN316">316</td><td class="line">  QualifiedState _state;</td></tr>
<tr class="codeline" data-linenumber="317"><td class="num" id="LN317">317</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="318"><td class="num" id="LN318">318</td><td class="line">  MethodState() : _method(<span class='macro'>NULL<span class='macro_popup'>__null</span></span>), _state(DISQUALIFIED) {}</td></tr>
<tr class="codeline" data-linenumber="319"><td class="num" id="LN319">319</td><td class="line">  MethodState(Method* method, QualifiedState state) : _method(method), _state(state) {}</td></tr>
<tr class="codeline" data-linenumber="320"><td class="num" id="LN320">320</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="321"><td class="num" id="LN321">321</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="322"><td class="num" id="LN322">322</td><td class="line"><span class='keyword'>class</span> MethodFamily : <span class='keyword'>public</span> ResourceObj {</td></tr>
<tr class="codeline" data-linenumber="323"><td class="num" id="LN323">323</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="324"><td class="num" id="LN324">324</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="325"><td class="num" id="LN325">325</td><td class="line">  GrowableArray&lt;MethodState&gt; _members;</td></tr>
<tr class="codeline" data-linenumber="326"><td class="num" id="LN326">326</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="327"><td class="num" id="LN327">327</td><td class="line">  Method* _selected_target;  <span class='comment'>// Filled in later, if a unique target exists</span></td></tr>
<tr class="codeline" data-linenumber="328"><td class="num" id="LN328">328</td><td class="line">  Symbol* _exception_message; <span class='comment'>// If no unique target is found</span></td></tr>
<tr class="codeline" data-linenumber="329"><td class="num" id="LN329">329</td><td class="line">  Symbol* _exception_name;    <span class='comment'>// If no unique target is found</span></td></tr>
<tr class="codeline" data-linenumber="330"><td class="num" id="LN330">330</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="331"><td class="num" id="LN331">331</td><td class="line">  MethodState* find_method(Method* method) {</td></tr>
<tr class="codeline" data-linenumber="332"><td class="num" id="LN332">332</td><td class="line">    <span class='keyword'>for</span> (<span class='keyword'>int</span> i = 0; i &lt; _members.length(); i++) {</td></tr>
<tr class="codeline" data-linenumber="333"><td class="num" id="LN333">333</td><td class="line">      <span class='keyword'>if</span> (_members.at(i)._method == method) {</td></tr>
<tr class="codeline" data-linenumber="334"><td class="num" id="LN334">334</td><td class="line">        <span class='keyword'>return</span> &amp;_members.at(i);</td></tr>
<tr class="codeline" data-linenumber="335"><td class="num" id="LN335">335</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="336"><td class="num" id="LN336">336</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="337"><td class="num" id="LN337">337</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>NULL<span class='macro_popup'>__null</span></span>;</td></tr>
<tr class="codeline" data-linenumber="338"><td class="num" id="LN338">338</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="339"><td class="num" id="LN339">339</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="340"><td class="num" id="LN340">340</td><td class="line">  <span class='keyword'>void</span> add_method(Method* method, QualifiedState state) {</td></tr>
<tr class="codeline" data-linenumber="341"><td class="num" id="LN341">341</td><td class="line">    MethodState method_state(method, state);</td></tr>
<tr class="codeline" data-linenumber="342"><td class="num" id="LN342">342</td><td class="line">    _members.append(method_state);</td></tr>
<tr class="codeline" data-linenumber="343"><td class="num" id="LN343">343</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="344"><td class="num" id="LN344">344</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="345"><td class="num" id="LN345">345</td><td class="line">  Symbol* generate_no_defaults_message() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="346"><td class="num" id="LN346">346</td><td class="line">  Symbol* generate_method_message(Symbol *klass_name, Method* method) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="347"><td class="num" id="LN347">347</td><td class="line">  Symbol* generate_conflicts_message(GrowableArray&lt;MethodState&gt;* methods) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="348"><td class="num" id="LN348">348</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="349"><td class="num" id="LN349">349</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="350"><td class="num" id="LN350">350</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="351"><td class="num" id="LN351">351</td><td class="line">  MethodFamily()</td></tr>
<tr class="codeline" data-linenumber="352"><td class="num" id="LN352">352</td><td class="line">      : _selected_target(<span class='macro'>NULL<span class='macro_popup'>__null</span></span>), _exception_message(<span class='macro'>NULL<span class='macro_popup'>__null</span></span>), _exception_name(<span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {}</td></tr>
<tr class="codeline" data-linenumber="353"><td class="num" id="LN353">353</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="354"><td class="num" id="LN354">354</td><td class="line">  <span class='keyword'>void</span> set_target_if_empty(Method* m) {</td></tr>
<tr class="codeline" data-linenumber="355"><td class="num" id="LN355">355</td><td class="line">    <span class='keyword'>if</span> (_selected_target == <span class='macro'>NULL<span class='macro_popup'>__null</span></span> &amp;&amp; !m-&gt;is_overpass()) {</td></tr>
<tr class="codeline" data-linenumber="356"><td class="num" id="LN356">356</td><td class="line">      _selected_target = m;</td></tr>
<tr class="codeline" data-linenumber="357"><td class="num" id="LN357">357</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="358"><td class="num" id="LN358">358</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="359"><td class="num" id="LN359">359</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="360"><td class="num" id="LN360">360</td><td class="line">  <span class='keyword'>void</span> record_method(Method* m, QualifiedState state) {</td></tr>
<tr class="codeline" data-linenumber="361"><td class="num" id="LN361">361</td><td class="line">    <span class='comment'>// If not in the set, add it.  If it's already in the set, then leave it</span></td></tr>
<tr class="codeline" data-linenumber="362"><td class="num" id="LN362">362</td><td class="line">    <span class='comment'>// as is if state is qualified, or set it to disqualified if state is</span></td></tr>
<tr class="codeline" data-linenumber="363"><td class="num" id="LN363">363</td><td class="line">    <span class='comment'>// disqualified.</span></td></tr>
<tr class="codeline" data-linenumber="364"><td class="num" id="LN364">364</td><td class="line">    MethodState* method_state = find_method(m);</td></tr>
<tr class="codeline" data-linenumber="365"><td class="num" id="LN365">365</td><td class="line">    <span class='keyword'>if</span> (method_state == <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="366"><td class="num" id="LN366">366</td><td class="line">      add_method(m, state);</td></tr>
<tr class="codeline" data-linenumber="367"><td class="num" id="LN367">367</td><td class="line">    } <span class='keyword'>else</span> <span class='keyword'>if</span> (state == DISQUALIFIED) {</td></tr>
<tr class="codeline" data-linenumber="368"><td class="num" id="LN368">368</td><td class="line">      method_state-&gt;_state = DISQUALIFIED;</td></tr>
<tr class="codeline" data-linenumber="369"><td class="num" id="LN369">369</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="370"><td class="num" id="LN370">370</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="371"><td class="num" id="LN371">371</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="372"><td class="num" id="LN372">372</td><td class="line">  <span class='keyword'>bool</span> has_target() <span class='keyword'>const</span> { <span class='keyword'>return</span> _selected_target != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="373"><td class="num" id="LN373">373</td><td class="line">  <span class='keyword'>bool</span> throws_exception() { <span class='keyword'>return</span> _exception_message != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="374"><td class="num" id="LN374">374</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="375"><td class="num" id="LN375">375</td><td class="line">  Method* get_selected_target() { <span class='keyword'>return</span> _selected_target; }</td></tr>
<tr class="codeline" data-linenumber="376"><td class="num" id="LN376">376</td><td class="line">  Symbol* get_exception_message() { <span class='keyword'>return</span> _exception_message; }</td></tr>
<tr class="codeline" data-linenumber="377"><td class="num" id="LN377">377</td><td class="line">  Symbol* get_exception_name() { <span class='keyword'>return</span> _exception_name; }</td></tr>
<tr class="codeline" data-linenumber="378"><td class="num" id="LN378">378</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="379"><td class="num" id="LN379">379</td><td class="line">  <span class='comment'>// Either sets the target or the exception error message</span></td></tr>
<tr class="codeline" data-linenumber="380"><td class="num" id="LN380">380</td><td class="line">  <span class='keyword'>void</span> determine_target_or_set_exception_message(InstanceKlass* root) {</td></tr>
<tr class="codeline" data-linenumber="381"><td class="num" id="LN381">381</td><td class="line">    <span class='keyword'>if</span> (has_target() || throws_exception()) {</td></tr>
<tr class="codeline" data-linenumber="382"><td class="num" id="LN382">382</td><td class="line">      <span class='keyword'>return</span>;</td></tr>
<tr class="codeline" data-linenumber="383"><td class="num" id="LN383">383</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="384"><td class="num" id="LN384">384</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="385"><td class="num" id="LN385">385</td><td class="line">    <span class='comment'>// Qualified methods are maximally-specific methods</span></td></tr>
<tr class="codeline" data-linenumber="386"><td class="num" id="LN386">386</td><td class="line">    <span class='comment'>// These include public, instance concrete (=default) and abstract methods</span></td></tr>
<tr class="codeline" data-linenumber="387"><td class="num" id="LN387">387</td><td class="line">    <span class='keyword'>int</span> num_defaults = 0;</td></tr>
<tr class="codeline" data-linenumber="388"><td class="num" id="LN388">388</td><td class="line">    <span class='keyword'>int</span> default_index = -1;</td></tr>
<tr class="codeline" data-linenumber="389"><td class="num" id="LN389">389</td><td class="line">    <span class='keyword'>for</span> (<span class='keyword'>int</span> i = 0; i &lt; _members.length(); i++) {</td></tr>
<tr class="codeline" data-linenumber="390"><td class="num" id="LN390">390</td><td class="line">      MethodState &amp;member = _members.at(i);</td></tr>
<tr class="codeline" data-linenumber="391"><td class="num" id="LN391">391</td><td class="line">      <span class='keyword'>if</span> (member._state == QUALIFIED) {</td></tr>
<tr class="codeline" data-linenumber="392"><td class="num" id="LN392">392</td><td class="line">        <span class='keyword'>if</span> (member._method-&gt;is_default_method()) {</td></tr>
<tr class="codeline" data-linenumber="393"><td class="num" id="LN393">393</td><td class="line">          num_defaults++;</td></tr>
<tr class="codeline" data-linenumber="394"><td class="num" id="LN394">394</td><td class="line">          default_index = i;</td></tr>
<tr class="codeline" data-linenumber="395"><td class="num" id="LN395">395</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="396"><td class="num" id="LN396">396</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="397"><td class="num" id="LN397">397</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="398"><td class="num" id="LN398">398</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="399"><td class="num" id="LN399">399</td><td class="line">    <span class='keyword'>if</span> (num_defaults == 1) {</td></tr>
<tr class="codeline" data-linenumber="400"><td class="num" id="LN400">400</td><td class="line">      <span class='macro'>assert(_members.at(default_index)._state == QUALIFIED, <span class='string_literal'>""</span>)<span class='macro_popup'>do { if (!(_members.at(default_index)._state == QUALIFIED)) {<br> (*g_assert_poison) = 'X';; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 400, "assert(" "_members.at(default_index)._state == QUALIFIED"<br> ") failed", ""); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="401"><td class="num" id="LN401">401</td><td class="line">      _selected_target = _members.at(default_index)._method;</td></tr>
<tr class="codeline" data-linenumber="402"><td class="num" id="LN402">402</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="403"><td class="num" id="LN403">403</td><td class="line">      generate_and_set_exception_message(root, num_defaults, default_index);</td></tr>
<tr class="codeline" data-linenumber="404"><td class="num" id="LN404">404</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="405"><td class="num" id="LN405">405</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="406"><td class="num" id="LN406">406</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="407"><td class="num" id="LN407">407</td><td class="line">  <span class='keyword'>void</span> generate_and_set_exception_message(InstanceKlass* root, <span class='keyword'>int</span> num_defaults, <span class='keyword'>int</span> default_index) {</td></tr>
<tr class="codeline" data-linenumber="408"><td class="num" id="LN408">408</td><td class="line">    <span class='macro'>assert(num_defaults != 1, <span class='string_literal'>"invariant - should've been handled calling method"</span>)<span class='macro_popup'>do { if (!(num_defaults != 1)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 408, "assert(" "num_defaults != 1" ") failed", "invariant - should've been handled calling method"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="409"><td class="num" id="LN409">409</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="410"><td class="num" id="LN410">410</td><td class="line">    GrowableArray&lt;Method*&gt; qualified_methods;</td></tr>
<tr class="codeline" data-linenumber="411"><td class="num" id="LN411">411</td><td class="line">    <span class='keyword'>for</span> (<span class='keyword'>int</span> i = 0; i &lt; _members.length(); i++) {</td></tr>
<tr class="codeline" data-linenumber="412"><td class="num" id="LN412">412</td><td class="line">      MethodState&amp; member = _members.at(i);</td></tr>
<tr class="codeline" data-linenumber="413"><td class="num" id="LN413">413</td><td class="line">      <span class='keyword'>if</span> (member._state == QUALIFIED) {</td></tr>
<tr class="codeline" data-linenumber="414"><td class="num" id="LN414">414</td><td class="line">        qualified_methods.push(member._method);</td></tr>
<tr class="codeline" data-linenumber="415"><td class="num" id="LN415">415</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="416"><td class="num" id="LN416">416</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="417"><td class="num" id="LN417">417</td><td class="line">    <span class='keyword'>if</span> (num_defaults == 0) {</td></tr>
<tr class="codeline" data-linenumber="418"><td class="num" id="LN418">418</td><td class="line">      <span class='comment'>// If the root klass has a static method with matching name and signature</span></td></tr>
<tr class="codeline" data-linenumber="419"><td class="num" id="LN419">419</td><td class="line">      <span class='comment'>// then do not generate an overpass method because it will hide the</span></td></tr>
<tr class="codeline" data-linenumber="420"><td class="num" id="LN420">420</td><td class="line">      <span class='comment'>// static method during resolution.</span></td></tr>
<tr class="codeline" data-linenumber="421"><td class="num" id="LN421">421</td><td class="line">      <span class='keyword'>if</span> (qualified_methods.length() == 0) {</td></tr>
<tr class="codeline" data-linenumber="422"><td class="num" id="LN422">422</td><td class="line">        _exception_message = generate_no_defaults_message();</td></tr>
<tr class="codeline" data-linenumber="423"><td class="num" id="LN423">423</td><td class="line">      } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="424"><td class="num" id="LN424">424</td><td class="line">        <span class='macro'>assert(root != NULL, <span class='string_literal'>"Null root class"</span>)<span class='macro_popup'>do { if (!(root != __null)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 424, "assert(" "root != __null" ") failed", "Null root class"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="425"><td class="num" id="LN425">425</td><td class="line">        _exception_message = generate_method_message(root-&gt;name(), qualified_methods.at(0));</td></tr>
<tr class="codeline" data-linenumber="426"><td class="num" id="LN426">426</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="427"><td class="num" id="LN427">427</td><td class="line">      _exception_name = vmSymbols::java_lang_AbstractMethodError();</td></tr>
<tr class="codeline" data-linenumber="428"><td class="num" id="LN428">428</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="429"><td class="num" id="LN429">429</td><td class="line">      _exception_message = generate_conflicts_message(&amp;_members);</td></tr>
<tr class="codeline" data-linenumber="430"><td class="num" id="LN430">430</td><td class="line">      _exception_name = vmSymbols::java_lang_IncompatibleClassChangeError();</td></tr>
<tr class="codeline" data-linenumber="431"><td class="num" id="LN431">431</td><td class="line">      <span class='macro'>LogTarget(Debug, defaultmethods)<span class='macro_popup'>LogTargetImpl&lt;LogLevel::Debug, (LogTag::_defaultmethods), (<br>LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag<br>::__NO_TAG), (LogTag::__NO_TAG)&gt;</span></span> lt;</td></tr>
<tr class="codeline" data-linenumber="432"><td class="num" id="LN432">432</td><td class="line">      <span class='keyword'>if</span> (lt.is_enabled()) {</td></tr>
<tr class="codeline" data-linenumber="433"><td class="num" id="LN433">433</td><td class="line">        LogStream ls(lt);</td></tr>
<tr class="codeline" data-linenumber="434"><td class="num" id="LN434">434</td><td class="line">        _exception_message-&gt;print_value_on(&amp;ls);</td></tr>
<tr class="codeline" data-linenumber="435"><td class="num" id="LN435">435</td><td class="line">        ls.cr();</td></tr>
<tr class="codeline" data-linenumber="436"><td class="num" id="LN436">436</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="437"><td class="num" id="LN437">437</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="438"><td class="num" id="LN438">438</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="439"><td class="num" id="LN439">439</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="440"><td class="num" id="LN440">440</td><td class="line">  <span class='keyword'>void</span> print_selected(outputStream* str, <span class='keyword'>int</span> indent) <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="441"><td class="num" id="LN441">441</td><td class="line">    <span class='macro'>assert(has_target(), <span class='string_literal'>"Should be called otherwise"</span>)<span class='macro_popup'>do { if (!(has_target())) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 441, "assert(" "has_target()" ") failed", "Should be called otherwise"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="442"><td class="num" id="LN442">442</td><td class="line">    streamIndentor si(str, indent * 2);</td></tr>
<tr class="codeline" data-linenumber="443"><td class="num" id="LN443">443</td><td class="line">    str-&gt;indent().print(<span class='string_literal'>"Selected method: "</span>);</td></tr>
<tr class="codeline" data-linenumber="444"><td class="num" id="LN444">444</td><td class="line">    print_method(str, _selected_target);</td></tr>
<tr class="codeline" data-linenumber="445"><td class="num" id="LN445">445</td><td class="line">    Klass* method_holder = _selected_target-&gt;method_holder();</td></tr>
<tr class="codeline" data-linenumber="446"><td class="num" id="LN446">446</td><td class="line">    <span class='keyword'>if</span> (!method_holder-&gt;is_interface()) {</td></tr>
<tr class="codeline" data-linenumber="447"><td class="num" id="LN447">447</td><td class="line">      str-&gt;print(<span class='string_literal'>" : in superclass"</span>);</td></tr>
<tr class="codeline" data-linenumber="448"><td class="num" id="LN448">448</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="449"><td class="num" id="LN449">449</td><td class="line">    str-&gt;cr();</td></tr>
<tr class="codeline" data-linenumber="450"><td class="num" id="LN450">450</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="451"><td class="num" id="LN451">451</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="452"><td class="num" id="LN452">452</td><td class="line">  <span class='keyword'>void</span> print_exception(outputStream* str, <span class='keyword'>int</span> indent) {</td></tr>
<tr class="codeline" data-linenumber="453"><td class="num" id="LN453">453</td><td class="line">    <span class='macro'>assert(throws_exception(), <span class='string_literal'>"Should be called otherwise"</span>)<span class='macro_popup'>do { if (!(throws_exception())) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 453, "assert(" "throws_exception()" ") failed", "Should be called otherwise"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="454"><td class="num" id="LN454">454</td><td class="line">    <span class='macro'>assert(_exception_name != NULL, <span class='string_literal'>"exception_name should be set"</span>)<span class='macro_popup'>do { if (!(_exception_name != __null)) { (*g_assert_poison) =<br> 'X';; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 454, "assert(" "_exception_name != __null" ") failed", "exception_name should be set"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="455"><td class="num" id="LN455">455</td><td class="line">    streamIndentor si(str, indent * 2);</td></tr>
<tr class="codeline" data-linenumber="456"><td class="num" id="LN456">456</td><td class="line">    str-&gt;indent().print_cr(<span class='string_literal'>"%s: %s"</span>, _exception_name-&gt;as_C_string(), _exception_message-&gt;as_C_string());</td></tr>
<tr class="codeline" data-linenumber="457"><td class="num" id="LN457">457</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="458"><td class="num" id="LN458">458</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="459"><td class="num" id="LN459">459</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="460"><td class="num" id="LN460">460</td><td class="line">Symbol* MethodFamily::generate_no_defaults_message() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="461"><td class="num" id="LN461">461</td><td class="line">  <span class='keyword'>return</span> SymbolTable::new_symbol(<span class='string_literal'>"No qualifying defaults found"</span>);</td></tr>
<tr class="codeline" data-linenumber="462"><td class="num" id="LN462">462</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="463"><td class="num" id="LN463">463</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="464"><td class="num" id="LN464">464</td><td class="line">Symbol* MethodFamily::generate_method_message(Symbol *klass_name, Method* method) <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="465"><td class="num" id="LN465">465</td><td class="line">  stringStream ss;</td></tr>
<tr class="codeline" data-linenumber="466"><td class="num" id="LN466">466</td><td class="line">  ss.print(<span class='string_literal'>"Method "</span>);</td></tr>
<tr class="codeline" data-linenumber="467"><td class="num" id="LN467">467</td><td class="line">  Symbol* name = method-&gt;name();</td></tr>
<tr class="codeline" data-linenumber="468"><td class="num" id="LN468">468</td><td class="line">  Symbol* signature = method-&gt;signature();</td></tr>
<tr class="codeline" data-linenumber="469"><td class="num" id="LN469">469</td><td class="line">  ss.write((<span class='keyword'>const</span> <span class='keyword'>char</span>*)klass_name-&gt;bytes(), klass_name-&gt;utf8_length());</td></tr>
<tr class="codeline" data-linenumber="470"><td class="num" id="LN470">470</td><td class="line">  ss.print(<span class='string_literal'>"."</span>);</td></tr>
<tr class="codeline" data-linenumber="471"><td class="num" id="LN471">471</td><td class="line">  ss.write((<span class='keyword'>const</span> <span class='keyword'>char</span>*)name-&gt;bytes(), name-&gt;utf8_length());</td></tr>
<tr class="codeline" data-linenumber="472"><td class="num" id="LN472">472</td><td class="line">  ss.write((<span class='keyword'>const</span> <span class='keyword'>char</span>*)signature-&gt;bytes(), signature-&gt;utf8_length());</td></tr>
<tr class="codeline" data-linenumber="473"><td class="num" id="LN473">473</td><td class="line">  ss.print(<span class='string_literal'>" is abstract"</span>);</td></tr>
<tr class="codeline" data-linenumber="474"><td class="num" id="LN474">474</td><td class="line">  <span class='keyword'>return</span> SymbolTable::new_symbol(ss.base(), (<span class='keyword'>int</span>)ss.size());</td></tr>
<tr class="codeline" data-linenumber="475"><td class="num" id="LN475">475</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="476"><td class="num" id="LN476">476</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="477"><td class="num" id="LN477">477</td><td class="line">Symbol* MethodFamily::generate_conflicts_message(GrowableArray&lt;MethodState&gt;* methods) <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="478"><td class="num" id="LN478">478</td><td class="line">  stringStream ss;</td></tr>
<tr class="codeline" data-linenumber="479"><td class="num" id="LN479">479</td><td class="line">  ss.print(<span class='string_literal'>"Conflicting default methods:"</span>);</td></tr>
<tr class="codeline" data-linenumber="480"><td class="num" id="LN480">480</td><td class="line">  <span class='keyword'>for</span> (<span class='keyword'>int</span> i = 0; i &lt; methods-&gt;length(); ++i) {</td></tr>
<tr class="codeline" data-linenumber="481"><td class="num" id="LN481">481</td><td class="line">    Method *method = methods-&gt;at(i)._method;</td></tr>
<tr class="codeline" data-linenumber="482"><td class="num" id="LN482">482</td><td class="line">    Symbol *klass = method-&gt;klass_name();</td></tr>
<tr class="codeline" data-linenumber="483"><td class="num" id="LN483">483</td><td class="line">    Symbol *name = method-&gt;name();</td></tr>
<tr class="codeline" data-linenumber="484"><td class="num" id="LN484">484</td><td class="line">    ss.print(<span class='string_literal'>" "</span>);</td></tr>
<tr class="codeline" data-linenumber="485"><td class="num" id="LN485">485</td><td class="line">    ss.write((<span class='keyword'>const</span> <span class='keyword'>char</span>*) klass-&gt;bytes(), klass-&gt;utf8_length());</td></tr>
<tr class="codeline" data-linenumber="486"><td class="num" id="LN486">486</td><td class="line">    ss.print(<span class='string_literal'>"."</span>);</td></tr>
<tr class="codeline" data-linenumber="487"><td class="num" id="LN487">487</td><td class="line">    ss.write((<span class='keyword'>const</span> <span class='keyword'>char</span>*) name-&gt;bytes(), name-&gt;utf8_length());</td></tr>
<tr class="codeline" data-linenumber="488"><td class="num" id="LN488">488</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="489"><td class="num" id="LN489">489</td><td class="line">  <span class='keyword'>return</span> SymbolTable::new_symbol(ss.base(), (<span class='keyword'>int</span>)ss.size());</td></tr>
<tr class="codeline" data-linenumber="490"><td class="num" id="LN490">490</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="491"><td class="num" id="LN491">491</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="492"><td class="num" id="LN492">492</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="493"><td class="num" id="LN493">493</td><td class="line"><span class='keyword'>class</span> StateRestorerScope;</td></tr>
<tr class="codeline" data-linenumber="494"><td class="num" id="LN494">494</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="495"><td class="num" id="LN495">495</td><td class="line"><span class='comment'>// StatefulMethodFamily is a wrapper around a MethodFamily that maintains the</span></td></tr>
<tr class="codeline" data-linenumber="496"><td class="num" id="LN496">496</td><td class="line"><span class='comment'>// qualification state during hierarchy visitation, and applies that state</span></td></tr>
<tr class="codeline" data-linenumber="497"><td class="num" id="LN497">497</td><td class="line"><span class='comment'>// when adding members to the MethodFamily</span></td></tr>
<tr class="codeline" data-linenumber="498"><td class="num" id="LN498">498</td><td class="line"><span class='keyword'>class</span> StatefulMethodFamily : <span class='keyword'>public</span> ResourceObj {</td></tr>
<tr class="codeline" data-linenumber="499"><td class="num" id="LN499">499</td><td class="line">  <span class='keyword'>friend</span> <span class='keyword'>class</span> StateRestorer;</td></tr>
<tr class="codeline" data-linenumber="500"><td class="num" id="LN500">500</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="501"><td class="num" id="LN501">501</td><td class="line">  QualifiedState _qualification_state;</td></tr>
<tr class="codeline" data-linenumber="502"><td class="num" id="LN502">502</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="503"><td class="num" id="LN503">503</td><td class="line">  <span class='keyword'>void</span> set_qualification_state(QualifiedState state) {</td></tr>
<tr class="codeline" data-linenumber="504"><td class="num" id="LN504">504</td><td class="line">    _qualification_state = state;</td></tr>
<tr class="codeline" data-linenumber="505"><td class="num" id="LN505">505</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="506"><td class="num" id="LN506">506</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="507"><td class="num" id="LN507">507</td><td class="line"> <span class='keyword'>protected</span>:</td></tr>
<tr class="codeline" data-linenumber="508"><td class="num" id="LN508">508</td><td class="line">  MethodFamily _method_family;</td></tr>
<tr class="codeline" data-linenumber="509"><td class="num" id="LN509">509</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="510"><td class="num" id="LN510">510</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="511"><td class="num" id="LN511">511</td><td class="line">  StatefulMethodFamily() {</td></tr>
<tr class="codeline" data-linenumber="512"><td class="num" id="LN512">512</td><td class="line">   _qualification_state = QUALIFIED;</td></tr>
<tr class="codeline" data-linenumber="513"><td class="num" id="LN513">513</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="514"><td class="num" id="LN514">514</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="515"><td class="num" id="LN515">515</td><td class="line">  <span class='keyword'>void</span> set_target_if_empty(Method* m) { _method_family.set_target_if_empty(m); }</td></tr>
<tr class="codeline" data-linenumber="516"><td class="num" id="LN516">516</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="517"><td class="num" id="LN517">517</td><td class="line">  MethodFamily* get_method_family() { <span class='keyword'>return</span> &amp;_method_family; }</td></tr>
<tr class="codeline" data-linenumber="518"><td class="num" id="LN518">518</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="519"><td class="num" id="LN519">519</td><td class="line">  <span class='keyword'>void</span> record_method_and_dq_further(StateRestorerScope* scope, Method* mo);</td></tr>
<tr class="codeline" data-linenumber="520"><td class="num" id="LN520">520</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="521"><td class="num" id="LN521">521</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="522"><td class="num" id="LN522">522</td><td class="line"><span class='comment'>// Because we use an iterative algorithm when iterating over the type</span></td></tr>
<tr class="codeline" data-linenumber="523"><td class="num" id="LN523">523</td><td class="line"><span class='comment'>// hierarchy, we can't use traditional scoped objects which automatically do</span></td></tr>
<tr class="codeline" data-linenumber="524"><td class="num" id="LN524">524</td><td class="line"><span class='comment'>// cleanup in the destructor when the scope is exited.  StateRestorerScope (and</span></td></tr>
<tr class="codeline" data-linenumber="525"><td class="num" id="LN525">525</td><td class="line"><span class='comment'>// StateRestorer) provides a similar functionality, but for when you want a</span></td></tr>
<tr class="codeline" data-linenumber="526"><td class="num" id="LN526">526</td><td class="line"><span class='comment'>// scoped object in non-stack memory (such as in resource memory, as we do</span></td></tr>
<tr class="codeline" data-linenumber="527"><td class="num" id="LN527">527</td><td class="line"><span class='comment'>// here).  You've just got to remember to call 'restore_state()' on the scope when</span></td></tr>
<tr class="codeline" data-linenumber="528"><td class="num" id="LN528">528</td><td class="line"><span class='comment'>// leaving it (and marks have to be explicitly added). The scope is reusable after</span></td></tr>
<tr class="codeline" data-linenumber="529"><td class="num" id="LN529">529</td><td class="line"><span class='comment'>// 'restore_state()' has been called.</span></td></tr>
<tr class="codeline" data-linenumber="530"><td class="num" id="LN530">530</td><td class="line"><span class='keyword'>class</span> StateRestorer : <span class='keyword'>public</span> ResourceObj {</td></tr>
<tr class="codeline" data-linenumber="531"><td class="num" id="LN531">531</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="532"><td class="num" id="LN532">532</td><td class="line">  StatefulMethodFamily* _method;</td></tr>
<tr class="codeline" data-linenumber="533"><td class="num" id="LN533">533</td><td class="line">  QualifiedState _state_to_restore;</td></tr>
<tr class="codeline" data-linenumber="534"><td class="num" id="LN534">534</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="535"><td class="num" id="LN535">535</td><td class="line">  StateRestorer() : _method(<span class='macro'>NULL<span class='macro_popup'>__null</span></span>), _state_to_restore(DISQUALIFIED) {}</td></tr>
<tr class="codeline" data-linenumber="536"><td class="num" id="LN536">536</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="537"><td class="num" id="LN537">537</td><td class="line">  <span class='keyword'>void</span> restore_state() { _method-&gt;set_qualification_state(_state_to_restore); }</td></tr>
<tr class="codeline" data-linenumber="538"><td class="num" id="LN538">538</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="539"><td class="num" id="LN539">539</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="540"><td class="num" id="LN540">540</td><td class="line"><span class='keyword'>class</span> StateRestorerScope : <span class='keyword'>public</span> ResourceObj {</td></tr>
<tr class="codeline" data-linenumber="541"><td class="num" id="LN541">541</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="542"><td class="num" id="LN542">542</td><td class="line">  GrowableArray&lt;StateRestorer*&gt;  _marks;</td></tr>
<tr class="codeline" data-linenumber="543"><td class="num" id="LN543">543</td><td class="line">  GrowableArray&lt;StateRestorer*&gt;* _free_list; <span class='comment'>// Shared between scopes</span></td></tr>
<tr class="codeline" data-linenumber="544"><td class="num" id="LN544">544</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="545"><td class="num" id="LN545">545</td><td class="line">  StateRestorerScope(GrowableArray&lt;StateRestorer*&gt;* free_list) : _marks(), _free_list(free_list) {}</td></tr>
<tr class="codeline" data-linenumber="546"><td class="num" id="LN546">546</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="547"><td class="num" id="LN547">547</td><td class="line">  <span class='keyword'>static</span> StateRestorerScope* cast(<span class='keyword'>void</span>* data) {</td></tr>
<tr class="codeline" data-linenumber="548"><td class="num" id="LN548">548</td><td class="line">    <span class='keyword'>return</span> <span class='keyword'>static_cast</span>&lt;StateRestorerScope*&gt;(data);</td></tr>
<tr class="codeline" data-linenumber="549"><td class="num" id="LN549">549</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="550"><td class="num" id="LN550">550</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="551"><td class="num" id="LN551">551</td><td class="line">  <span class='keyword'>void</span> mark(StatefulMethodFamily* family, QualifiedState qualification_state) {</td></tr>
<tr class="codeline" data-linenumber="552"><td class="num" id="LN552">552</td><td class="line">    StateRestorer* restorer;</td></tr>
<tr class="codeline" data-linenumber="553"><td class="num" id="LN553">553</td><td class="line">    <span class='keyword'>if</span> (!_free_list-&gt;is_empty()) {</td></tr>
<tr class="codeline" data-linenumber="554"><td class="num" id="LN554">554</td><td class="line">      restorer = _free_list-&gt;pop();</td></tr>
<tr class="codeline" data-linenumber="555"><td class="num" id="LN555">555</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="556"><td class="num" id="LN556">556</td><td class="line">      restorer = <span class='keyword'>new</span> StateRestorer();</td></tr>
<tr class="codeline" data-linenumber="557"><td class="num" id="LN557">557</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="558"><td class="num" id="LN558">558</td><td class="line">    restorer-&gt;_method = family;</td></tr>
<tr class="codeline" data-linenumber="559"><td class="num" id="LN559">559</td><td class="line">    restorer-&gt;_state_to_restore = qualification_state;</td></tr>
<tr class="codeline" data-linenumber="560"><td class="num" id="LN560">560</td><td class="line">    _marks.append(restorer);</td></tr>
<tr class="codeline" data-linenumber="561"><td class="num" id="LN561">561</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="562"><td class="num" id="LN562">562</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="563"><td class="num" id="LN563">563</td><td class="line"><span class='directive'>#ifdef <span class='macro'>ASSERT<span class='macro_popup'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="564"><td class="num" id="LN564">564</td><td class="line">  <span class='keyword'>bool</span> is_empty() {</td></tr>
<tr class="codeline" data-linenumber="565"><td class="num" id="LN565">565</td><td class="line">    <span class='keyword'>return</span> _marks.is_empty();</td></tr>
<tr class="codeline" data-linenumber="566"><td class="num" id="LN566">566</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="567"><td class="num" id="LN567">567</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="568"><td class="num" id="LN568">568</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="569"><td class="num" id="LN569">569</td><td class="line">  <span class='keyword'>void</span> restore_state() {</td></tr>
<tr class="codeline" data-linenumber="570"><td class="num" id="LN570">570</td><td class="line">    <span class='keyword'>while</span>(!_marks.is_empty()) {</td></tr>
<tr class="codeline" data-linenumber="571"><td class="num" id="LN571">571</td><td class="line">      StateRestorer* restorer = _marks.pop();</td></tr>
<tr class="codeline" data-linenumber="572"><td class="num" id="LN572">572</td><td class="line">      restorer-&gt;restore_state();</td></tr>
<tr class="codeline" data-linenumber="573"><td class="num" id="LN573">573</td><td class="line">      _free_list-&gt;push(restorer);</td></tr>
<tr class="codeline" data-linenumber="574"><td class="num" id="LN574">574</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="575"><td class="num" id="LN575">575</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="576"><td class="num" id="LN576">576</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="577"><td class="num" id="LN577">577</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="578"><td class="num" id="LN578">578</td><td class="line"><span class='keyword'>void</span> StatefulMethodFamily::record_method_and_dq_further(StateRestorerScope* scope, Method* mo) {</td></tr>
<tr class="codeline" data-linenumber="579"><td class="num" id="LN579">579</td><td class="line">  scope-&gt;mark(<span class='keyword'>this</span>, _qualification_state);</td></tr>
<tr class="codeline" data-linenumber="580"><td class="num" id="LN580">580</td><td class="line">  _method_family.record_method(mo, _qualification_state);</td></tr>
<tr class="codeline" data-linenumber="581"><td class="num" id="LN581">581</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="582"><td class="num" id="LN582">582</td><td class="line">  <span class='comment'>// Everything found "above"??? this method in the hierarchy walk is set to</span></td></tr>
<tr class="codeline" data-linenumber="583"><td class="num" id="LN583">583</td><td class="line">  <span class='comment'>// disqualified</span></td></tr>
<tr class="codeline" data-linenumber="584"><td class="num" id="LN584">584</td><td class="line">  set_qualification_state(DISQUALIFIED);</td></tr>
<tr class="codeline" data-linenumber="585"><td class="num" id="LN585">585</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="586"><td class="num" id="LN586">586</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="587"><td class="num" id="LN587">587</td><td class="line"><span class='comment'>// Represents a location corresponding to a vtable slot for methods that</span></td></tr>
<tr class="codeline" data-linenumber="588"><td class="num" id="LN588">588</td><td class="line"><span class='comment'>// neither the class nor any of it's ancestors provide an implementaion.</span></td></tr>
<tr class="codeline" data-linenumber="589"><td class="num" id="LN589">589</td><td class="line"><span class='comment'>// Default methods may be present to fill this slot.</span></td></tr>
<tr class="codeline" data-linenumber="590"><td class="num" id="LN590">590</td><td class="line"><span class='keyword'>class</span> EmptyVtableSlot : <span class='keyword'>public</span> ResourceObj {</td></tr>
<tr class="codeline" data-linenumber="591"><td class="num" id="LN591">591</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="592"><td class="num" id="LN592">592</td><td class="line">  Symbol* _name;</td></tr>
<tr class="codeline" data-linenumber="593"><td class="num" id="LN593">593</td><td class="line">  Symbol* _signature;</td></tr>
<tr class="codeline" data-linenumber="594"><td class="num" id="LN594">594</td><td class="line">  <span class='keyword'>int</span> _size_of_parameters;</td></tr>
<tr class="codeline" data-linenumber="595"><td class="num" id="LN595">595</td><td class="line">  MethodFamily* _binding;</td></tr>
<tr class="codeline" data-linenumber="596"><td class="num" id="LN596">596</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="597"><td class="num" id="LN597">597</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="598"><td class="num" id="LN598">598</td><td class="line">  EmptyVtableSlot(Method* method)</td></tr>
<tr class="codeline" data-linenumber="599"><td class="num" id="LN599">599</td><td class="line">      : _name(method-&gt;name()), _signature(method-&gt;signature()),</td></tr>
<tr class="codeline" data-linenumber="600"><td class="num" id="LN600">600</td><td class="line">        _size_of_parameters(method-&gt;size_of_parameters()), _binding(<span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {}</td></tr>
<tr class="codeline" data-linenumber="601"><td class="num" id="LN601">601</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="602"><td class="num" id="LN602">602</td><td class="line">  Symbol* name() <span class='keyword'>const</span> { <span class='keyword'>return</span> _name; }</td></tr>
<tr class="codeline" data-linenumber="603"><td class="num" id="LN603">603</td><td class="line">  Symbol* signature() <span class='keyword'>const</span> { <span class='keyword'>return</span> _signature; }</td></tr>
<tr class="codeline" data-linenumber="604"><td class="num" id="LN604">604</td><td class="line">  <span class='keyword'>int</span> size_of_parameters() <span class='keyword'>const</span> { <span class='keyword'>return</span> _size_of_parameters; }</td></tr>
<tr class="codeline" data-linenumber="605"><td class="num" id="LN605">605</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="606"><td class="num" id="LN606">606</td><td class="line">  <span class='keyword'>void</span> bind_family(MethodFamily* lm) { _binding = lm; }</td></tr>
<tr class="codeline" data-linenumber="607"><td class="num" id="LN607">607</td><td class="line">  <span class='keyword'>bool</span> is_bound() { <span class='keyword'>return</span> _binding != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="608"><td class="num" id="LN608">608</td><td class="line">  MethodFamily* get_binding() { <span class='keyword'>return</span> _binding; }</td></tr>
<tr class="codeline" data-linenumber="609"><td class="num" id="LN609">609</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="610"><td class="num" id="LN610">610</td><td class="line">  <span class='keyword'>void</span> print_on(outputStream* str) <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="611"><td class="num" id="LN611">611</td><td class="line">    print_slot(str, name(), signature());</td></tr>
<tr class="codeline" data-linenumber="612"><td class="num" id="LN612">612</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="613"><td class="num" id="LN613">613</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="614"><td class="num" id="LN614">614</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="615"><td class="num" id="LN615">615</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>bool</span> already_in_vtable_slots(GrowableArray&lt;EmptyVtableSlot*&gt;* slots, Method* m) {</td></tr>
<tr class="codeline" data-linenumber="616"><td class="num" id="LN616">616</td><td class="line">  <span class='keyword'>bool</span> found = <span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="617"><td class="num" id="LN617">617</td><td class="line">  <span class='keyword'>for</span> (<span class='keyword'>int</span> j = 0; j &lt; slots-&gt;length(); ++j) {</td></tr>
<tr class="codeline" data-linenumber="618"><td class="num" id="LN618">618</td><td class="line">    <span class='keyword'>if</span> (slots-&gt;at(j)-&gt;name() == m-&gt;name() &amp;&amp;</td></tr>
<tr class="codeline" data-linenumber="619"><td class="num" id="LN619">619</td><td class="line">        slots-&gt;at(j)-&gt;signature() == m-&gt;signature() ) {</td></tr>
<tr class="codeline" data-linenumber="620"><td class="num" id="LN620">620</td><td class="line">      found = <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="621"><td class="num" id="LN621">621</td><td class="line">      <span class='keyword'>break</span>;</td></tr>
<tr class="codeline" data-linenumber="622"><td class="num" id="LN622">622</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="623"><td class="num" id="LN623">623</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="624"><td class="num" id="LN624">624</td><td class="line">  <span class='keyword'>return</span> found;</td></tr>
<tr class="codeline" data-linenumber="625"><td class="num" id="LN625">625</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="626"><td class="num" id="LN626">626</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="627"><td class="num" id="LN627">627</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>void</span> find_empty_vtable_slots(GrowableArray&lt;EmptyVtableSlot*&gt;* slots,</td></tr>
<tr class="codeline" data-linenumber="628"><td class="num" id="LN628">628</td><td class="line">    InstanceKlass* klass, <span class='keyword'>const</span> GrowableArray&lt;Method*&gt;* mirandas) {</td></tr>
<tr class="codeline" data-linenumber="629"><td class="num" id="LN629">629</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="630"><td class="num" id="LN630">630</td><td class="line">  <span class='macro'>assert(klass != NULL, <span class='string_literal'>"Must be valid class"</span>)<span class='macro_popup'>do { if (!(klass != __null)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 630, "assert(" "klass != __null" ") failed", "Must be valid class"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="631"><td class="num" id="LN631">631</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="632"><td class="num" id="LN632">632</td><td class="line">  <span class='comment'>// All miranda methods are obvious candidates</span></td></tr>
<tr class="codeline" data-linenumber="633"><td class="num" id="LN633">633</td><td class="line">  <span class='keyword'>for</span> (<span class='keyword'>int</span> i = 0; i &lt; mirandas-&gt;length(); ++i) {</td></tr>
<tr class="codeline" data-linenumber="634"><td class="num" id="LN634">634</td><td class="line">    Method* m = mirandas-&gt;at(i);</td></tr>
<tr class="codeline" data-linenumber="635"><td class="num" id="LN635">635</td><td class="line">    <span class='keyword'>if</span> (!already_in_vtable_slots(slots, m)) {</td></tr>
<tr class="codeline" data-linenumber="636"><td class="num" id="LN636">636</td><td class="line">      slots-&gt;append(<span class='keyword'>new</span> EmptyVtableSlot(m));</td></tr>
<tr class="codeline" data-linenumber="637"><td class="num" id="LN637">637</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="638"><td class="num" id="LN638">638</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="639"><td class="num" id="LN639">639</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="640"><td class="num" id="LN640">640</td><td class="line">  <span class='comment'>// Also any overpasses in our superclasses, that we haven't implemented.</span></td></tr>
<tr class="codeline" data-linenumber="641"><td class="num" id="LN641">641</td><td class="line">  <span class='comment'>// (can't use the vtable because it is not guaranteed to be initialized yet)</span></td></tr>
<tr class="codeline" data-linenumber="642"><td class="num" id="LN642">642</td><td class="line">  InstanceKlass* super = klass-&gt;java_super();</td></tr>
<tr class="codeline" data-linenumber="643"><td class="num" id="LN643">643</td><td class="line">  <span class='keyword'>while</span> (super != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="644"><td class="num" id="LN644">644</td><td class="line">    <span class='keyword'>for</span> (<span class='keyword'>int</span> i = 0; i &lt; super-&gt;methods()-&gt;length(); ++i) {</td></tr>
<tr class="codeline" data-linenumber="645"><td class="num" id="LN645">645</td><td class="line">      Method* m = super-&gt;methods()-&gt;at(i);</td></tr>
<tr class="codeline" data-linenumber="646"><td class="num" id="LN646">646</td><td class="line">      <span class='keyword'>if</span> (m-&gt;is_overpass() || m-&gt;is_static()) {</td></tr>
<tr class="codeline" data-linenumber="647"><td class="num" id="LN647">647</td><td class="line">        <span class='comment'>// m is a method that would have been a miranda if not for the</span></td></tr>
<tr class="codeline" data-linenumber="648"><td class="num" id="LN648">648</td><td class="line">        <span class='comment'>// default method processing that occurred on behalf of our superclass,</span></td></tr>
<tr class="codeline" data-linenumber="649"><td class="num" id="LN649">649</td><td class="line">        <span class='comment'>// so it's a method we want to re-examine in this new context.  That is,</span></td></tr>
<tr class="codeline" data-linenumber="650"><td class="num" id="LN650">650</td><td class="line">        <span class='comment'>// unless we have a real implementation of it in the current class.</span></td></tr>
<tr class="codeline" data-linenumber="651"><td class="num" id="LN651">651</td><td class="line">        <span class='keyword'>if</span> (!already_in_vtable_slots(slots, m)) {</td></tr>
<tr class="codeline" data-linenumber="652"><td class="num" id="LN652">652</td><td class="line">          Method *impl = klass-&gt;lookup_method(m-&gt;name(), m-&gt;signature());</td></tr>
<tr class="codeline" data-linenumber="653"><td class="num" id="LN653">653</td><td class="line">          <span class='keyword'>if</span> (impl == <span class='macro'>NULL<span class='macro_popup'>__null</span></span> || impl-&gt;is_overpass() || impl-&gt;is_static()) {</td></tr>
<tr class="codeline" data-linenumber="654"><td class="num" id="LN654">654</td><td class="line">            slots-&gt;append(<span class='keyword'>new</span> EmptyVtableSlot(m));</td></tr>
<tr class="codeline" data-linenumber="655"><td class="num" id="LN655">655</td><td class="line">          }</td></tr>
<tr class="codeline" data-linenumber="656"><td class="num" id="LN656">656</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="657"><td class="num" id="LN657">657</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="658"><td class="num" id="LN658">658</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="659"><td class="num" id="LN659">659</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="660"><td class="num" id="LN660">660</td><td class="line">    <span class='comment'>// also any default methods in our superclasses</span></td></tr>
<tr class="codeline" data-linenumber="661"><td class="num" id="LN661">661</td><td class="line">    <span class='keyword'>if</span> (super-&gt;default_methods() != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="662"><td class="num" id="LN662">662</td><td class="line">      <span class='keyword'>for</span> (<span class='keyword'>int</span> i = 0; i &lt; super-&gt;default_methods()-&gt;length(); ++i) {</td></tr>
<tr class="codeline" data-linenumber="663"><td class="num" id="LN663">663</td><td class="line">        Method* m = super-&gt;default_methods()-&gt;at(i);</td></tr>
<tr class="codeline" data-linenumber="664"><td class="num" id="LN664">664</td><td class="line">        <span class='comment'>// m is a method that would have been a miranda if not for the</span></td></tr>
<tr class="codeline" data-linenumber="665"><td class="num" id="LN665">665</td><td class="line">        <span class='comment'>// default method processing that occurred on behalf of our superclass,</span></td></tr>
<tr class="codeline" data-linenumber="666"><td class="num" id="LN666">666</td><td class="line">        <span class='comment'>// so it's a method we want to re-examine in this new context.  That is,</span></td></tr>
<tr class="codeline" data-linenumber="667"><td class="num" id="LN667">667</td><td class="line">        <span class='comment'>// unless we have a real implementation of it in the current class.</span></td></tr>
<tr class="codeline" data-linenumber="668"><td class="num" id="LN668">668</td><td class="line">        <span class='keyword'>if</span> (!already_in_vtable_slots(slots, m)) {</td></tr>
<tr class="codeline" data-linenumber="669"><td class="num" id="LN669">669</td><td class="line">          Method* impl = klass-&gt;lookup_method(m-&gt;name(), m-&gt;signature());</td></tr>
<tr class="codeline" data-linenumber="670"><td class="num" id="LN670">670</td><td class="line">          <span class='keyword'>if</span> (impl == <span class='macro'>NULL<span class='macro_popup'>__null</span></span> || impl-&gt;is_overpass() || impl-&gt;is_static()) {</td></tr>
<tr class="codeline" data-linenumber="671"><td class="num" id="LN671">671</td><td class="line">            slots-&gt;append(<span class='keyword'>new</span> EmptyVtableSlot(m));</td></tr>
<tr class="codeline" data-linenumber="672"><td class="num" id="LN672">672</td><td class="line">          }</td></tr>
<tr class="codeline" data-linenumber="673"><td class="num" id="LN673">673</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="674"><td class="num" id="LN674">674</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="675"><td class="num" id="LN675">675</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="676"><td class="num" id="LN676">676</td><td class="line">    super = super-&gt;java_super();</td></tr>
<tr class="codeline" data-linenumber="677"><td class="num" id="LN677">677</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="678"><td class="num" id="LN678">678</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="679"><td class="num" id="LN679">679</td><td class="line">  <span class='macro'>LogTarget(Debug, defaultmethods)<span class='macro_popup'>LogTargetImpl&lt;LogLevel::Debug, (LogTag::_defaultmethods), (<br>LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag<br>::__NO_TAG), (LogTag::__NO_TAG)&gt;</span></span> lt;</td></tr>
<tr class="codeline" data-linenumber="680"><td class="num" id="LN680">680</td><td class="line">  <span class='keyword'>if</span> (lt.is_enabled()) {</td></tr>
<tr class="codeline" data-linenumber="681"><td class="num" id="LN681">681</td><td class="line">    lt.print(<span class='string_literal'>"Slots that need filling:"</span>);</td></tr>
<tr class="codeline" data-linenumber="682"><td class="num" id="LN682">682</td><td class="line">    ResourceMark rm;</td></tr>
<tr class="codeline" data-linenumber="683"><td class="num" id="LN683">683</td><td class="line">    LogStream ls(lt);</td></tr>
<tr class="codeline" data-linenumber="684"><td class="num" id="LN684">684</td><td class="line">    streamIndentor si(&amp;ls);</td></tr>
<tr class="codeline" data-linenumber="685"><td class="num" id="LN685">685</td><td class="line">    <span class='keyword'>for</span> (<span class='keyword'>int</span> i = 0; i &lt; slots-&gt;length(); ++i) {</td></tr>
<tr class="codeline" data-linenumber="686"><td class="num" id="LN686">686</td><td class="line">      ls.indent();</td></tr>
<tr class="codeline" data-linenumber="687"><td class="num" id="LN687">687</td><td class="line">      slots-&gt;at(i)-&gt;print_on(&amp;ls);</td></tr>
<tr class="codeline" data-linenumber="688"><td class="num" id="LN688">688</td><td class="line">      ls.cr();</td></tr>
<tr class="codeline" data-linenumber="689"><td class="num" id="LN689">689</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="690"><td class="num" id="LN690">690</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="691"><td class="num" id="LN691">691</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="692"><td class="num" id="LN692">692</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="693"><td class="num" id="LN693">693</td><td class="line"><span class='comment'>// Iterates over the superinterface type hierarchy looking for all methods</span></td></tr>
<tr class="codeline" data-linenumber="694"><td class="num" id="LN694">694</td><td class="line"><span class='comment'>// with a specific erased signature.</span></td></tr>
<tr class="codeline" data-linenumber="695"><td class="num" id="LN695">695</td><td class="line"><span class='keyword'>class</span> FindMethodsByErasedSig : <span class='keyword'>public</span> HierarchyVisitor&lt;FindMethodsByErasedSig&gt; {</td></tr>
<tr class="codeline" data-linenumber="696"><td class="num" id="LN696">696</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="697"><td class="num" id="LN697">697</td><td class="line">  <span class='comment'>// Context data</span></td></tr>
<tr class="codeline" data-linenumber="698"><td class="num" id="LN698">698</td><td class="line">  Symbol* _method_name;</td></tr>
<tr class="codeline" data-linenumber="699"><td class="num" id="LN699">699</td><td class="line">  Symbol* _method_signature;</td></tr>
<tr class="codeline" data-linenumber="700"><td class="num" id="LN700">700</td><td class="line">  StatefulMethodFamily*  _family;</td></tr>
<tr class="codeline" data-linenumber="701"><td class="num" id="LN701">701</td><td class="line">  <span class='keyword'>bool</span> _cur_class_is_interface;</td></tr>
<tr class="codeline" data-linenumber="702"><td class="num" id="LN702">702</td><td class="line">  <span class='comment'>// Free lists, used as an optimization</span></td></tr>
<tr class="codeline" data-linenumber="703"><td class="num" id="LN703">703</td><td class="line">  GrowableArray&lt;StateRestorerScope*&gt; _free_scopes;</td></tr>
<tr class="codeline" data-linenumber="704"><td class="num" id="LN704">704</td><td class="line">  GrowableArray&lt;StateRestorer*&gt; _free_restorers;</td></tr>
<tr class="codeline" data-linenumber="705"><td class="num" id="LN705">705</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="706"><td class="num" id="LN706">706</td><td class="line">  FindMethodsByErasedSig() : _free_scopes(6), _free_restorers(6) {};</td></tr>
<tr class="codeline" data-linenumber="707"><td class="num" id="LN707">707</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="708"><td class="num" id="LN708">708</td><td class="line">  <span class='keyword'>void</span> prepare(Symbol* name, Symbol* signature, <span class='keyword'>bool</span> is_interf) {</td></tr>
<tr class="codeline" data-linenumber="709"><td class="num" id="LN709">709</td><td class="line">    reset();</td></tr>
<tr class="codeline" data-linenumber="710"><td class="num" id="LN710">710</td><td class="line">    _method_name = name;</td></tr>
<tr class="codeline" data-linenumber="711"><td class="num" id="LN711">711</td><td class="line">    _method_signature = signature;</td></tr>
<tr class="codeline" data-linenumber="712"><td class="num" id="LN712">712</td><td class="line">    _family = <span class='macro'>NULL<span class='macro_popup'>__null</span></span>;</td></tr>
<tr class="codeline" data-linenumber="713"><td class="num" id="LN713">713</td><td class="line">    _cur_class_is_interface = is_interf;</td></tr>
<tr class="codeline" data-linenumber="714"><td class="num" id="LN714">714</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="715"><td class="num" id="LN715">715</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="716"><td class="num" id="LN716">716</td><td class="line">  <span class='keyword'>void</span> get_discovered_family(MethodFamily** family) {</td></tr>
<tr class="codeline" data-linenumber="717"><td class="num" id="LN717">717</td><td class="line">      <span class='keyword'>if</span> (_family != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="718"><td class="num" id="LN718">718</td><td class="line">        *family = _family-&gt;get_method_family();</td></tr>
<tr class="codeline" data-linenumber="719"><td class="num" id="LN719">719</td><td class="line">      } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="720"><td class="num" id="LN720">720</td><td class="line">        *family = <span class='macro'>NULL<span class='macro_popup'>__null</span></span>;</td></tr>
<tr class="codeline" data-linenumber="721"><td class="num" id="LN721">721</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="722"><td class="num" id="LN722">722</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="723"><td class="num" id="LN723">723</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="724"><td class="num" id="LN724">724</td><td class="line">  <span class='keyword'>void</span>* new_node_data() {</td></tr>
<tr class="codeline" data-linenumber="725"><td class="num" id="LN725">725</td><td class="line">    <span class='keyword'>if</span> (!_free_scopes.is_empty()) {</td></tr>
<tr class="codeline" data-linenumber="726"><td class="num" id="LN726">726</td><td class="line">      StateRestorerScope* free_scope = _free_scopes.pop();</td></tr>
<tr class="codeline" data-linenumber="727"><td class="num" id="LN727">727</td><td class="line">      <span class='macro'>assert(free_scope-&gt;is_empty(), <span class='string_literal'>"StateRestorerScope::_marks array not empty"</span>)<span class='macro_popup'>do { if (!(free_scope-&gt;is_empty())) { (*g_assert_poison) =<br> 'X';; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 727, "assert(" "free_scope-&gt;is_empty()" ") failed", "StateRestorerScope::_marks array not empty"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="728"><td class="num" id="LN728">728</td><td class="line">      <span class='keyword'>return</span> free_scope;</td></tr>
<tr class="codeline" data-linenumber="729"><td class="num" id="LN729">729</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="730"><td class="num" id="LN730">730</td><td class="line">    <span class='keyword'>return</span> <span class='keyword'>new</span> StateRestorerScope(&amp;_free_restorers);</td></tr>
<tr class="codeline" data-linenumber="731"><td class="num" id="LN731">731</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="732"><td class="num" id="LN732">732</td><td class="line">  <span class='keyword'>void</span> free_node_data(<span class='keyword'>void</span>* node_data) {</td></tr>
<tr class="codeline" data-linenumber="733"><td class="num" id="LN733">733</td><td class="line">    StateRestorerScope* scope =  StateRestorerScope::cast(node_data);</td></tr>
<tr class="codeline" data-linenumber="734"><td class="num" id="LN734">734</td><td class="line">    scope-&gt;restore_state();</td></tr>
<tr class="codeline" data-linenumber="735"><td class="num" id="LN735">735</td><td class="line">    <span class='comment'>// Reuse scopes</span></td></tr>
<tr class="codeline" data-linenumber="736"><td class="num" id="LN736">736</td><td class="line">    _free_scopes.push(scope);</td></tr>
<tr class="codeline" data-linenumber="737"><td class="num" id="LN737">737</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="738"><td class="num" id="LN738">738</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="739"><td class="num" id="LN739">739</td><td class="line">  <span class='comment'>// Find all methods on this hierarchy that match this</span></td></tr>
<tr class="codeline" data-linenumber="740"><td class="num" id="LN740">740</td><td class="line">  <span class='comment'>// method's erased (name, signature)</span></td></tr>
<tr class="codeline" data-linenumber="741"><td class="num" id="LN741">741</td><td class="line">  <span class='keyword'>bool</span> visit() {</td></tr>
<tr class="codeline" data-linenumber="742"><td class="num" id="LN742">742</td><td class="line">    StateRestorerScope* scope = StateRestorerScope::cast(current_data());</td></tr>
<tr class="codeline" data-linenumber="743"><td class="num" id="LN743">743</td><td class="line">    InstanceKlass* iklass = current_class();</td></tr>
<tr class="codeline" data-linenumber="744"><td class="num" id="LN744">744</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="745"><td class="num" id="LN745">745</td><td class="line">    Method* m = iklass-&gt;find_method(_method_name, _method_signature);</td></tr>
<tr class="codeline" data-linenumber="746"><td class="num" id="LN746">746</td><td class="line">    <span class='comment'>// Private interface methods are not candidates for default methods.</span></td></tr>
<tr class="codeline" data-linenumber="747"><td class="num" id="LN747">747</td><td class="line">    <span class='comment'>// invokespecial to private interface methods doesn't use default method logic.</span></td></tr>
<tr class="codeline" data-linenumber="748"><td class="num" id="LN748">748</td><td class="line">    <span class='comment'>// Private class methods are not candidates for default methods.</span></td></tr>
<tr class="codeline" data-linenumber="749"><td class="num" id="LN749">749</td><td class="line">    <span class='comment'>// Private methods do not override default methods, so need to perform</span></td></tr>
<tr class="codeline" data-linenumber="750"><td class="num" id="LN750">750</td><td class="line">    <span class='comment'>// default method inheritance without including private methods.</span></td></tr>
<tr class="codeline" data-linenumber="751"><td class="num" id="LN751">751</td><td class="line">    <span class='comment'>// The overpasses are your supertypes' errors, we do not include them.</span></td></tr>
<tr class="codeline" data-linenumber="752"><td class="num" id="LN752">752</td><td class="line">    <span class='comment'>// Non-public methods in java.lang.Object are not candidates for default</span></td></tr>
<tr class="codeline" data-linenumber="753"><td class="num" id="LN753">753</td><td class="line">    <span class='comment'>// methods.</span></td></tr>
<tr class="codeline" data-linenumber="754"><td class="num" id="LN754">754</td><td class="line">    <span class='comment'>// Future: take access controls into account for superclass methods</span></td></tr>
<tr class="codeline" data-linenumber="755"><td class="num" id="LN755">755</td><td class="line">    <span class='keyword'>if</span> (m != <span class='macro'>NULL<span class='macro_popup'>__null</span></span> &amp;&amp; !m-&gt;is_static() &amp;&amp; !m-&gt;is_overpass() &amp;&amp; !m-&gt;is_private() &amp;&amp;</td></tr>
<tr class="codeline" data-linenumber="756"><td class="num" id="LN756">756</td><td class="line">     (!_cur_class_is_interface || !SystemDictionary::is_nonpublic_Object_method(m))) {</td></tr>
<tr class="codeline" data-linenumber="757"><td class="num" id="LN757">757</td><td class="line">      <span class='keyword'>if</span> (_family == <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="758"><td class="num" id="LN758">758</td><td class="line">        _family = <span class='keyword'>new</span> StatefulMethodFamily();</td></tr>
<tr class="codeline" data-linenumber="759"><td class="num" id="LN759">759</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="760"><td class="num" id="LN760">760</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="761"><td class="num" id="LN761">761</td><td class="line">      <span class='keyword'>if</span> (iklass-&gt;is_interface()) {</td></tr>
<tr class="codeline" data-linenumber="762"><td class="num" id="LN762">762</td><td class="line">        _family-&gt;record_method_and_dq_further(scope, m);</td></tr>
<tr class="codeline" data-linenumber="763"><td class="num" id="LN763">763</td><td class="line">      } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="764"><td class="num" id="LN764">764</td><td class="line">        <span class='comment'>// This is the rule that methods in classes "win" (bad word) over</span></td></tr>
<tr class="codeline" data-linenumber="765"><td class="num" id="LN765">765</td><td class="line">        <span class='comment'>// methods in interfaces. This works because of single inheritance.</span></td></tr>
<tr class="codeline" data-linenumber="766"><td class="num" id="LN766">766</td><td class="line">        <span class='comment'>// Private methods in classes do not "win", they will be found</span></td></tr>
<tr class="codeline" data-linenumber="767"><td class="num" id="LN767">767</td><td class="line">        <span class='comment'>// first on searching, but overriding for invokevirtual needs</span></td></tr>
<tr class="codeline" data-linenumber="768"><td class="num" id="LN768">768</td><td class="line">        <span class='comment'>// to find default method candidates for the same signature</span></td></tr>
<tr class="codeline" data-linenumber="769"><td class="num" id="LN769">769</td><td class="line">        _family-&gt;set_target_if_empty(m);</td></tr>
<tr class="codeline" data-linenumber="770"><td class="num" id="LN770">770</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="771"><td class="num" id="LN771">771</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="772"><td class="num" id="LN772">772</td><td class="line">    <span class='keyword'>return</span> <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="773"><td class="num" id="LN773">773</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="774"><td class="num" id="LN774">774</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="775"><td class="num" id="LN775">775</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="776"><td class="num" id="LN776">776</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="777"><td class="num" id="LN777">777</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="778"><td class="num" id="LN778">778</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="779"><td class="num" id="LN779">779</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>void</span> create_defaults_and_exceptions(</td></tr>
<tr class="codeline" data-linenumber="780"><td class="num" id="LN780">780</td><td class="line">    GrowableArray&lt;EmptyVtableSlot*&gt;* slots, InstanceKlass* klass, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="781"><td class="num" id="LN781">781</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="782"><td class="num" id="LN782">782</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>void</span> generate_erased_defaults(</td></tr>
<tr class="codeline" data-linenumber="783"><td class="num" id="LN783">783</td><td class="line">    FindMethodsByErasedSig* visitor,</td></tr>
<tr class="codeline" data-linenumber="784"><td class="num" id="LN784">784</td><td class="line">    InstanceKlass* klass, EmptyVtableSlot* slot, <span class='keyword'>bool</span> is_intf) {</td></tr>
<tr class="codeline" data-linenumber="785"><td class="num" id="LN785">785</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="786"><td class="num" id="LN786">786</td><td class="line">  <span class='comment'>// the visitor needs to be initialized or re-initialized before use</span></td></tr>
<tr class="codeline" data-linenumber="787"><td class="num" id="LN787">787</td><td class="line">  <span class='comment'>// - this facilitates reusing the same visitor instance on multiple</span></td></tr>
<tr class="codeline" data-linenumber="788"><td class="num" id="LN788">788</td><td class="line">  <span class='comment'>// generation passes as an optimization</span></td></tr>
<tr class="codeline" data-linenumber="789"><td class="num" id="LN789">789</td><td class="line">  visitor-&gt;prepare(slot-&gt;name(), slot-&gt;signature(), is_intf);</td></tr>
<tr class="codeline" data-linenumber="790"><td class="num" id="LN790">790</td><td class="line">  <span class='comment'>// sets up a set of methods with the same exact erased signature</span></td></tr>
<tr class="codeline" data-linenumber="791"><td class="num" id="LN791">791</td><td class="line">  visitor-&gt;run(klass);</td></tr>
<tr class="codeline" data-linenumber="792"><td class="num" id="LN792">792</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="793"><td class="num" id="LN793">793</td><td class="line">  MethodFamily* family;</td></tr>
<tr class="codeline" data-linenumber="794"><td class="num" id="LN794">794</td><td class="line">  visitor-&gt;get_discovered_family(&amp;family);</td></tr>
<tr class="codeline" data-linenumber="795"><td class="num" id="LN795">795</td><td class="line">  <span class='keyword'>if</span> (family != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="796"><td class="num" id="LN796">796</td><td class="line">    family-&gt;determine_target_or_set_exception_message(klass);</td></tr>
<tr class="codeline" data-linenumber="797"><td class="num" id="LN797">797</td><td class="line">    slot-&gt;bind_family(family);</td></tr>
<tr class="codeline" data-linenumber="798"><td class="num" id="LN798">798</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="799"><td class="num" id="LN799">799</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="800"><td class="num" id="LN800">800</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="801"><td class="num" id="LN801">801</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>void</span> merge_in_new_methods(InstanceKlass* klass,</td></tr>
<tr class="codeline" data-linenumber="802"><td class="num" id="LN802">802</td><td class="line">    GrowableArray&lt;Method*&gt;* new_methods, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="803"><td class="num" id="LN803">803</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>void</span> create_default_methods( InstanceKlass* klass,</td></tr>
<tr class="codeline" data-linenumber="804"><td class="num" id="LN804">804</td><td class="line">    GrowableArray&lt;Method*&gt;* new_methods, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="805"><td class="num" id="LN805">805</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="806"><td class="num" id="LN806">806</td><td class="line"><span class='comment'>// This is the guts of the default methods implementation.  This is called just</span></td></tr>
<tr class="codeline" data-linenumber="807"><td class="num" id="LN807">807</td><td class="line"><span class='comment'>// after the classfile has been parsed if some ancestor has default methods.</span></td></tr>
<tr class="codeline" data-linenumber="808"><td class="num" id="LN808">808</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="809"><td class="num" id="LN809">809</td><td class="line"><span class='comment'>// First it finds any name/signature slots that need any implementation (either</span></td></tr>
<tr class="codeline" data-linenumber="810"><td class="num" id="LN810">810</td><td class="line"><span class='comment'>// because they are miranda or a superclass's implementation is an overpass</span></td></tr>
<tr class="codeline" data-linenumber="811"><td class="num" id="LN811">811</td><td class="line"><span class='comment'>// itself).  For each slot, iterate over the hierarchy, to see if they contain a</span></td></tr>
<tr class="codeline" data-linenumber="812"><td class="num" id="LN812">812</td><td class="line"><span class='comment'>// signature that matches the slot we are looking at.</span></td></tr>
<tr class="codeline" data-linenumber="813"><td class="num" id="LN813">813</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="814"><td class="num" id="LN814">814</td><td class="line"><span class='comment'>// For each slot filled, we either record the default method candidate in the</span></td></tr>
<tr class="codeline" data-linenumber="815"><td class="num" id="LN815">815</td><td class="line"><span class='comment'>// klass default_methods list or, only to handle exception cases, we create an</span></td></tr>
<tr class="codeline" data-linenumber="816"><td class="num" id="LN816">816</td><td class="line"><span class='comment'>// overpass method that throws an exception and add it to the klass methods list.</span></td></tr>
<tr class="codeline" data-linenumber="817"><td class="num" id="LN817">817</td><td class="line"><span class='comment'>// The JVM does not create bridges nor handle generic signatures here.</span></td></tr>
<tr class="codeline" data-linenumber="818"><td class="num" id="LN818">818</td><td class="line"><span class='keyword'>void</span> DefaultMethods::generate_default_methods(</td></tr>
<tr class="codeline" data-linenumber="819"><td class="num" id="LN819">819</td><td class="line">    InstanceKlass* klass, <span class='keyword'>const</span> GrowableArray&lt;Method*&gt;* mirandas, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="820"><td class="num" id="LN820">820</td><td class="line">  <span class="mrange"><span class='macro'>assert</span>(klass != NULL, <span class='string_literal'>"invariant"</span>)<span class='macro_popup'>do { if (!(klass != __null)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 820, "assert(" "klass != __null" ") failed", "invariant"); ::<br>breakpoint(); } } while (0)</span></span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path1" class="msg msgEvent" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">1</div></td><td>Assuming the condition is true</td><td><div class="PathNav"><a href="#Path2" title="Next event (2)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path2" class="msg msgControl" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">2</div></td><td><div class="PathNav"><a href="#Path1" title="Previous event (1)">&#x2190;</a></div></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path3" title="Next event (3)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path3" class="msg msgControl" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">3</div></td><td><div class="PathNav"><a href="#Path2" title="Previous event (2)">&#x2190;</a></div></td><td>Loop condition is false.  Exiting loop</td><td><div class="PathNav"><a href="#Path4" title="Next event (4)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="821"><td class="num" id="LN821">821</td><td class="line">  <span class="mrange"><span class='macro'>assert</span>(klass != vmClasses::Object_klass(), <span class='string_literal'>"Shouldn't be called for Object"</span>)<span class='macro_popup'>do { if (!(klass != vmClasses::Object_klass())) { (*g_assert_poison<br>) = 'X';; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 821, "assert(" "klass != vmClasses::Object_klass()" ") failed"<br>, "Shouldn't be called for Object"); ::breakpoint(); } } while<br> (0)</span></span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path4" class="msg msgEvent" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">4</div></td><td><div class="PathNav"><a href="#Path3" title="Previous event (3)">&#x2190;</a></div></td><td>Assuming the condition is true</td><td><div class="PathNav"><a href="#Path5" title="Next event (5)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path5" class="msg msgControl" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">5</div></td><td><div class="PathNav"><a href="#Path4" title="Previous event (4)">&#x2190;</a></div></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path6" title="Next event (6)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path6" class="msg msgControl" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">6</div></td><td><div class="PathNav"><a href="#Path5" title="Previous event (5)">&#x2190;</a></div></td><td>Loop condition is false.  Exiting loop</td><td><div class="PathNav"><a href="#Path7" title="Next event (7)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="822"><td class="num" id="LN822">822</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="823"><td class="num" id="LN823">823</td><td class="line">  <span class='comment'>// This resource mark is the bound for all memory allocation that takes</span></td></tr>
<tr class="codeline" data-linenumber="824"><td class="num" id="LN824">824</td><td class="line">  <span class='comment'>// place during default method processing.  After this goes out of scope,</span></td></tr>
<tr class="codeline" data-linenumber="825"><td class="num" id="LN825">825</td><td class="line">  <span class='comment'>// all (Resource) objects' memory will be reclaimed.  Be careful if adding an</span></td></tr>
<tr class="codeline" data-linenumber="826"><td class="num" id="LN826">826</td><td class="line">  <span class='comment'>// embedded resource mark under here as that memory can't be used outside</span></td></tr>
<tr class="codeline" data-linenumber="827"><td class="num" id="LN827">827</td><td class="line">  <span class='comment'>// whatever scope it's in.</span></td></tr>
<tr class="codeline" data-linenumber="828"><td class="num" id="LN828">828</td><td class="line">  ResourceMark rm(<span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="829"><td class="num" id="LN829">829</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="830"><td class="num" id="LN830">830</td><td class="line">  <span class='comment'>// Keep entire hierarchy alive for the duration of the computation</span></td></tr>
<tr class="codeline" data-linenumber="831"><td class="num" id="LN831">831</td><td class="line">  constantPoolHandle cp(<span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>, klass-&gt;constants());</td></tr>
<tr class="codeline" data-linenumber="832"><td class="num" id="LN832">832</td><td class="line">  KeepAliveRegistrar keepAlive(<span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="833"><td class="num" id="LN833">833</td><td class="line">  KeepAliveVisitor loadKeepAlive(&amp;keepAlive);</td></tr>
<tr class="codeline" data-linenumber="834"><td class="num" id="LN834">834</td><td class="line">  loadKeepAlive.run(klass);</td></tr>
<tr class="codeline" data-linenumber="835"><td class="num" id="LN835">835</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="836"><td class="num" id="LN836">836</td><td class="line">  <span class='macro'>LogTarget(Debug, defaultmethods)<span class='macro_popup'>LogTargetImpl&lt;LogLevel::Debug, (LogTag::_defaultmethods), (<br>LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag<br>::__NO_TAG), (LogTag::__NO_TAG)&gt;</span></span> lt;</td></tr>
<tr class="codeline" data-linenumber="837"><td class="num" id="LN837">837</td><td class="line">  <span class='keyword'>if</span> (<span class="mrange">lt.is_enabled()</span>) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path7" class="msg msgEvent" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">7</div></td><td><div class="PathNav"><a href="#Path6" title="Previous event (6)">&#x2190;</a></div></td><td>Assuming the condition is false</td><td><div class="PathNav"><a href="#Path8" title="Next event (8)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path8" class="msg msgControl" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">8</div></td><td><div class="PathNav"><a href="#Path7" title="Previous event (7)">&#x2190;</a></div></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path9" title="Next event (9)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="838"><td class="num" id="LN838">838</td><td class="line">    ResourceMark rm(<span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="839"><td class="num" id="LN839">839</td><td class="line">    lt.print(<span class='string_literal'>"%s %s requires default method processing"</span>,</td></tr>
<tr class="codeline" data-linenumber="840"><td class="num" id="LN840">840</td><td class="line">             klass-&gt;is_interface() ? <span class='string_literal'>"Interface"</span> : <span class='string_literal'>"Class"</span>,</td></tr>
<tr class="codeline" data-linenumber="841"><td class="num" id="LN841">841</td><td class="line">             klass-&gt;name()-&gt;as_klass_external_name());</td></tr>
<tr class="codeline" data-linenumber="842"><td class="num" id="LN842">842</td><td class="line">    LogStream ls(lt);</td></tr>
<tr class="codeline" data-linenumber="843"><td class="num" id="LN843">843</td><td class="line">    PrintHierarchy printer(&amp;ls);</td></tr>
<tr class="codeline" data-linenumber="844"><td class="num" id="LN844">844</td><td class="line">    printer.run(klass);</td></tr>
<tr class="codeline" data-linenumber="845"><td class="num" id="LN845">845</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="846"><td class="num" id="LN846">846</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="847"><td class="num" id="LN847">847</td><td class="line">  GrowableArray&lt;EmptyVtableSlot*&gt; empty_slots;</td></tr>
<tr class="codeline" data-linenumber="848"><td class="num" id="LN848">848</td><td class="line">  find_empty_vtable_slots(&amp;empty_slots, klass, mirandas);</td></tr>
<tr class="codeline" data-linenumber="849"><td class="num" id="LN849">849</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="850"><td class="num" id="LN850">850</td><td class="line">  <span class='keyword'>if</span> (<span class="mrange">empty_slots.length() &gt; 0</span>) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path9" class="msg msgEvent" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">9</div></td><td><div class="PathNav"><a href="#Path8" title="Previous event (8)">&#x2190;</a></div></td><td>Assuming the condition is true</td><td><div class="PathNav"><a href="#Path10" title="Next event (10)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path10" class="msg msgControl" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">10</div></td><td><div class="PathNav"><a href="#Path9" title="Previous event (9)">&#x2190;</a></div></td><td>Taking true branch</td><td><div class="PathNav"><a href="#Path11" title="Next event (11)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="851"><td class="num" id="LN851">851</td><td class="line">    FindMethodsByErasedSig findMethodsByErasedSig;</td></tr>
<tr class="codeline" data-linenumber="852"><td class="num" id="LN852">852</td><td class="line">    <span class='keyword'>for</span> (<span class='keyword'>int</span> i = 0; <span class="mrange">i &lt; empty_slots.length()</span>; ++i) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path11" class="msg msgControl" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">11</div></td><td><div class="PathNav"><a href="#Path10" title="Previous event (10)">&#x2190;</a></div></td><td>Loop condition is true.  Entering loop body</td><td><div class="PathNav"><a href="#Path12" title="Next event (12)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path14" class="msg msgEvent" style="margin-left:21ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">14</div></td><td><div class="PathNav"><a href="#Path13" title="Previous event (13)">&#x2190;</a></div></td><td>Assuming the condition is false</td><td><div class="PathNav"><a href="#Path15" title="Next event (15)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path15" class="msg msgControl" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">15</div></td><td><div class="PathNav"><a href="#Path14" title="Previous event (14)">&#x2190;</a></div></td><td>Loop condition is false. Execution continues on line 864</td><td><div class="PathNav"><a href="#Path16" title="Next event (16)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="853"><td class="num" id="LN853">853</td><td class="line">      EmptyVtableSlot* slot = empty_slots.at(i);</td></tr>
<tr class="codeline" data-linenumber="854"><td class="num" id="LN854">854</td><td class="line">      <span class='macro'>LogTarget(Debug, defaultmethods)<span class='macro_popup'>LogTargetImpl&lt;LogLevel::Debug, (LogTag::_defaultmethods), (<br>LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag<br>::__NO_TAG), (LogTag::__NO_TAG)&gt;</span></span> lt;</td></tr>
<tr class="codeline" data-linenumber="855"><td class="num" id="LN855">855</td><td class="line">      <span class='keyword'>if</span> (<span class="mrange">lt.is_enabled()</span>) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path12" class="msg msgEvent" style="margin-left:11ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">12</div></td><td><div class="PathNav"><a href="#Path11" title="Previous event (11)">&#x2190;</a></div></td><td>Assuming the condition is false</td><td><div class="PathNav"><a href="#Path13" title="Next event (13)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path13" class="msg msgControl" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">13</div></td><td><div class="PathNav"><a href="#Path12" title="Previous event (12)">&#x2190;</a></div></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path14" title="Next event (14)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="856"><td class="num" id="LN856">856</td><td class="line">        LogStream ls(lt);</td></tr>
<tr class="codeline" data-linenumber="857"><td class="num" id="LN857">857</td><td class="line">        streamIndentor si(&amp;ls, 2);</td></tr>
<tr class="codeline" data-linenumber="858"><td class="num" id="LN858">858</td><td class="line">        ls.indent().print(<span class='string_literal'>"Looking for default methods for slot "</span>);</td></tr>
<tr class="codeline" data-linenumber="859"><td class="num" id="LN859">859</td><td class="line">        slot-&gt;print_on(&amp;ls);</td></tr>
<tr class="codeline" data-linenumber="860"><td class="num" id="LN860">860</td><td class="line">        ls.cr();</td></tr>
<tr class="codeline" data-linenumber="861"><td class="num" id="LN861">861</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="862"><td class="num" id="LN862">862</td><td class="line">      generate_erased_defaults(&amp;findMethodsByErasedSig, klass, slot, klass-&gt;is_interface());</td></tr>
<tr class="codeline" data-linenumber="863"><td class="num" id="LN863">863</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="864"><td class="num" id="LN864">864</td><td class="line">    <span class="mrange"><span class='macro'>log_debug</span>(defaultmethods)<span class='macro_popup'>(!(LogImpl&lt;(LogTag::_defaultmethods), (LogTag::__NO_TAG), (<br>LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag<br>::__NO_TAG)&gt;::is_level(LogLevel::Debug))) ? (void)0 : LogImpl<br>&lt;(LogTag::_defaultmethods), (LogTag::__NO_TAG), (LogTag::__NO_TAG<br>), (LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag::__NO_TAG)<br>&gt;::write&lt;LogLevel::Debug&gt;</span></span>(<span class='string_literal'>"Creating defaults and overpasses..."</span>);</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path16" class="msg msgEvent" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">16</div></td><td><div class="PathNav"><a href="#Path15" title="Previous event (15)">&#x2190;</a></div></td><td>Assuming the condition is true</td><td><div class="PathNav"><a href="#Path17" title="Next event (17)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path17" class="msg msgControl" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">17</div></td><td><div class="PathNav"><a href="#Path16" title="Previous event (16)">&#x2190;</a></div></td><td>'?' condition is true</td><td><div class="PathNav"><a href="#Path18" title="Next event (18)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="865"><td class="num" id="LN865">865</td><td class="line">    <span class="mrange">create_defaults_and_exceptions(&amp;empty_slots, klass, <span class='macro'>CHECK<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return ; (void)(0</span></span></span>);</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path18" class="msg msgEvent" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">18</div></td><td><div class="PathNav"><a href="#Path17" title="Previous event (17)">&#x2190;</a></div></td><td>Calling 'create_defaults_and_exceptions'</td><td><div class="PathNav"><a href="#Path19" title="Next event (19)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="866"><td class="num" id="LN866">866</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="867"><td class="num" id="LN867">867</td><td class="line">  <span class='macro'>log_debug(defaultmethods)<span class='macro_popup'>(!(LogImpl&lt;(LogTag::_defaultmethods), (LogTag::__NO_TAG), (<br>LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag<br>::__NO_TAG)&gt;::is_level(LogLevel::Debug))) ? (void)0 : LogImpl<br>&lt;(LogTag::_defaultmethods), (LogTag::__NO_TAG), (LogTag::__NO_TAG<br>), (LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag::__NO_TAG)<br>&gt;::write&lt;LogLevel::Debug&gt;</span></span>(<span class='string_literal'>"Default method processing complete"</span>);</td></tr>
<tr class="codeline" data-linenumber="868"><td class="num" id="LN868">868</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="869"><td class="num" id="LN869">869</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="870"><td class="num" id="LN870">870</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>int</span> assemble_method_error(</td></tr>
<tr class="codeline" data-linenumber="871"><td class="num" id="LN871">871</td><td class="line">    BytecodeConstantPool* cp, BytecodeBuffer* buffer, Symbol* errorName, Symbol* message) {</td></tr>
<tr class="codeline" data-linenumber="872"><td class="num" id="LN872">872</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="873"><td class="num" id="LN873">873</td><td class="line">  Symbol* init = vmSymbols::object_initializer_name();</td></tr>
<tr class="codeline" data-linenumber="874"><td class="num" id="LN874">874</td><td class="line">  Symbol* sig = vmSymbols::string_void_signature();</td></tr>
<tr class="codeline" data-linenumber="875"><td class="num" id="LN875">875</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="876"><td class="num" id="LN876">876</td><td class="line">  BytecodeAssembler assem(buffer, cp);</td></tr>
<tr class="codeline" data-linenumber="877"><td class="num" id="LN877">877</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="878"><td class="num" id="LN878">878</td><td class="line">  assem._new(errorName);</td></tr>
<tr class="codeline" data-linenumber="879"><td class="num" id="LN879">879</td><td class="line">  assem.dup();</td></tr>
<tr class="codeline" data-linenumber="880"><td class="num" id="LN880">880</td><td class="line">  assem.load_string(message);</td></tr>
<tr class="codeline" data-linenumber="881"><td class="num" id="LN881">881</td><td class="line">  assem.invokespecial(errorName, init, sig);</td></tr>
<tr class="codeline" data-linenumber="882"><td class="num" id="LN882">882</td><td class="line">  assem.athrow();</td></tr>
<tr class="codeline" data-linenumber="883"><td class="num" id="LN883">883</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="884"><td class="num" id="LN884">884</td><td class="line">  <span class='keyword'>return</span> 3; <span class='comment'>// max stack size: [ exception, exception, string ]</span></td></tr>
<tr class="codeline" data-linenumber="885"><td class="num" id="LN885">885</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="886"><td class="num" id="LN886">886</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="887"><td class="num" id="LN887">887</td><td class="line"><span class='keyword'>static</span> Method* new_method(</td></tr>
<tr class="codeline" data-linenumber="888"><td class="num" id="LN888">888</td><td class="line">    BytecodeConstantPool* cp, BytecodeBuffer* bytecodes, Symbol* name,</td></tr>
<tr class="codeline" data-linenumber="889"><td class="num" id="LN889">889</td><td class="line">    Symbol* sig, AccessFlags flags, <span class='keyword'>int</span> max_stack, <span class='keyword'>int</span> params,</td></tr>
<tr class="codeline" data-linenumber="890"><td class="num" id="LN890">890</td><td class="line">    ConstMethod::MethodType mt, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="891"><td class="num" id="LN891">891</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="892"><td class="num" id="LN892">892</td><td class="line">  <span class="mrange">address code_start</span> = 0;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path28" class="msg msgEvent" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">28</div></td><td><div class="PathNav"><a href="#Path27" title="Previous event (27)">&#x2190;</a></div></td><td>'code_start' initialized to a null pointer value</td><td><div class="PathNav"><a href="#Path29" title="Next event (29)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="893"><td class="num" id="LN893">893</td><td class="line">  <span class='keyword'>int</span> code_length = 0;</td></tr>
<tr class="codeline" data-linenumber="894"><td class="num" id="LN894">894</td><td class="line">  InlineTableSizes sizes;</td></tr>
<tr class="codeline" data-linenumber="895"><td class="num" id="LN895">895</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="896"><td class="num" id="LN896">896</td><td class="line">  <span class='keyword'>if</span> (<span class="mrange">bytecodes != <span class='macro'>NULL<span class='macro_popup'>__null</span></span></span> &amp;&amp; bytecodes-&gt;length() &gt; 0) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path29" class="msg msgEvent" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">29</div></td><td><div class="PathNav"><a href="#Path28" title="Previous event (28)">&#x2190;</a></div></td><td>Assuming 'bytecodes' is equal to NULL</td><td><div class="PathNav"><a href="#Path30" title="Next event (30)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="897"><td class="num" id="LN897">897</td><td class="line">    code_start = <span class='keyword'>static_cast</span>&lt;address&gt;(bytecodes-&gt;adr_at(0));</td></tr>
<tr class="codeline" data-linenumber="898"><td class="num" id="LN898">898</td><td class="line">    code_length = bytecodes-&gt;length();</td></tr>
<tr class="codeline" data-linenumber="899"><td class="num" id="LN899">899</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="900"><td class="num" id="LN900">900</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="901"><td class="num" id="LN901">901</td><td class="line">  Method* m = Method::allocate(cp-&gt;pool_holder()-&gt;class_loader_data(),</td></tr>
<tr class="codeline" data-linenumber="902"><td class="num" id="LN902">902</td><td class="line">                               code_length, flags, &amp;sizes,</td></tr>
<tr class="codeline" data-linenumber="903"><td class="num" id="LN903">903</td><td class="line">                               mt, <span class="mrange"><span class="mrange"><span class='macro'>CHECK_NULL<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return __null; (void)(0</span></span></span></span>);</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path30" class="msg msgEvent" style="margin-left:36ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">30</div></td><td><div class="PathNav"><a href="#Path29" title="Previous event (29)">&#x2190;</a></div></td><td>Calling 'ThreadShadow::has_pending_exception'</td><td><div class="PathNav"><a href="#Path31" title="Next event (31)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path36" class="msg msgEvent" style="margin-left:36ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">36</div></td><td><div class="PathNav"><a href="#Path35" title="Previous event (35)">&#x2190;</a></div></td><td>Returning from 'ThreadShadow::has_pending_exception'</td><td><div class="PathNav"><a href="#Path37" title="Next event (37)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path37" class="msg msgControl" style="margin-left:36ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">37</div></td><td><div class="PathNav"><a href="#Path36" title="Previous event (36)">&#x2190;</a></div></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path38" title="Next event (38)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="904"><td class="num" id="LN904">904</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="905"><td class="num" id="LN905">905</td><td class="line">  m-&gt;set_constants(<span class='macro'>NULL<span class='macro_popup'>__null</span></span>); <span class='comment'>// This will get filled in later</span></td></tr>
<tr class="codeline" data-linenumber="906"><td class="num" id="LN906">906</td><td class="line">  m-&gt;set_name_index(cp-&gt;utf8(name));</td></tr>
<tr class="codeline" data-linenumber="907"><td class="num" id="LN907">907</td><td class="line">  m-&gt;set_signature_index(cp-&gt;utf8(sig));</td></tr>
<tr class="codeline" data-linenumber="908"><td class="num" id="LN908">908</td><td class="line">  m-&gt;compute_from_signature(sig);</td></tr>
<tr class="codeline" data-linenumber="909"><td class="num" id="LN909">909</td><td class="line">  m-&gt;set_size_of_parameters(params);</td></tr>
<tr class="codeline" data-linenumber="910"><td class="num" id="LN910">910</td><td class="line">  m-&gt;set_max_stack(max_stack);</td></tr>
<tr class="codeline" data-linenumber="911"><td class="num" id="LN911">911</td><td class="line">  m-&gt;set_max_locals(params);</td></tr>
<tr class="codeline" data-linenumber="912"><td class="num" id="LN912">912</td><td class="line">  m-&gt;constMethod()-&gt;set_stackmap_data(<span class='macro'>NULL<span class='macro_popup'>__null</span></span>);</td></tr>
<tr class="codeline" data-linenumber="913"><td class="num" id="LN913">913</td><td class="line">  <span class="mrange">m-&gt;set_code(<span class="mrange">code_start</span>)</span>;</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path38" class="msg msgEvent" style="margin-left:15ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">38</div></td><td><div class="PathNav"><a href="#Path37" title="Previous event (37)">&#x2190;</a></div></td><td>Passing null pointer value via 1st parameter 'code'</td><td><div class="PathNav"><a href="#Path39" title="Next event (39)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path39" class="msg msgEvent" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">39</div></td><td><div class="PathNav"><a href="#Path38" title="Previous event (38)">&#x2190;</a></div></td><td>Calling 'Method::set_code'</td><td><div class="PathNav"><a href="#Path40" title="Next event (40)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="914"><td class="num" id="LN914">914</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="915"><td class="num" id="LN915">915</td><td class="line">  <span class='keyword'>return</span> m;</td></tr>
<tr class="codeline" data-linenumber="916"><td class="num" id="LN916">916</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="917"><td class="num" id="LN917">917</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="918"><td class="num" id="LN918">918</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>void</span> switchover_constant_pool(BytecodeConstantPool* bpool,</td></tr>
<tr class="codeline" data-linenumber="919"><td class="num" id="LN919">919</td><td class="line">    InstanceKlass* klass, GrowableArray&lt;Method*&gt;* new_methods, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="920"><td class="num" id="LN920">920</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="921"><td class="num" id="LN921">921</td><td class="line">  <span class='keyword'>if</span> (new_methods-&gt;length() &gt; 0) {</td></tr>
<tr class="codeline" data-linenumber="922"><td class="num" id="LN922">922</td><td class="line">    ConstantPool* cp = bpool-&gt;create_constant_pool(<span class='macro'>CHECK<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return ; (void)(0</span></span>);</td></tr>
<tr class="codeline" data-linenumber="923"><td class="num" id="LN923">923</td><td class="line">    <span class='keyword'>if</span> (cp != klass-&gt;constants()) {</td></tr>
<tr class="codeline" data-linenumber="924"><td class="num" id="LN924">924</td><td class="line">      <span class='comment'>// Copy resolved hidden class into new constant pool.</span></td></tr>
<tr class="codeline" data-linenumber="925"><td class="num" id="LN925">925</td><td class="line">      <span class='keyword'>if</span> (klass-&gt;is_hidden()) {</td></tr>
<tr class="codeline" data-linenumber="926"><td class="num" id="LN926">926</td><td class="line">        cp-&gt;klass_at_put(klass-&gt;this_class_index(), klass);</td></tr>
<tr class="codeline" data-linenumber="927"><td class="num" id="LN927">927</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="928"><td class="num" id="LN928">928</td><td class="line">      klass-&gt;class_loader_data()-&gt;add_to_deallocate_list(klass-&gt;constants());</td></tr>
<tr class="codeline" data-linenumber="929"><td class="num" id="LN929">929</td><td class="line">      klass-&gt;set_constants(cp);</td></tr>
<tr class="codeline" data-linenumber="930"><td class="num" id="LN930">930</td><td class="line">      cp-&gt;set_pool_holder(klass);</td></tr>
<tr class="codeline" data-linenumber="931"><td class="num" id="LN931">931</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="932"><td class="num" id="LN932">932</td><td class="line">      <span class='keyword'>for</span> (<span class='keyword'>int</span> i = 0; i &lt; new_methods-&gt;length(); ++i) {</td></tr>
<tr class="codeline" data-linenumber="933"><td class="num" id="LN933">933</td><td class="line">        new_methods-&gt;at(i)-&gt;set_constants(cp);</td></tr>
<tr class="codeline" data-linenumber="934"><td class="num" id="LN934">934</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="935"><td class="num" id="LN935">935</td><td class="line">      <span class='keyword'>for</span> (<span class='keyword'>int</span> i = 0; i &lt; klass-&gt;methods()-&gt;length(); ++i) {</td></tr>
<tr class="codeline" data-linenumber="936"><td class="num" id="LN936">936</td><td class="line">        Method* mo = klass-&gt;methods()-&gt;at(i);</td></tr>
<tr class="codeline" data-linenumber="937"><td class="num" id="LN937">937</td><td class="line">        mo-&gt;set_constants(cp);</td></tr>
<tr class="codeline" data-linenumber="938"><td class="num" id="LN938">938</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="939"><td class="num" id="LN939">939</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="940"><td class="num" id="LN940">940</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="941"><td class="num" id="LN941">941</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="942"><td class="num" id="LN942">942</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="943"><td class="num" id="LN943">943</td><td class="line"><span class='comment'>// Create default_methods list for the current class.</span></td></tr>
<tr class="codeline" data-linenumber="944"><td class="num" id="LN944">944</td><td class="line"><span class='comment'>// With the VM only processing erased signatures, the VM only</span></td></tr>
<tr class="codeline" data-linenumber="945"><td class="num" id="LN945">945</td><td class="line"><span class='comment'>// creates an overpass in a conflict case or a case with no candidates.</span></td></tr>
<tr class="codeline" data-linenumber="946"><td class="num" id="LN946">946</td><td class="line"><span class='comment'>// This allows virtual methods to override the overpass, but ensures</span></td></tr>
<tr class="codeline" data-linenumber="947"><td class="num" id="LN947">947</td><td class="line"><span class='comment'>// that a local method search will find the exception rather than an abstract</span></td></tr>
<tr class="codeline" data-linenumber="948"><td class="num" id="LN948">948</td><td class="line"><span class='comment'>// or default method that is not a valid candidate.</span></td></tr>
<tr class="codeline" data-linenumber="949"><td class="num" id="LN949">949</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="950"><td class="num" id="LN950">950</td><td class="line"><span class='comment'>// Note that if overpass method are ever created that are not exception</span></td></tr>
<tr class="codeline" data-linenumber="951"><td class="num" id="LN951">951</td><td class="line"><span class='comment'>// throwing methods then the loader constraint checking logic for vtable and</span></td></tr>
<tr class="codeline" data-linenumber="952"><td class="num" id="LN952">952</td><td class="line"><span class='comment'>// itable creation needs to be changed to check loader constraints for the</span></td></tr>
<tr class="codeline" data-linenumber="953"><td class="num" id="LN953">953</td><td class="line"><span class='comment'>// overpass methods that do not throw exceptions.</span></td></tr>
<tr class="codeline" data-linenumber="954"><td class="num" id="LN954">954</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>void</span> create_defaults_and_exceptions(GrowableArray&lt;EmptyVtableSlot*&gt;* slots,</td></tr>
<tr class="codeline" data-linenumber="955"><td class="num" id="LN955">955</td><td class="line">    InstanceKlass* klass, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="956"><td class="num" id="LN956">956</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="957"><td class="num" id="LN957">957</td><td class="line">  GrowableArray&lt;Method*&gt; overpasses;</td></tr>
<tr class="codeline" data-linenumber="958"><td class="num" id="LN958">958</td><td class="line">  GrowableArray&lt;Method*&gt; defaults;</td></tr>
<tr class="codeline" data-linenumber="959"><td class="num" id="LN959">959</td><td class="line">  BytecodeConstantPool bpool(klass-&gt;constants());</td></tr>
<tr class="codeline" data-linenumber="960"><td class="num" id="LN960">960</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="961"><td class="num" id="LN961">961</td><td class="line">  BytecodeBuffer* buffer = <span class='macro'>NULL<span class='macro_popup'>__null</span></span>; <span class='comment'>// Lazily create a reusable buffer</span></td></tr>
<tr class="codeline" data-linenumber="962"><td class="num" id="LN962">962</td><td class="line">  <span class='keyword'>for</span> (<span class='keyword'>int</span> i = 0; <span class="mrange">i &lt; slots-&gt;length()</span>; ++i) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path19" class="msg msgEvent" style="margin-left:19ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">19</div></td><td><div class="PathNav"><a href="#Path18" title="Previous event (18)">&#x2190;</a></div></td><td>Assuming the condition is true</td><td><div class="PathNav"><a href="#Path20" title="Next event (20)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path20" class="msg msgControl" style="margin-left:3ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">20</div></td><td><div class="PathNav"><a href="#Path19" title="Previous event (19)">&#x2190;</a></div></td><td>Loop condition is true.  Entering loop body</td><td><div class="PathNav"><a href="#Path21" title="Next event (21)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="963"><td class="num" id="LN963">963</td><td class="line">    EmptyVtableSlot* slot = slots-&gt;at(i);</td></tr>
<tr class="codeline" data-linenumber="964"><td class="num" id="LN964">964</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="965"><td class="num" id="LN965">965</td><td class="line">    <span class='keyword'>if</span> (slot-&gt;is_bound()) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path21" class="msg msgControl" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">21</div></td><td><div class="PathNav"><a href="#Path20" title="Previous event (20)">&#x2190;</a></div></td><td>Taking true branch</td><td><div class="PathNav"><a href="#Path22" title="Next event (22)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="966"><td class="num" id="LN966">966</td><td class="line">      MethodFamily* method = slot-&gt;get_binding();</td></tr>
<tr class="codeline" data-linenumber="967"><td class="num" id="LN967">967</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="968"><td class="num" id="LN968">968</td><td class="line">      <span class='macro'>LogTarget(Debug, defaultmethods)<span class='macro_popup'>LogTargetImpl&lt;LogLevel::Debug, (LogTag::_defaultmethods), (<br>LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag<br>::__NO_TAG), (LogTag::__NO_TAG)&gt;</span></span> lt;</td></tr>
<tr class="codeline" data-linenumber="969"><td class="num" id="LN969">969</td><td class="line">      <span class='keyword'>if</span> (<span class="mrange">lt.is_enabled()</span>) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path22" class="msg msgEvent" style="margin-left:11ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">22</div></td><td><div class="PathNav"><a href="#Path21" title="Previous event (21)">&#x2190;</a></div></td><td>Assuming the condition is false</td><td><div class="PathNav"><a href="#Path23" title="Next event (23)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path23" class="msg msgControl" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">23</div></td><td><div class="PathNav"><a href="#Path22" title="Previous event (22)">&#x2190;</a></div></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path24" title="Next event (24)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="970"><td class="num" id="LN970">970</td><td class="line">        ResourceMark rm(<span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="971"><td class="num" id="LN971">971</td><td class="line">        LogStream ls(lt);</td></tr>
<tr class="codeline" data-linenumber="972"><td class="num" id="LN972">972</td><td class="line">        ls.print(<span class='string_literal'>"for slot: "</span>);</td></tr>
<tr class="codeline" data-linenumber="973"><td class="num" id="LN973">973</td><td class="line">        slot-&gt;print_on(&amp;ls);</td></tr>
<tr class="codeline" data-linenumber="974"><td class="num" id="LN974">974</td><td class="line">        ls.cr();</td></tr>
<tr class="codeline" data-linenumber="975"><td class="num" id="LN975">975</td><td class="line">        <span class='keyword'>if</span> (method-&gt;has_target()) {</td></tr>
<tr class="codeline" data-linenumber="976"><td class="num" id="LN976">976</td><td class="line">          method-&gt;print_selected(&amp;ls, 1);</td></tr>
<tr class="codeline" data-linenumber="977"><td class="num" id="LN977">977</td><td class="line">        } <span class='keyword'>else</span> <span class='keyword'>if</span> (method-&gt;throws_exception()) {</td></tr>
<tr class="codeline" data-linenumber="978"><td class="num" id="LN978">978</td><td class="line">          method-&gt;print_exception(&amp;ls, 1);</td></tr>
<tr class="codeline" data-linenumber="979"><td class="num" id="LN979">979</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="980"><td class="num" id="LN980">980</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="981"><td class="num" id="LN981">981</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="982"><td class="num" id="LN982">982</td><td class="line">      <span class='keyword'>if</span> (method-&gt;has_target()) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path24" class="msg msgControl" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">24</div></td><td><div class="PathNav"><a href="#Path23" title="Previous event (23)">&#x2190;</a></div></td><td>Taking false branch</td><td><div class="PathNav"><a href="#Path25" title="Next event (25)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="983"><td class="num" id="LN983">983</td><td class="line">        Method* selected = method-&gt;get_selected_target();</td></tr>
<tr class="codeline" data-linenumber="984"><td class="num" id="LN984">984</td><td class="line">        <span class='keyword'>if</span> (selected-&gt;method_holder()-&gt;is_interface()) {</td></tr>
<tr class="codeline" data-linenumber="985"><td class="num" id="LN985">985</td><td class="line">          <span class='macro'>assert(!selected-&gt;is_private(), <span class='string_literal'>"pushing private interface method as default"</span>)<span class='macro_popup'>do { if (!(!selected-&gt;is_private())) { (*g_assert_poison) =<br> 'X';; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 985, "assert(" "!selected-&gt;is_private()" ") failed", "pushing private interface method as default"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="986"><td class="num" id="LN986">986</td><td class="line">          defaults.push(selected);</td></tr>
<tr class="codeline" data-linenumber="987"><td class="num" id="LN987">987</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="988"><td class="num" id="LN988">988</td><td class="line">      } <span class='keyword'>else</span> <span class='keyword'>if</span> (method-&gt;throws_exception()) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path25" class="msg msgControl" style="margin-left:14ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">25</div></td><td><div class="PathNav"><a href="#Path24" title="Previous event (24)">&#x2190;</a></div></td><td>Taking true branch</td><td><div class="PathNav"><a href="#Path26" title="Next event (26)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="989"><td class="num" id="LN989">989</td><td class="line">        <span class='keyword'>if</span> (<span class='variable'><span class='variable'><span class='variable'><span class='variable'><span class='variable'>buffer<table class='variable_popup'><tbody><tr><td valign='top'><div class='PathIndex PathIndexPopUp'>25.1</div></td><td>'buffer' is equal to NULL</td></tr></tbody></table></span><table class='variable_popup'><tbody><tr><td valign='top'><div class='PathIndex PathIndexPopUp'>25.1</div></td><td>'buffer' is equal to NULL</td></tr></tbody></table></span><table class='variable_popup'><tbody><tr><td valign='top'><div class='PathIndex PathIndexPopUp'>25.1</div></td><td>'buffer' is equal to NULL</td></tr></tbody></table></span><table class='variable_popup'><tbody><tr><td valign='top'><div class='PathIndex PathIndexPopUp'>25.1</div></td><td>'buffer' is equal to NULL</td></tr></tbody></table></span><table class='variable_popup'><tbody><tr><td valign='top'><div class='PathIndex PathIndexPopUp'>25.1</div></td><td>'buffer' is equal to NULL</td></tr></tbody></table></span> == <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path26" class="msg msgControl" style="margin-left:9ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">26</div></td><td><div class="PathNav"><a href="#Path25" title="Previous event (25)">&#x2190;</a></div></td><td>Taking true branch</td><td><div class="PathNav"><a href="#Path27" title="Next event (27)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="990"><td class="num" id="LN990">990</td><td class="line">          buffer = <span class='keyword'>new</span> BytecodeBuffer();</td></tr>
<tr class="codeline" data-linenumber="991"><td class="num" id="LN991">991</td><td class="line">        } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="992"><td class="num" id="LN992">992</td><td class="line">          buffer-&gt;clear();</td></tr>
<tr class="codeline" data-linenumber="993"><td class="num" id="LN993">993</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="994"><td class="num" id="LN994">994</td><td class="line">        <span class='keyword'>int</span> max_stack = assemble_method_error(&amp;bpool, buffer,</td></tr>
<tr class="codeline" data-linenumber="995"><td class="num" id="LN995">995</td><td class="line">           method-&gt;get_exception_name(), method-&gt;get_exception_message());</td></tr>
<tr class="codeline" data-linenumber="996"><td class="num" id="LN996">996</td><td class="line">        AccessFlags flags = accessFlags_from(</td></tr>
<tr class="codeline" data-linenumber="997"><td class="num" id="LN997">997</td><td class="line">          JVM_ACC_PUBLIC | JVM_ACC_SYNTHETIC | JVM_ACC_BRIDGE);</td></tr>
<tr class="codeline" data-linenumber="998"><td class="num" id="LN998">998</td><td class="line">        Method* m = <span class="mrange">new_method(&amp;bpool, buffer, slot-&gt;name(), slot-&gt;signature(),</td></tr></span>
<tr><td class="num"></td><td class="line"><div id="Path27" class="msg msgEvent" style="margin-left:21ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">27</div></td><td><div class="PathNav"><a href="#Path26" title="Previous event (26)">&#x2190;</a></div></td><td>Calling 'new_method'</td><td><div class="PathNav"><a href="#Path28" title="Next event (28)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="999"><td class="num" id="LN999">999</td><td class="line">          <span class="mrange">flags, max_stack, slot-&gt;size_of_parameters(),</td></tr></span>
<tr class="codeline" data-linenumber="1000"><td class="num" id="LN1000">1000</td><td class="line">          <span class="mrange">ConstMethod::OVERPASS, <span class='macro'>CHECK<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return ; (void)(0</span></span></span>);</td></tr>
<tr class="codeline" data-linenumber="1001"><td class="num" id="LN1001">1001</td><td class="line">        <span class='comment'>// We push to the methods list:</span></td></tr>
<tr class="codeline" data-linenumber="1002"><td class="num" id="LN1002">1002</td><td class="line">        <span class='comment'>// overpass methods which are exception throwing methods</span></td></tr>
<tr class="codeline" data-linenumber="1003"><td class="num" id="LN1003">1003</td><td class="line">        <span class='keyword'>if</span> (m != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="1004"><td class="num" id="LN1004">1004</td><td class="line">          overpasses.push(m);</td></tr>
<tr class="codeline" data-linenumber="1005"><td class="num" id="LN1005">1005</td><td class="line">        }</td></tr>
<tr class="codeline" data-linenumber="1006"><td class="num" id="LN1006">1006</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1007"><td class="num" id="LN1007">1007</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1008"><td class="num" id="LN1008">1008</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1009"><td class="num" id="LN1009">1009</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1010"><td class="num" id="LN1010">1010</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1011"><td class="num" id="LN1011">1011</td><td class="line">  <span class='macro'>log_debug(defaultmethods)<span class='macro_popup'>(!(LogImpl&lt;(LogTag::_defaultmethods), (LogTag::__NO_TAG), (<br>LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag<br>::__NO_TAG)&gt;::is_level(LogLevel::Debug))) ? (void)0 : LogImpl<br>&lt;(LogTag::_defaultmethods), (LogTag::__NO_TAG), (LogTag::__NO_TAG<br>), (LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag::__NO_TAG)<br>&gt;::write&lt;LogLevel::Debug&gt;</span></span>(<span class='string_literal'>"Created %d overpass methods"</span>, overpasses.length());</td></tr>
<tr class="codeline" data-linenumber="1012"><td class="num" id="LN1012">1012</td><td class="line">  <span class='macro'>log_debug(defaultmethods)<span class='macro_popup'>(!(LogImpl&lt;(LogTag::_defaultmethods), (LogTag::__NO_TAG), (<br>LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag<br>::__NO_TAG)&gt;::is_level(LogLevel::Debug))) ? (void)0 : LogImpl<br>&lt;(LogTag::_defaultmethods), (LogTag::__NO_TAG), (LogTag::__NO_TAG<br>), (LogTag::__NO_TAG), (LogTag::__NO_TAG), (LogTag::__NO_TAG)<br>&gt;::write&lt;LogLevel::Debug&gt;</span></span>(<span class='string_literal'>"Created %d default  methods"</span>, defaults.length());</td></tr>
<tr class="codeline" data-linenumber="1013"><td class="num" id="LN1013">1013</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1014"><td class="num" id="LN1014">1014</td><td class="line">  <span class='keyword'>if</span> (overpasses.length() &gt; 0) {</td></tr>
<tr class="codeline" data-linenumber="1015"><td class="num" id="LN1015">1015</td><td class="line">    switchover_constant_pool(&amp;bpool, klass, &amp;overpasses, <span class='macro'>CHECK<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return ; (void)(0</span></span>);</td></tr>
<tr class="codeline" data-linenumber="1016"><td class="num" id="LN1016">1016</td><td class="line">    merge_in_new_methods(klass, &amp;overpasses, <span class='macro'>CHECK<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return ; (void)(0</span></span>);</td></tr>
<tr class="codeline" data-linenumber="1017"><td class="num" id="LN1017">1017</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1018"><td class="num" id="LN1018">1018</td><td class="line">  <span class='keyword'>if</span> (defaults.length() &gt; 0) {</td></tr>
<tr class="codeline" data-linenumber="1019"><td class="num" id="LN1019">1019</td><td class="line">    create_default_methods(klass, &amp;defaults, <span class='macro'>CHECK<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return ; (void)(0</span></span>);</td></tr>
<tr class="codeline" data-linenumber="1020"><td class="num" id="LN1020">1020</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1021"><td class="num" id="LN1021">1021</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="1022"><td class="num" id="LN1022">1022</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1023"><td class="num" id="LN1023">1023</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>void</span> create_default_methods(InstanceKlass* klass,</td></tr>
<tr class="codeline" data-linenumber="1024"><td class="num" id="LN1024">1024</td><td class="line">    GrowableArray&lt;Method*&gt;* new_methods, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="1025"><td class="num" id="LN1025">1025</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1026"><td class="num" id="LN1026">1026</td><td class="line">  <span class='keyword'>int</span> new_size = new_methods-&gt;length();</td></tr>
<tr class="codeline" data-linenumber="1027"><td class="num" id="LN1027">1027</td><td class="line">  Array&lt;Method*&gt;* total_default_methods = MetadataFactory::new_array&lt;Method*&gt;(</td></tr>
<tr class="codeline" data-linenumber="1028"><td class="num" id="LN1028">1028</td><td class="line">      klass-&gt;class_loader_data(), new_size, <span class='macro'>NULL<span class='macro_popup'>__null</span></span>, <span class='macro'>CHECK<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return ; (void)(0</span></span>);</td></tr>
<tr class="codeline" data-linenumber="1029"><td class="num" id="LN1029">1029</td><td class="line">  <span class='keyword'>for</span> (<span class='keyword'>int</span> index = 0; index &lt; new_size; index++ ) {</td></tr>
<tr class="codeline" data-linenumber="1030"><td class="num" id="LN1030">1030</td><td class="line">    total_default_methods-&gt;at_put(index, new_methods-&gt;at(index));</td></tr>
<tr class="codeline" data-linenumber="1031"><td class="num" id="LN1031">1031</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1032"><td class="num" id="LN1032">1032</td><td class="line">  Method::sort_methods(total_default_methods, <span class='comment'>/*set_idnums=*/</span><span class='keyword'>false</span>);</td></tr>
<tr class="codeline" data-linenumber="1033"><td class="num" id="LN1033">1033</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1034"><td class="num" id="LN1034">1034</td><td class="line">  klass-&gt;set_default_methods(total_default_methods);</td></tr>
<tr class="codeline" data-linenumber="1035"><td class="num" id="LN1035">1035</td><td class="line">  <span class='comment'>// Create an array for mapping default methods to their vtable indices in</span></td></tr>
<tr class="codeline" data-linenumber="1036"><td class="num" id="LN1036">1036</td><td class="line">  <span class='comment'>// this class, since default methods vtable indices are the indices for</span></td></tr>
<tr class="codeline" data-linenumber="1037"><td class="num" id="LN1037">1037</td><td class="line">  <span class='comment'>// the defining class.</span></td></tr>
<tr class="codeline" data-linenumber="1038"><td class="num" id="LN1038">1038</td><td class="line">  klass-&gt;create_new_default_vtable_indices(new_size, <span class='macro'>CHECK<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return ; (void)(0</span></span>);</td></tr>
<tr class="codeline" data-linenumber="1039"><td class="num" id="LN1039">1039</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="1040"><td class="num" id="LN1040">1040</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1041"><td class="num" id="LN1041">1041</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>void</span> sort_methods(GrowableArray&lt;Method*&gt;* methods) {</td></tr>
<tr class="codeline" data-linenumber="1042"><td class="num" id="LN1042">1042</td><td class="line">  <span class='comment'>// Note that this must sort using the same key as is used for sorting</span></td></tr>
<tr class="codeline" data-linenumber="1043"><td class="num" id="LN1043">1043</td><td class="line">  <span class='comment'>// methods in InstanceKlass.</span></td></tr>
<tr class="codeline" data-linenumber="1044"><td class="num" id="LN1044">1044</td><td class="line">  <span class='keyword'>bool</span> sorted = <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="1045"><td class="num" id="LN1045">1045</td><td class="line">  <span class='keyword'>for</span> (<span class='keyword'>int</span> i = methods-&gt;length() - 1; i &gt; 0; --i) {</td></tr>
<tr class="codeline" data-linenumber="1046"><td class="num" id="LN1046">1046</td><td class="line">    <span class='keyword'>for</span> (<span class='keyword'>int</span> j = 0; j &lt; i; ++j) {</td></tr>
<tr class="codeline" data-linenumber="1047"><td class="num" id="LN1047">1047</td><td class="line">      Method* m1 = methods-&gt;at(j);</td></tr>
<tr class="codeline" data-linenumber="1048"><td class="num" id="LN1048">1048</td><td class="line">      Method* m2 = methods-&gt;at(j + 1);</td></tr>
<tr class="codeline" data-linenumber="1049"><td class="num" id="LN1049">1049</td><td class="line">      <span class='keyword'>if</span> ((uintptr_t)m1-&gt;name() &gt; (uintptr_t)m2-&gt;name()) {</td></tr>
<tr class="codeline" data-linenumber="1050"><td class="num" id="LN1050">1050</td><td class="line">        methods-&gt;at_put(j, m2);</td></tr>
<tr class="codeline" data-linenumber="1051"><td class="num" id="LN1051">1051</td><td class="line">        methods-&gt;at_put(j + 1, m1);</td></tr>
<tr class="codeline" data-linenumber="1052"><td class="num" id="LN1052">1052</td><td class="line">        sorted = <span class='keyword'>false</span>;</td></tr>
<tr class="codeline" data-linenumber="1053"><td class="num" id="LN1053">1053</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1054"><td class="num" id="LN1054">1054</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1055"><td class="num" id="LN1055">1055</td><td class="line">    <span class='keyword'>if</span> (sorted) <span class='keyword'>break</span>;</td></tr>
<tr class="codeline" data-linenumber="1056"><td class="num" id="LN1056">1056</td><td class="line">    sorted = <span class='keyword'>true</span>;</td></tr>
<tr class="codeline" data-linenumber="1057"><td class="num" id="LN1057">1057</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1058"><td class="num" id="LN1058">1058</td><td class="line"><span class='directive'>#ifdef <span class='macro'>ASSERT<span class='macro_popup'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="1059"><td class="num" id="LN1059">1059</td><td class="line">  uintptr_t prev = 0;</td></tr>
<tr class="codeline" data-linenumber="1060"><td class="num" id="LN1060">1060</td><td class="line">  <span class='keyword'>for</span> (<span class='keyword'>int</span> i = 0; i &lt; methods-&gt;length(); ++i) {</td></tr>
<tr class="codeline" data-linenumber="1061"><td class="num" id="LN1061">1061</td><td class="line">    Method* mh = methods-&gt;at(i);</td></tr>
<tr class="codeline" data-linenumber="1062"><td class="num" id="LN1062">1062</td><td class="line">    uintptr_t nv = (uintptr_t)mh-&gt;name();</td></tr>
<tr class="codeline" data-linenumber="1063"><td class="num" id="LN1063">1063</td><td class="line">    <span class='macro'>assert(nv &gt;= prev, <span class='string_literal'>"Incorrect overpass method ordering"</span>)<span class='macro_popup'>do { if (!(nv &gt;= prev)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 1063, "assert(" "nv &gt;= prev" ") failed", "Incorrect overpass method ordering"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1064"><td class="num" id="LN1064">1064</td><td class="line">    prev = nv;</td></tr>
<tr class="codeline" data-linenumber="1065"><td class="num" id="LN1065">1065</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1066"><td class="num" id="LN1066">1066</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="1067"><td class="num" id="LN1067">1067</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="1068"><td class="num" id="LN1068">1068</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1069"><td class="num" id="LN1069">1069</td><td class="line"><span class='keyword'>static</span> <span class='keyword'>void</span> merge_in_new_methods(InstanceKlass* klass,</td></tr>
<tr class="codeline" data-linenumber="1070"><td class="num" id="LN1070">1070</td><td class="line">    GrowableArray&lt;Method*&gt;* new_methods, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="1071"><td class="num" id="LN1071">1071</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1072"><td class="num" id="LN1072">1072</td><td class="line">  <span class='keyword'>enum</span> { ANNOTATIONS, PARAMETERS, DEFAULTS, NUM_ARRAYS };</td></tr>
<tr class="codeline" data-linenumber="1073"><td class="num" id="LN1073">1073</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1074"><td class="num" id="LN1074">1074</td><td class="line">  Array&lt;Method*&gt;* original_methods = klass-&gt;methods();</td></tr>
<tr class="codeline" data-linenumber="1075"><td class="num" id="LN1075">1075</td><td class="line">  Array&lt;<span class='keyword'>int</span>&gt;* original_ordering = klass-&gt;method_ordering();</td></tr>
<tr class="codeline" data-linenumber="1076"><td class="num" id="LN1076">1076</td><td class="line">  Array&lt;<span class='keyword'>int</span>&gt;* merged_ordering = Universe::the_empty_int_array();</td></tr>
<tr class="codeline" data-linenumber="1077"><td class="num" id="LN1077">1077</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1078"><td class="num" id="LN1078">1078</td><td class="line">  <span class='keyword'>int</span> new_size = klass-&gt;methods()-&gt;length() + new_methods-&gt;length();</td></tr>
<tr class="codeline" data-linenumber="1079"><td class="num" id="LN1079">1079</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1080"><td class="num" id="LN1080">1080</td><td class="line">  Array&lt;Method*&gt;* merged_methods = MetadataFactory::new_array&lt;Method*&gt;(</td></tr>
<tr class="codeline" data-linenumber="1081"><td class="num" id="LN1081">1081</td><td class="line">      klass-&gt;class_loader_data(), new_size, <span class='macro'>NULL<span class='macro_popup'>__null</span></span>, <span class='macro'>CHECK<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return ; (void)(0</span></span>);</td></tr>
<tr class="codeline" data-linenumber="1082"><td class="num" id="LN1082">1082</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1083"><td class="num" id="LN1083">1083</td><td class="line">  <span class='comment'>// original_ordering might be empty if this class has no methods of its own</span></td></tr>
<tr class="codeline" data-linenumber="1084"><td class="num" id="LN1084">1084</td><td class="line">  <span class='keyword'>if</span> (JvmtiExport::can_maintain_original_method_order() || Arguments::is_dumping_archive()) {</td></tr>
<tr class="codeline" data-linenumber="1085"><td class="num" id="LN1085">1085</td><td class="line">    merged_ordering = MetadataFactory::new_array&lt;<span class='keyword'>int</span>&gt;(</td></tr>
<tr class="codeline" data-linenumber="1086"><td class="num" id="LN1086">1086</td><td class="line">        klass-&gt;class_loader_data(), new_size, <span class='macro'>CHECK<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return ; (void)(0</span></span>);</td></tr>
<tr class="codeline" data-linenumber="1087"><td class="num" id="LN1087">1087</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1088"><td class="num" id="LN1088">1088</td><td class="line">  <span class='keyword'>int</span> method_order_index = klass-&gt;methods()-&gt;length();</td></tr>
<tr class="codeline" data-linenumber="1089"><td class="num" id="LN1089">1089</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1090"><td class="num" id="LN1090">1090</td><td class="line">  sort_methods(new_methods);</td></tr>
<tr class="codeline" data-linenumber="1091"><td class="num" id="LN1091">1091</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1092"><td class="num" id="LN1092">1092</td><td class="line">  <span class='comment'>// Perform grand merge of existing methods and new methods</span></td></tr>
<tr class="codeline" data-linenumber="1093"><td class="num" id="LN1093">1093</td><td class="line">  <span class='keyword'>int</span> orig_idx = 0;</td></tr>
<tr class="codeline" data-linenumber="1094"><td class="num" id="LN1094">1094</td><td class="line">  <span class='keyword'>int</span> new_idx = 0;</td></tr>
<tr class="codeline" data-linenumber="1095"><td class="num" id="LN1095">1095</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1096"><td class="num" id="LN1096">1096</td><td class="line">  <span class='keyword'>for</span> (<span class='keyword'>int</span> i = 0; i &lt; new_size; ++i) {</td></tr>
<tr class="codeline" data-linenumber="1097"><td class="num" id="LN1097">1097</td><td class="line">    Method* orig_method = <span class='macro'>NULL<span class='macro_popup'>__null</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1098"><td class="num" id="LN1098">1098</td><td class="line">    Method* new_method = <span class='macro'>NULL<span class='macro_popup'>__null</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1099"><td class="num" id="LN1099">1099</td><td class="line">    <span class='keyword'>if</span> (orig_idx &lt; original_methods-&gt;length()) {</td></tr>
<tr class="codeline" data-linenumber="1100"><td class="num" id="LN1100">1100</td><td class="line">      orig_method = original_methods-&gt;at(orig_idx);</td></tr>
<tr class="codeline" data-linenumber="1101"><td class="num" id="LN1101">1101</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1102"><td class="num" id="LN1102">1102</td><td class="line">    <span class='keyword'>if</span> (new_idx &lt; new_methods-&gt;length()) {</td></tr>
<tr class="codeline" data-linenumber="1103"><td class="num" id="LN1103">1103</td><td class="line">      new_method = new_methods-&gt;at(new_idx);</td></tr>
<tr class="codeline" data-linenumber="1104"><td class="num" id="LN1104">1104</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1105"><td class="num" id="LN1105">1105</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1106"><td class="num" id="LN1106">1106</td><td class="line">    <span class='keyword'>if</span> (orig_method != <span class='macro'>NULL<span class='macro_popup'>__null</span></span> &amp;&amp;</td></tr>
<tr class="codeline" data-linenumber="1107"><td class="num" id="LN1107">1107</td><td class="line">        (new_method == <span class='macro'>NULL<span class='macro_popup'>__null</span></span> || orig_method-&gt;name() &lt; new_method-&gt;name())) {</td></tr>
<tr class="codeline" data-linenumber="1108"><td class="num" id="LN1108">1108</td><td class="line">      merged_methods-&gt;at_put(i, orig_method);</td></tr>
<tr class="codeline" data-linenumber="1109"><td class="num" id="LN1109">1109</td><td class="line">      original_methods-&gt;at_put(orig_idx, <span class='macro'>NULL<span class='macro_popup'>__null</span></span>);</td></tr>
<tr class="codeline" data-linenumber="1110"><td class="num" id="LN1110">1110</td><td class="line">      <span class='keyword'>if</span> (merged_ordering-&gt;length() &gt; 0) {</td></tr>
<tr class="codeline" data-linenumber="1111"><td class="num" id="LN1111">1111</td><td class="line">        <span class='macro'>assert(original_ordering != NULL &amp;&amp; original_ordering-&gt;length() &gt; 0,<span class='macro_popup'>do { if (!(original_ordering != __null &amp;&amp; original_ordering<br>-&gt;length() &gt; 0)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 1112, "assert(" "original_ordering != __null &amp;&amp; original_ordering-&gt;length() &gt; 0"<br> ") failed", "should have original order information for this method"<br>); ::breakpoint(); } } while (0)</span></span></td></tr>
<tr class="codeline" data-linenumber="1112"><td class="num" id="LN1112">1112</td><td class="line">               <span class='string_literal'><span class='macro'>"should have original order information for this method"</span>)<span class='macro_popup'>do { if (!(original_ordering != __null &amp;&amp; original_ordering<br>-&gt;length() &gt; 0)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 1112, "assert(" "original_ordering != __null &amp;&amp; original_ordering-&gt;length() &gt; 0"<br> ") failed", "should have original order information for this method"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1113"><td class="num" id="LN1113">1113</td><td class="line">        merged_ordering-&gt;at_put(i, original_ordering-&gt;at(orig_idx));</td></tr>
<tr class="codeline" data-linenumber="1114"><td class="num" id="LN1114">1114</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1115"><td class="num" id="LN1115">1115</td><td class="line">      ++orig_idx;</td></tr>
<tr class="codeline" data-linenumber="1116"><td class="num" id="LN1116">1116</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="1117"><td class="num" id="LN1117">1117</td><td class="line">      merged_methods-&gt;at_put(i, new_method);</td></tr>
<tr class="codeline" data-linenumber="1118"><td class="num" id="LN1118">1118</td><td class="line">      <span class='keyword'>if</span> (merged_ordering-&gt;length() &gt; 0) {</td></tr>
<tr class="codeline" data-linenumber="1119"><td class="num" id="LN1119">1119</td><td class="line">        merged_ordering-&gt;at_put(i, method_order_index++);</td></tr>
<tr class="codeline" data-linenumber="1120"><td class="num" id="LN1120">1120</td><td class="line">      }</td></tr>
<tr class="codeline" data-linenumber="1121"><td class="num" id="LN1121">1121</td><td class="line">      ++new_idx;</td></tr>
<tr class="codeline" data-linenumber="1122"><td class="num" id="LN1122">1122</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1123"><td class="num" id="LN1123">1123</td><td class="line">    <span class='comment'>// update idnum for new location</span></td></tr>
<tr class="codeline" data-linenumber="1124"><td class="num" id="LN1124">1124</td><td class="line">    merged_methods-&gt;at(i)-&gt;set_method_idnum(i);</td></tr>
<tr class="codeline" data-linenumber="1125"><td class="num" id="LN1125">1125</td><td class="line">    merged_methods-&gt;at(i)-&gt;set_orig_method_idnum(i);</td></tr>
<tr class="codeline" data-linenumber="1126"><td class="num" id="LN1126">1126</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1127"><td class="num" id="LN1127">1127</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1128"><td class="num" id="LN1128">1128</td><td class="line">  <span class='comment'>// Verify correct order</span></td></tr>
<tr class="codeline" data-linenumber="1129"><td class="num" id="LN1129">1129</td><td class="line"><span class='directive'>#ifdef <span class='macro'>ASSERT<span class='macro_popup'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="1130"><td class="num" id="LN1130">1130</td><td class="line">  uintptr_t prev = 0;</td></tr>
<tr class="codeline" data-linenumber="1131"><td class="num" id="LN1131">1131</td><td class="line">  <span class='keyword'>for</span> (<span class='keyword'>int</span> i = 0; i &lt; merged_methods-&gt;length(); ++i) {</td></tr>
<tr class="codeline" data-linenumber="1132"><td class="num" id="LN1132">1132</td><td class="line">    Method* mo = merged_methods-&gt;at(i);</td></tr>
<tr class="codeline" data-linenumber="1133"><td class="num" id="LN1133">1133</td><td class="line">    uintptr_t nv = (uintptr_t)mo-&gt;name();</td></tr>
<tr class="codeline" data-linenumber="1134"><td class="num" id="LN1134">1134</td><td class="line">    <span class='macro'>assert(nv &gt;= prev, <span class='string_literal'>"Incorrect method ordering"</span>)<span class='macro_popup'>do { if (!(nv &gt;= prev)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/classfile/defaultMethods.cpp"<br>, 1134, "assert(" "nv &gt;= prev" ") failed", "Incorrect method ordering"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1135"><td class="num" id="LN1135">1135</td><td class="line">    prev = nv;</td></tr>
<tr class="codeline" data-linenumber="1136"><td class="num" id="LN1136">1136</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1137"><td class="num" id="LN1137">1137</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="1138"><td class="num" id="LN1138">1138</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1139"><td class="num" id="LN1139">1139</td><td class="line">  <span class='comment'>// Replace klass methods with new merged lists</span></td></tr>
<tr class="codeline" data-linenumber="1140"><td class="num" id="LN1140">1140</td><td class="line">  klass-&gt;set_methods(merged_methods);</td></tr>
<tr class="codeline" data-linenumber="1141"><td class="num" id="LN1141">1141</td><td class="line">  klass-&gt;set_initial_method_idnum(new_size);</td></tr>
<tr class="codeline" data-linenumber="1142"><td class="num" id="LN1142">1142</td><td class="line">  klass-&gt;set_method_ordering(merged_ordering);</td></tr>
<tr class="codeline" data-linenumber="1143"><td class="num" id="LN1143">1143</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1144"><td class="num" id="LN1144">1144</td><td class="line">  <span class='comment'>// Free metadata</span></td></tr>
<tr class="codeline" data-linenumber="1145"><td class="num" id="LN1145">1145</td><td class="line">  ClassLoaderData* cld = klass-&gt;class_loader_data();</td></tr>
<tr class="codeline" data-linenumber="1146"><td class="num" id="LN1146">1146</td><td class="line">  <span class='keyword'>if</span> (original_methods-&gt;length() &gt; 0) {</td></tr>
<tr class="codeline" data-linenumber="1147"><td class="num" id="LN1147">1147</td><td class="line">    MetadataFactory::free_array(cld, original_methods);</td></tr>
<tr class="codeline" data-linenumber="1148"><td class="num" id="LN1148">1148</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1149"><td class="num" id="LN1149">1149</td><td class="line">  <span class='keyword'>if</span> (original_ordering != <span class='macro'>NULL<span class='macro_popup'>__null</span></span> &amp;&amp; original_ordering-&gt;length() &gt; 0) {</td></tr>
<tr class="codeline" data-linenumber="1150"><td class="num" id="LN1150">1150</td><td class="line">    MetadataFactory::free_array(cld, original_ordering);</td></tr>
<tr class="codeline" data-linenumber="1151"><td class="num" id="LN1151">1151</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1152"><td class="num" id="LN1152">1152</td><td class="line">}</td></tr>
</table><hr class=divider>
<div id=File36877>
<div class=FileNav><a href="#File1">&#x2190;</a></div><h4 class=FileName>/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp</h4>
<div class=FileNav><a href="#File31794">&#x2192;</a></div></div>
<table class="code" data-fileid="36877">
<tr class="codeline" data-linenumber="1"><td class="num" id="LN1">1</td><td class="line"><span class='comment'>/*</span></td></tr>
<tr class="codeline" data-linenumber="2"><td class="num" id="LN2">2</td><td class="line"> <span class='comment'>* Copyright (c) 1998, 2021, Oracle and/or its affiliates. All rights reserved.</span></td></tr>
<tr class="codeline" data-linenumber="3"><td class="num" id="LN3">3</td><td class="line"> <span class='comment'>* DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.</span></td></tr>
<tr class="codeline" data-linenumber="4"><td class="num" id="LN4">4</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="5"><td class="num" id="LN5">5</td><td class="line"> <span class='comment'>* This code is free software; you can redistribute it and/or modify it</span></td></tr>
<tr class="codeline" data-linenumber="6"><td class="num" id="LN6">6</td><td class="line"> <span class='comment'>* under the terms of the GNU General Public License version 2 only, as</span></td></tr>
<tr class="codeline" data-linenumber="7"><td class="num" id="LN7">7</td><td class="line"> <span class='comment'>* published by the Free Software Foundation.</span></td></tr>
<tr class="codeline" data-linenumber="8"><td class="num" id="LN8">8</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="9"><td class="num" id="LN9">9</td><td class="line"> <span class='comment'>* This code is distributed in the hope that it will be useful, but WITHOUT</span></td></tr>
<tr class="codeline" data-linenumber="10"><td class="num" id="LN10">10</td><td class="line"> <span class='comment'>* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span></td></tr>
<tr class="codeline" data-linenumber="11"><td class="num" id="LN11">11</td><td class="line"> <span class='comment'>* FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License</span></td></tr>
<tr class="codeline" data-linenumber="12"><td class="num" id="LN12">12</td><td class="line"> <span class='comment'>* version 2 for more details (a copy is included in the LICENSE file that</span></td></tr>
<tr class="codeline" data-linenumber="13"><td class="num" id="LN13">13</td><td class="line"> <span class='comment'>* accompanied this code).</span></td></tr>
<tr class="codeline" data-linenumber="14"><td class="num" id="LN14">14</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="15"><td class="num" id="LN15">15</td><td class="line"> <span class='comment'>* You should have received a copy of the GNU General Public License version</span></td></tr>
<tr class="codeline" data-linenumber="16"><td class="num" id="LN16">16</td><td class="line"> <span class='comment'>* 2 along with this work; if not, write to the Free Software Foundation,</span></td></tr>
<tr class="codeline" data-linenumber="17"><td class="num" id="LN17">17</td><td class="line"> <span class='comment'>* Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.</span></td></tr>
<tr class="codeline" data-linenumber="18"><td class="num" id="LN18">18</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="19"><td class="num" id="LN19">19</td><td class="line"> <span class='comment'>* Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA</span></td></tr>
<tr class="codeline" data-linenumber="20"><td class="num" id="LN20">20</td><td class="line"> <span class='comment'>* or visit www.oracle.com if you need additional information or have any</span></td></tr>
<tr class="codeline" data-linenumber="21"><td class="num" id="LN21">21</td><td class="line"> <span class='comment'>* questions.</span></td></tr>
<tr class="codeline" data-linenumber="22"><td class="num" id="LN22">22</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="23"><td class="num" id="LN23">23</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="24"><td class="num" id="LN24">24</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="25"><td class="num" id="LN25">25</td><td class="line"><span class='directive'>#ifndef SHARE_UTILITIES_EXCEPTIONS_HPP</span></td></tr>
<tr class="codeline" data-linenumber="26"><td class="num" id="LN26">26</td><td class="line"><span class='directive'>#define SHARE_UTILITIES_EXCEPTIONS_HPP</span></td></tr>
<tr class="codeline" data-linenumber="27"><td class="num" id="LN27">27</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="28"><td class="num" id="LN28">28</td><td class="line"><span class='directive'>#include "memory/allocation.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="29"><td class="num" id="LN29">29</td><td class="line"><span class='directive'>#include "oops/oopsHierarchy.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="30"><td class="num" id="LN30">30</td><td class="line"><span class='directive'>#include "utilities/ostream.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="31"><td class="num" id="LN31">31</td><td class="line"><span class='directive'>#include "utilities/sizes.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="32"><td class="num" id="LN32">32</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="33"><td class="num" id="LN33">33</td><td class="line"><span class='comment'>// This file provides the basic support for exception handling in the VM.</span></td></tr>
<tr class="codeline" data-linenumber="34"><td class="num" id="LN34">34</td><td class="line"><span class='comment'>// Note: We do not use C++ exceptions to avoid compiler dependencies and</span></td></tr>
<tr class="codeline" data-linenumber="35"><td class="num" id="LN35">35</td><td class="line"><span class='comment'>// unpredictable performance.</span></td></tr>
<tr class="codeline" data-linenumber="36"><td class="num" id="LN36">36</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="37"><td class="num" id="LN37">37</td><td class="line"><span class='comment'>// Scheme: Exceptions are stored with the thread. There is never more</span></td></tr>
<tr class="codeline" data-linenumber="38"><td class="num" id="LN38">38</td><td class="line"><span class='comment'>// than one pending exception per thread. All functions that can throw</span></td></tr>
<tr class="codeline" data-linenumber="39"><td class="num" id="LN39">39</td><td class="line"><span class='comment'>// an exception carry a THREAD argument (usually the last argument and</span></td></tr>
<tr class="codeline" data-linenumber="40"><td class="num" id="LN40">40</td><td class="line"><span class='comment'>// declared with the TRAPS macro). Throwing an exception means setting</span></td></tr>
<tr class="codeline" data-linenumber="41"><td class="num" id="LN41">41</td><td class="line"><span class='comment'>// a pending exception in the thread. Upon return from a function that</span></td></tr>
<tr class="codeline" data-linenumber="42"><td class="num" id="LN42">42</td><td class="line"><span class='comment'>// can throw an exception, we must check if an exception is pending.</span></td></tr>
<tr class="codeline" data-linenumber="43"><td class="num" id="LN43">43</td><td class="line"><span class='comment'>// The CHECK macros do this in a convenient way. Carrying around the</span></td></tr>
<tr class="codeline" data-linenumber="44"><td class="num" id="LN44">44</td><td class="line"><span class='comment'>// thread provides also convenient access to it (e.g. for Handle</span></td></tr>
<tr class="codeline" data-linenumber="45"><td class="num" id="LN45">45</td><td class="line"><span class='comment'>// creation, w/o the need for recomputation).</span></td></tr>
<tr class="codeline" data-linenumber="46"><td class="num" id="LN46">46</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="47"><td class="num" id="LN47">47</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="48"><td class="num" id="LN48">48</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="49"><td class="num" id="LN49">49</td><td class="line"><span class='comment'>// Forward declarations to be independent of the include structure.</span></td></tr>
<tr class="codeline" data-linenumber="50"><td class="num" id="LN50">50</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="51"><td class="num" id="LN51">51</td><td class="line"><span class='keyword'>class</span> JavaThread;</td></tr>
<tr class="codeline" data-linenumber="52"><td class="num" id="LN52">52</td><td class="line"><span class='keyword'>class</span> Handle;</td></tr>
<tr class="codeline" data-linenumber="53"><td class="num" id="LN53">53</td><td class="line"><span class='keyword'>class</span> Symbol;</td></tr>
<tr class="codeline" data-linenumber="54"><td class="num" id="LN54">54</td><td class="line"><span class='keyword'>class</span> JavaCallArguments;</td></tr>
<tr class="codeline" data-linenumber="55"><td class="num" id="LN55">55</td><td class="line"><span class='keyword'>class</span> methodHandle;</td></tr>
<tr class="codeline" data-linenumber="56"><td class="num" id="LN56">56</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="57"><td class="num" id="LN57">57</td><td class="line"><span class='comment'>// The ThreadShadow class is a helper class to access the _pending_exception</span></td></tr>
<tr class="codeline" data-linenumber="58"><td class="num" id="LN58">58</td><td class="line"><span class='comment'>// field of the Thread class w/o having access to the Thread's interface (for</span></td></tr>
<tr class="codeline" data-linenumber="59"><td class="num" id="LN59">59</td><td class="line"><span class='comment'>// include hierachy reasons).</span></td></tr>
<tr class="codeline" data-linenumber="60"><td class="num" id="LN60">60</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="61"><td class="num" id="LN61">61</td><td class="line"><span class='keyword'>class</span> ThreadShadow: <span class='keyword'>public</span> CHeapObj&lt;mtThread&gt; {</td></tr>
<tr class="codeline" data-linenumber="62"><td class="num" id="LN62">62</td><td class="line">  <span class='keyword'>friend</span> <span class='keyword'>class</span> VMStructs;</td></tr>
<tr class="codeline" data-linenumber="63"><td class="num" id="LN63">63</td><td class="line">  <span class='keyword'>friend</span> <span class='keyword'>class</span> JVMCIVMStructs;</td></tr>
<tr class="codeline" data-linenumber="64"><td class="num" id="LN64">64</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="65"><td class="num" id="LN65">65</td><td class="line"> <span class='keyword'>protected</span>:</td></tr>
<tr class="codeline" data-linenumber="66"><td class="num" id="LN66">66</td><td class="line">  oop  _pending_exception;                       <span class='comment'>// Thread has gc actions.</span></td></tr>
<tr class="codeline" data-linenumber="67"><td class="num" id="LN67">67</td><td class="line">  <span class='keyword'>const</span> <span class='keyword'>char</span>* _exception_file;                   <span class='comment'>// file information for exception (debugging only)</span></td></tr>
<tr class="codeline" data-linenumber="68"><td class="num" id="LN68">68</td><td class="line">  <span class='keyword'>int</span>         _exception_line;                   <span class='comment'>// line information for exception (debugging only)</span></td></tr>
<tr class="codeline" data-linenumber="69"><td class="num" id="LN69">69</td><td class="line">  <span class='keyword'>friend</span> <span class='keyword'>void</span> check_ThreadShadow();              <span class='comment'>// checks _pending_exception offset</span></td></tr>
<tr class="codeline" data-linenumber="70"><td class="num" id="LN70">70</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="71"><td class="num" id="LN71">71</td><td class="line">  <span class='comment'>// The following virtual exists only to force creation of a vtable.</span></td></tr>
<tr class="codeline" data-linenumber="72"><td class="num" id="LN72">72</td><td class="line">  <span class='comment'>// We need ThreadShadow to have a vtable, even in product builds,</span></td></tr>
<tr class="codeline" data-linenumber="73"><td class="num" id="LN73">73</td><td class="line">  <span class='comment'>// so that its layout will start at an offset of zero relative to Thread.</span></td></tr>
<tr class="codeline" data-linenumber="74"><td class="num" id="LN74">74</td><td class="line">  <span class='comment'>// Some C++ compilers are so "clever" that they put the ThreadShadow</span></td></tr>
<tr class="codeline" data-linenumber="75"><td class="num" id="LN75">75</td><td class="line">  <span class='comment'>// base class at offset 4 in Thread (after Thread's vtable), if they</span></td></tr>
<tr class="codeline" data-linenumber="76"><td class="num" id="LN76">76</td><td class="line">  <span class='comment'>// notice that Thread has a vtable but ThreadShadow does not.</span></td></tr>
<tr class="codeline" data-linenumber="77"><td class="num" id="LN77">77</td><td class="line">  <span class='keyword'>virtual</span> <span class='keyword'>void</span> unused_initial_virtual() { }</td></tr>
<tr class="codeline" data-linenumber="78"><td class="num" id="LN78">78</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="79"><td class="num" id="LN79">79</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="80"><td class="num" id="LN80">80</td><td class="line">  oop  pending_exception() <span class='keyword'>const</span>                 { <span class='keyword'>return</span> _pending_exception; }</td></tr>
<tr class="codeline" data-linenumber="81"><td class="num" id="LN81">81</td><td class="line">  <span class='keyword'>bool</span> has_pending_exception() <span class='keyword'>const</span>             { <span class="mrange"><span class='keyword'>return</span> <span class="mrange"><span class="mrange">_pending_exception != <span class='macro'>NULL<span class='macro_popup'>__null</span></span></span></span></span>; }</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path31" class="msg msgEvent" style="margin-left:59ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">31</div></td><td><div class="PathNav"><a href="#Path30" title="Previous event (30)">&#x2190;</a></div></td><td>Calling 'oop::operator!='</td><td><div class="PathNav"><a href="#Path32" title="Next event (32)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path34" class="msg msgEvent" style="margin-left:59ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">34</div></td><td><div class="PathNav"><a href="#Path33" title="Previous event (33)">&#x2190;</a></div></td><td>Returning from 'oop::operator!='</td><td><div class="PathNav"><a href="#Path35" title="Next event (35)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path35" class="msg msgEvent" style="margin-left:52ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">35</div></td><td><div class="PathNav"><a href="#Path34" title="Previous event (34)">&#x2190;</a></div></td><td>Returning zero, which participates in a condition later</td><td><div class="PathNav"><a href="#Path36" title="Next event (36)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="82"><td class="num" id="LN82">82</td><td class="line">  <span class='keyword'>const</span> <span class='keyword'>char</span>* exception_file() <span class='keyword'>const</span>             { <span class='keyword'>return</span> _exception_file; }</td></tr>
<tr class="codeline" data-linenumber="83"><td class="num" id="LN83">83</td><td class="line">  <span class='keyword'>int</span>  exception_line() <span class='keyword'>const</span>                    { <span class='keyword'>return</span> _exception_line; }</td></tr>
<tr class="codeline" data-linenumber="84"><td class="num" id="LN84">84</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="85"><td class="num" id="LN85">85</td><td class="line">  <span class='comment'>// Code generation support</span></td></tr>
<tr class="codeline" data-linenumber="86"><td class="num" id="LN86">86</td><td class="line">  <span class='keyword'>static</span> ByteSize pending_exception_offset()     { <span class='keyword'>return</span> <span class='macro'>byte_offset_of(ThreadShadow, _pending_exception)<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((ThreadShadow*)16)-&gt;<br>_pending_exception) - 16))</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="87"><td class="num" id="LN87">87</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="88"><td class="num" id="LN88">88</td><td class="line">  <span class='comment'>// use THROW whenever possible!</span></td></tr>
<tr class="codeline" data-linenumber="89"><td class="num" id="LN89">89</td><td class="line">  <span class='keyword'>void</span> set_pending_exception(oop exception, <span class='keyword'>const</span> <span class='keyword'>char</span>* file, <span class='keyword'>int</span> line);</td></tr>
<tr class="codeline" data-linenumber="90"><td class="num" id="LN90">90</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="91"><td class="num" id="LN91">91</td><td class="line">  <span class='comment'>// use CLEAR_PENDING_EXCEPTION whenever possible!</span></td></tr>
<tr class="codeline" data-linenumber="92"><td class="num" id="LN92">92</td><td class="line">  <span class='keyword'>void</span> clear_pending_exception();</td></tr>
<tr class="codeline" data-linenumber="93"><td class="num" id="LN93">93</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="94"><td class="num" id="LN94">94</td><td class="line">  <span class='comment'>// use CLEAR_PENDING_NONASYNC_EXCEPTION to clear probable nonasync exception.</span></td></tr>
<tr class="codeline" data-linenumber="95"><td class="num" id="LN95">95</td><td class="line">  <span class='keyword'>void</span> clear_pending_nonasync_exception();</td></tr>
<tr class="codeline" data-linenumber="96"><td class="num" id="LN96">96</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="97"><td class="num" id="LN97">97</td><td class="line">  ThreadShadow() : _pending_exception(<span class='macro'>NULL<span class='macro_popup'>__null</span></span>),</td></tr>
<tr class="codeline" data-linenumber="98"><td class="num" id="LN98">98</td><td class="line">                   _exception_file(<span class='macro'>NULL<span class='macro_popup'>__null</span></span>), _exception_line(0) {}</td></tr>
<tr class="codeline" data-linenumber="99"><td class="num" id="LN99">99</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="100"><td class="num" id="LN100">100</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="101"><td class="num" id="LN101">101</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="102"><td class="num" id="LN102">102</td><td class="line"><span class='comment'>// Exceptions is a helper class that encapsulates all operations</span></td></tr>
<tr class="codeline" data-linenumber="103"><td class="num" id="LN103">103</td><td class="line"><span class='comment'>// that require access to the thread interface and which are</span></td></tr>
<tr class="codeline" data-linenumber="104"><td class="num" id="LN104">104</td><td class="line"><span class='comment'>// relatively rare. The Exceptions operations should only be</span></td></tr>
<tr class="codeline" data-linenumber="105"><td class="num" id="LN105">105</td><td class="line"><span class='comment'>// used directly if the macros below are insufficient.</span></td></tr>
<tr class="codeline" data-linenumber="106"><td class="num" id="LN106">106</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="107"><td class="num" id="LN107">107</td><td class="line"><span class='keyword'>class</span> Exceptions {</td></tr>
<tr class="codeline" data-linenumber="108"><td class="num" id="LN108">108</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>bool</span> special_exception(JavaThread* thread, <span class='keyword'>const</span> <span class='keyword'>char</span>* file, <span class='keyword'>int</span> line, Handle exception);</td></tr>
<tr class="codeline" data-linenumber="109"><td class="num" id="LN109">109</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>bool</span> special_exception(JavaThread* thread, <span class='keyword'>const</span> <span class='keyword'>char</span>* file, <span class='keyword'>int</span> line, Symbol* name, <span class='keyword'>const</span> <span class='keyword'>char</span>* message);</td></tr>
<tr class="codeline" data-linenumber="110"><td class="num" id="LN110">110</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="111"><td class="num" id="LN111">111</td><td class="line">  <span class='comment'>// Count out of memory errors that are interesting in error diagnosis</span></td></tr>
<tr class="codeline" data-linenumber="112"><td class="num" id="LN112">112</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>volatile</span> <span class='keyword'>int</span> _out_of_memory_error_java_heap_errors;</td></tr>
<tr class="codeline" data-linenumber="113"><td class="num" id="LN113">113</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>volatile</span> <span class='keyword'>int</span> _out_of_memory_error_metaspace_errors;</td></tr>
<tr class="codeline" data-linenumber="114"><td class="num" id="LN114">114</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>volatile</span> <span class='keyword'>int</span> _out_of_memory_error_class_metaspace_errors;</td></tr>
<tr class="codeline" data-linenumber="115"><td class="num" id="LN115">115</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="116"><td class="num" id="LN116">116</td><td class="line">  <span class='comment'>// Count linkage errors</span></td></tr>
<tr class="codeline" data-linenumber="117"><td class="num" id="LN117">117</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>volatile</span> <span class='keyword'>int</span> _linkage_errors;</td></tr>
<tr class="codeline" data-linenumber="118"><td class="num" id="LN118">118</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="119"><td class="num" id="LN119">119</td><td class="line">  <span class='comment'>// this enum is defined to indicate whether it is safe to</span></td></tr>
<tr class="codeline" data-linenumber="120"><td class="num" id="LN120">120</td><td class="line">  <span class='comment'>// ignore the encoding scheme of the original message string.</span></td></tr>
<tr class="codeline" data-linenumber="121"><td class="num" id="LN121">121</td><td class="line">  <span class='keyword'>typedef</span> <span class='keyword'>enum</span> {</td></tr>
<tr class="codeline" data-linenumber="122"><td class="num" id="LN122">122</td><td class="line">    safe_to_utf8 = 0,</td></tr>
<tr class="codeline" data-linenumber="123"><td class="num" id="LN123">123</td><td class="line">    unsafe_to_utf8 = 1</td></tr>
<tr class="codeline" data-linenumber="124"><td class="num" id="LN124">124</td><td class="line">  } ExceptionMsgToUtf8Mode;</td></tr>
<tr class="codeline" data-linenumber="125"><td class="num" id="LN125">125</td><td class="line">  <span class='comment'>// Throw exceptions: w/o message, w/ message &amp; with formatted message.</span></td></tr>
<tr class="codeline" data-linenumber="126"><td class="num" id="LN126">126</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> _throw_oop(JavaThread* thread, <span class='keyword'>const</span> <span class='keyword'>char</span>* file, <span class='keyword'>int</span> line, oop exception);</td></tr>
<tr class="codeline" data-linenumber="127"><td class="num" id="LN127">127</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> _throw(JavaThread* thread, <span class='keyword'>const</span> <span class='keyword'>char</span>* file, <span class='keyword'>int</span> line, Handle exception, <span class='keyword'>const</span> <span class='keyword'>char</span>* msg = <span class='macro'>NULL<span class='macro_popup'>__null</span></span>);</td></tr>
<tr class="codeline" data-linenumber="128"><td class="num" id="LN128">128</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="129"><td class="num" id="LN129">129</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> _throw_msg(JavaThread* thread, <span class='keyword'>const</span> <span class='keyword'>char</span>* file, <span class='keyword'>int</span> line, Symbol* name, <span class='keyword'>const</span> <span class='keyword'>char</span>* message);</td></tr>
<tr class="codeline" data-linenumber="130"><td class="num" id="LN130">130</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> _throw_msg(JavaThread* thread, <span class='keyword'>const</span> <span class='keyword'>char</span>* file, <span class='keyword'>int</span> line, Symbol* name, <span class='keyword'>const</span> <span class='keyword'>char</span>* message,</td></tr>
<tr class="codeline" data-linenumber="131"><td class="num" id="LN131">131</td><td class="line">                         Handle loader, Handle protection_domain);</td></tr>
<tr class="codeline" data-linenumber="132"><td class="num" id="LN132">132</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="133"><td class="num" id="LN133">133</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> _throw_msg_cause(JavaThread* thread, <span class='keyword'>const</span> <span class='keyword'>char</span>* file, <span class='keyword'>int</span> line, Symbol* name, <span class='keyword'>const</span> <span class='keyword'>char</span>* message, Handle h_cause);</td></tr>
<tr class="codeline" data-linenumber="134"><td class="num" id="LN134">134</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> _throw_msg_cause(JavaThread* thread, <span class='keyword'>const</span> <span class='keyword'>char</span>* file, <span class='keyword'>int</span> line, Symbol* name, <span class='keyword'>const</span> <span class='keyword'>char</span>* message, Handle h_cause,</td></tr>
<tr class="codeline" data-linenumber="135"><td class="num" id="LN135">135</td><td class="line">                               Handle h_loader, Handle h_protection_domain);</td></tr>
<tr class="codeline" data-linenumber="136"><td class="num" id="LN136">136</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="137"><td class="num" id="LN137">137</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> _throw_cause(JavaThread* thread, <span class='keyword'>const</span> <span class='keyword'>char</span>* file, <span class='keyword'>int</span> line, Symbol* name, Handle h_cause);</td></tr>
<tr class="codeline" data-linenumber="138"><td class="num" id="LN138">138</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> _throw_cause(JavaThread* thread, <span class='keyword'>const</span> <span class='keyword'>char</span>* file, <span class='keyword'>int</span> line, Symbol* name, Handle h_cause,</td></tr>
<tr class="codeline" data-linenumber="139"><td class="num" id="LN139">139</td><td class="line">                           Handle h_loader, Handle h_protection_domain);</td></tr>
<tr class="codeline" data-linenumber="140"><td class="num" id="LN140">140</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="141"><td class="num" id="LN141">141</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> _throw_args(JavaThread* thread, <span class='keyword'>const</span> <span class='keyword'>char</span>* file, <span class='keyword'>int</span> line,</td></tr>
<tr class="codeline" data-linenumber="142"><td class="num" id="LN142">142</td><td class="line">                          Symbol* name, Symbol* signature,</td></tr>
<tr class="codeline" data-linenumber="143"><td class="num" id="LN143">143</td><td class="line">                          JavaCallArguments* args);</td></tr>
<tr class="codeline" data-linenumber="144"><td class="num" id="LN144">144</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="145"><td class="num" id="LN145">145</td><td class="line">  <span class='comment'>// There is no THROW... macro for this method. Caller should remember</span></td></tr>
<tr class="codeline" data-linenumber="146"><td class="num" id="LN146">146</td><td class="line">  <span class='comment'>// to do a return after calling it.</span></td></tr>
<tr class="codeline" data-linenumber="147"><td class="num" id="LN147">147</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> fthrow(JavaThread* thread, <span class='keyword'>const</span> <span class='keyword'>char</span>* file, <span class='keyword'>int</span> line, Symbol* name,</td></tr>
<tr class="codeline" data-linenumber="148"><td class="num" id="LN148">148</td><td class="line">                     <span class='keyword'>const</span> <span class='keyword'>char</span>* format, ...) <span class='macro'>ATTRIBUTE_PRINTF(5, 6)<span class='macro_popup'>__attribute__((format(printf, 5, 6)))</span></span>;</td></tr>
<tr class="codeline" data-linenumber="149"><td class="num" id="LN149">149</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="150"><td class="num" id="LN150">150</td><td class="line">  <span class='comment'>// Create and initialize a new exception</span></td></tr>
<tr class="codeline" data-linenumber="151"><td class="num" id="LN151">151</td><td class="line">  <span class='keyword'>static</span> Handle new_exception(JavaThread* thread, Symbol* name,</td></tr>
<tr class="codeline" data-linenumber="152"><td class="num" id="LN152">152</td><td class="line">                              Symbol* signature, JavaCallArguments* args,</td></tr>
<tr class="codeline" data-linenumber="153"><td class="num" id="LN153">153</td><td class="line">                              Handle loader, Handle protection_domain);</td></tr>
<tr class="codeline" data-linenumber="154"><td class="num" id="LN154">154</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="155"><td class="num" id="LN155">155</td><td class="line">  <span class='keyword'>static</span> Handle new_exception(JavaThread* thread, Symbol* name,</td></tr>
<tr class="codeline" data-linenumber="156"><td class="num" id="LN156">156</td><td class="line">                              Symbol* signature, JavaCallArguments* args,</td></tr>
<tr class="codeline" data-linenumber="157"><td class="num" id="LN157">157</td><td class="line">                              Handle cause,</td></tr>
<tr class="codeline" data-linenumber="158"><td class="num" id="LN158">158</td><td class="line">                              Handle loader, Handle protection_domain);</td></tr>
<tr class="codeline" data-linenumber="159"><td class="num" id="LN159">159</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="160"><td class="num" id="LN160">160</td><td class="line">  <span class='keyword'>static</span> Handle new_exception(JavaThread* thread, Symbol* name,</td></tr>
<tr class="codeline" data-linenumber="161"><td class="num" id="LN161">161</td><td class="line">                              Handle cause,</td></tr>
<tr class="codeline" data-linenumber="162"><td class="num" id="LN162">162</td><td class="line">                              Handle loader, Handle protection_domain,</td></tr>
<tr class="codeline" data-linenumber="163"><td class="num" id="LN163">163</td><td class="line">                              ExceptionMsgToUtf8Mode to_utf8_safe = safe_to_utf8);</td></tr>
<tr class="codeline" data-linenumber="164"><td class="num" id="LN164">164</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="165"><td class="num" id="LN165">165</td><td class="line">  <span class='keyword'>static</span> Handle new_exception(JavaThread* thread, Symbol* name,</td></tr>
<tr class="codeline" data-linenumber="166"><td class="num" id="LN166">166</td><td class="line">                              <span class='keyword'>const</span> <span class='keyword'>char</span>* message, Handle cause,</td></tr>
<tr class="codeline" data-linenumber="167"><td class="num" id="LN167">167</td><td class="line">                              Handle loader, Handle protection_domain,</td></tr>
<tr class="codeline" data-linenumber="168"><td class="num" id="LN168">168</td><td class="line">                              ExceptionMsgToUtf8Mode to_utf8_safe = safe_to_utf8);</td></tr>
<tr class="codeline" data-linenumber="169"><td class="num" id="LN169">169</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="170"><td class="num" id="LN170">170</td><td class="line">  <span class='keyword'>static</span> Handle new_exception(JavaThread* thread, Symbol* name,</td></tr>
<tr class="codeline" data-linenumber="171"><td class="num" id="LN171">171</td><td class="line">                              <span class='keyword'>const</span> <span class='keyword'>char</span>* message,</td></tr>
<tr class="codeline" data-linenumber="172"><td class="num" id="LN172">172</td><td class="line">                              ExceptionMsgToUtf8Mode to_utf8_safe = safe_to_utf8);</td></tr>
<tr class="codeline" data-linenumber="173"><td class="num" id="LN173">173</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="174"><td class="num" id="LN174">174</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> throw_stack_overflow_exception(JavaThread* thread, <span class='keyword'>const</span> <span class='keyword'>char</span>* file, <span class='keyword'>int</span> line, <span class='keyword'>const</span> methodHandle&amp; method);</td></tr>
<tr class="codeline" data-linenumber="175"><td class="num" id="LN175">175</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="176"><td class="num" id="LN176">176</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> throw_unsafe_access_internal_error(JavaThread* thread, <span class='keyword'>const</span> <span class='keyword'>char</span>* file, <span class='keyword'>int</span> line, <span class='keyword'>const</span> <span class='keyword'>char</span>* message);</td></tr>
<tr class="codeline" data-linenumber="177"><td class="num" id="LN177">177</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="178"><td class="num" id="LN178">178</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> wrap_dynamic_exception(<span class='keyword'>bool</span> is_indy, JavaThread* thread);</td></tr>
<tr class="codeline" data-linenumber="179"><td class="num" id="LN179">179</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="180"><td class="num" id="LN180">180</td><td class="line">  <span class='comment'>// Exception counting for error files of interesting exceptions that may have</span></td></tr>
<tr class="codeline" data-linenumber="181"><td class="num" id="LN181">181</td><td class="line">  <span class='comment'>// caused a problem for the jvm</span></td></tr>
<tr class="codeline" data-linenumber="182"><td class="num" id="LN182">182</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>volatile</span> <span class='keyword'>int</span> _stack_overflow_errors;</td></tr>
<tr class="codeline" data-linenumber="183"><td class="num" id="LN183">183</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="184"><td class="num" id="LN184">184</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>bool</span> has_exception_counts();</td></tr>
<tr class="codeline" data-linenumber="185"><td class="num" id="LN185">185</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> count_out_of_memory_exceptions(Handle exception);</td></tr>
<tr class="codeline" data-linenumber="186"><td class="num" id="LN186">186</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> print_exception_counts_on_error(outputStream* st);</td></tr>
<tr class="codeline" data-linenumber="187"><td class="num" id="LN187">187</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="188"><td class="num" id="LN188">188</td><td class="line">  <span class='comment'>// for AbortVMOnException flag</span></td></tr>
<tr class="codeline" data-linenumber="189"><td class="num" id="LN189">189</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> debug_check_abort(Handle exception, <span class='keyword'>const</span> <span class='keyword'>char</span>* message = <span class='macro'>NULL<span class='macro_popup'>__null</span></span>);</td></tr>
<tr class="codeline" data-linenumber="190"><td class="num" id="LN190">190</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> debug_check_abort_helper(Handle exception, <span class='keyword'>const</span> <span class='keyword'>char</span>* message = <span class='macro'>NULL<span class='macro_popup'>__null</span></span>);</td></tr>
<tr class="codeline" data-linenumber="191"><td class="num" id="LN191">191</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> debug_check_abort(<span class='keyword'>const</span> <span class='keyword'>char</span> *value_string, <span class='keyword'>const</span> <span class='keyword'>char</span>* message = <span class='macro'>NULL<span class='macro_popup'>__null</span></span>);</td></tr>
<tr class="codeline" data-linenumber="192"><td class="num" id="LN192">192</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="193"><td class="num" id="LN193">193</td><td class="line">  <span class='comment'>// for logging exceptions</span></td></tr>
<tr class="codeline" data-linenumber="194"><td class="num" id="LN194">194</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> log_exception(Handle exception, <span class='keyword'>const</span> <span class='keyword'>char</span>* message);</td></tr>
<tr class="codeline" data-linenumber="195"><td class="num" id="LN195">195</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="196"><td class="num" id="LN196">196</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="197"><td class="num" id="LN197">197</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="198"><td class="num" id="LN198">198</td><td class="line"><span class='comment'>// The THREAD &amp; TRAPS macros facilitate the declaration of functions that throw exceptions.</span></td></tr>
<tr class="codeline" data-linenumber="199"><td class="num" id="LN199">199</td><td class="line"><span class='comment'>// Convention: Use the TRAPS macro as the last argument of such a function; e.g.:</span></td></tr>
<tr class="codeline" data-linenumber="200"><td class="num" id="LN200">200</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="201"><td class="num" id="LN201">201</td><td class="line"><span class='comment'>// int this_function_may_trap(int x, float y, TRAPS)</span></td></tr>
<tr class="codeline" data-linenumber="202"><td class="num" id="LN202">202</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="203"><td class="num" id="LN203">203</td><td class="line"><span class='directive'>#define <span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span> __the_thread__</span></td></tr>
<tr class="codeline" data-linenumber="204"><td class="num" id="LN204">204</td><td class="line"><span class='directive'>#define <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>  JavaThread* <span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span></span></td></tr>
<tr class="codeline" data-linenumber="205"><td class="num" id="LN205">205</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="206"><td class="num" id="LN206">206</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="207"><td class="num" id="LN207">207</td><td class="line"><span class='comment'>// The CHECK... macros should be used to pass along a THREAD reference and to check for pending</span></td></tr>
<tr class="codeline" data-linenumber="208"><td class="num" id="LN208">208</td><td class="line"><span class='comment'>// exceptions. In special situations it is necessary to handle pending exceptions explicitly,</span></td></tr>
<tr class="codeline" data-linenumber="209"><td class="num" id="LN209">209</td><td class="line"><span class='comment'>// in these cases the PENDING_EXCEPTION helper macros should be used.</span></td></tr>
<tr class="codeline" data-linenumber="210"><td class="num" id="LN210">210</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="211"><td class="num" id="LN211">211</td><td class="line"><span class='comment'>// Macro naming conventions: Macros that end with _ require a result value to be returned. They</span></td></tr>
<tr class="codeline" data-linenumber="212"><td class="num" id="LN212">212</td><td class="line"><span class='comment'>// are for functions with non-void result type. The result value is usually ignored because of</span></td></tr>
<tr class="codeline" data-linenumber="213"><td class="num" id="LN213">213</td><td class="line"><span class='comment'>// the exception and is only needed for syntactic correctness. The _0 ending is a shortcut for</span></td></tr>
<tr class="codeline" data-linenumber="214"><td class="num" id="LN214">214</td><td class="line"><span class='comment'>// _(0) since this is a frequent case. Example:</span></td></tr>
<tr class="codeline" data-linenumber="215"><td class="num" id="LN215">215</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="216"><td class="num" id="LN216">216</td><td class="line"><span class='comment'>// int result = this_function_may_trap(x_arg, y_arg, CHECK_0);</span></td></tr>
<tr class="codeline" data-linenumber="217"><td class="num" id="LN217">217</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="218"><td class="num" id="LN218">218</td><td class="line"><span class='comment'>// CAUTION: make sure that the function call using a CHECK macro is not the only statement of a</span></td></tr>
<tr class="codeline" data-linenumber="219"><td class="num" id="LN219">219</td><td class="line"><span class='comment'>// conditional branch w/o enclosing {} braces, since the CHECK macros expand into several state-</span></td></tr>
<tr class="codeline" data-linenumber="220"><td class="num" id="LN220">220</td><td class="line"><span class='comment'>// ments! Also make sure it is not used on a function call that is part of a return statement!</span></td></tr>
<tr class="codeline" data-linenumber="221"><td class="num" id="LN221">221</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="222"><td class="num" id="LN222">222</td><td class="line"><span class='directive'>#define <span class='macro'>PENDING_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;pending_exception())</span></span>                        (((ThreadShadow*)<span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>)-&gt;pending_exception())</span></td></tr>
<tr class="codeline" data-linenumber="223"><td class="num" id="LN223">223</td><td class="line"><span class='directive'>#define <span class='macro'>HAS_PENDING_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;has_pending_exception())</span></span>                    (((ThreadShadow*)<span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>)-&gt;has_pending_exception())</span></td></tr>
<tr class="codeline" data-linenumber="224"><td class="num" id="LN224">224</td><td class="line"><span class='directive'>#define <span class='macro'>CLEAR_PENDING_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;clear_pending_exception(<br>))</span></span>                  (((ThreadShadow*)<span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>)-&gt;clear_pending_exception())</span></td></tr>
<tr class="codeline" data-linenumber="225"><td class="num" id="LN225">225</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="226"><td class="num" id="LN226">226</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return ; (void)(0</span></span>                                    <span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>); if (<span class='macro'>HAS_PENDING_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;has_pending_exception())</span></span>) return       ; (void)(0</span></td></tr>
<tr class="codeline" data-linenumber="227"><td class="num" id="LN227">227</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_(result)<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return result; (void)(0</span></span>                           <span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>); if (<span class='macro'>HAS_PENDING_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;has_pending_exception())</span></span>) return result; (void)(0</span></td></tr>
<tr class="codeline" data-linenumber="228"><td class="num" id="LN228">228</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_0<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return 0; (void)(0</span></span>                                  <span class='macro'>CHECK_(0)<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return 0; (void)(0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="229"><td class="num" id="LN229">229</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_NH<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return Handle(); (void)(0</span></span>                                 <span class='macro'>CHECK_(Handle())<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return Handle(); (void)(0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="230"><td class="num" id="LN230">230</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_NULL<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return __null; (void)(0</span></span>                               <span class='macro'>CHECK_(NULL)<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return __null; (void)(0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="231"><td class="num" id="LN231">231</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_false<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return false; (void)(0</span></span>                              <span class='macro'>CHECK_(false)<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return false; (void)(0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="232"><td class="num" id="LN232">232</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_JNI_ERR<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return (-1); (void)(0</span></span>                            <span class='macro'>CHECK_(JNI_ERR)<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) return (-1); (void)(0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="233"><td class="num" id="LN233">233</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="234"><td class="num" id="LN234">234</td><td class="line"><span class='comment'>// CAUTION: These macros clears all exceptions including async exceptions, use it with caution.</span></td></tr>
<tr class="codeline" data-linenumber="235"><td class="num" id="LN235">235</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_AND_CLEAR<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_exception<br>()); return; } (void)(0</span></span>                         <span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>); if (<span class='macro'>HAS_PENDING_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;has_pending_exception())</span></span>) { <span class='macro'>CLEAR_PENDING_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;clear_pending_exception(<br>))</span></span>; return;        } (void)(0</span></td></tr>
<tr class="codeline" data-linenumber="236"><td class="num" id="LN236">236</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_AND_CLEAR_(result)<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_exception<br>()); return result; } (void)(0</span></span>                <span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>); if (<span class='macro'>HAS_PENDING_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;has_pending_exception())</span></span>) { <span class='macro'>CLEAR_PENDING_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;clear_pending_exception(<br>))</span></span>; return result; } (void)(0</span></td></tr>
<tr class="codeline" data-linenumber="237"><td class="num" id="LN237">237</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_AND_CLEAR_0<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_exception<br>()); return 0; } (void)(0</span></span>                       <span class='macro'>CHECK_AND_CLEAR_(0)<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_exception<br>()); return 0; } (void)(0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="238"><td class="num" id="LN238">238</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_AND_CLEAR_NH<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_exception<br>()); return Handle(); } (void)(0</span></span>                      <span class='macro'>CHECK_AND_CLEAR_(Handle())<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_exception<br>()); return Handle(); } (void)(0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="239"><td class="num" id="LN239">239</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_AND_CLEAR_NULL<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_exception<br>()); return __null; } (void)(0</span></span>                    <span class='macro'>CHECK_AND_CLEAR_(NULL)<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_exception<br>()); return __null; } (void)(0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="240"><td class="num" id="LN240">240</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_AND_CLEAR_false<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_exception<br>()); return false; } (void)(0</span></span>                   <span class='macro'>CHECK_AND_CLEAR_(false)<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_exception<br>()); return false; } (void)(0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="241"><td class="num" id="LN241">241</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="242"><td class="num" id="LN242">242</td><td class="line"><span class='comment'>// CAUTION: These macros clears all exceptions except probable async exceptions j.l.InternalError and j.l.ThreadDeath.</span></td></tr>
<tr class="codeline" data-linenumber="243"><td class="num" id="LN243">243</td><td class="line"><span class='comment'>// So use it with caution.</span></td></tr>
<tr class="codeline" data-linenumber="244"><td class="num" id="LN244">244</td><td class="line"><span class='directive'>#define <span class='macro'>CLEAR_PENDING_NONASYNC_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;clear_pending_nonasync_exception<br>())</span></span>        (((ThreadShadow*)<span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>)-&gt;clear_pending_nonasync_exception())</span></td></tr>
<tr class="codeline" data-linenumber="245"><td class="num" id="LN245">245</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_AND_CLEAR_NONASYNC<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_nonasync_exception<br>()); return; } (void)(0</span></span>                <span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>); if (<span class='macro'>HAS_PENDING_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;has_pending_exception())</span></span>) { <span class='macro'>CLEAR_PENDING_NONASYNC_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;clear_pending_nonasync_exception<br>())</span></span>; return; } (void)(0</span></td></tr>
<tr class="codeline" data-linenumber="246"><td class="num" id="LN246">246</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_AND_CLEAR_NONASYNC_(result)<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_nonasync_exception<br>()); return result; } (void)(0</span></span>       <span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>); if (<span class='macro'>HAS_PENDING_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;has_pending_exception())</span></span>) { <span class='macro'>CLEAR_PENDING_NONASYNC_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;clear_pending_nonasync_exception<br>())</span></span>; return result; } (void)(0</span></td></tr>
<tr class="codeline" data-linenumber="247"><td class="num" id="LN247">247</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_AND_CLEAR_NONASYNC_0<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_nonasync_exception<br>()); return 0; } (void)(0</span></span>              <span class='macro'>CHECK_AND_CLEAR_NONASYNC_(0)<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_nonasync_exception<br>()); return 0; } (void)(0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="248"><td class="num" id="LN248">248</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_AND_CLEAR_NONASYNC_NH<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_nonasync_exception<br>()); return Handle(); } (void)(0</span></span>             <span class='macro'>CHECK_AND_CLEAR_NONASYNC_(Handle())<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_nonasync_exception<br>()); return Handle(); } (void)(0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="249"><td class="num" id="LN249">249</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_AND_CLEAR_NONASYNC_NULL<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_nonasync_exception<br>()); return __null; } (void)(0</span></span>           <span class='macro'>CHECK_AND_CLEAR_NONASYNC_(NULL)<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_nonasync_exception<br>()); return __null; } (void)(0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="250"><td class="num" id="LN250">250</td><td class="line"><span class='directive'>#define <span class='macro'>CHECK_AND_CLEAR_NONASYNC_false<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_nonasync_exception<br>()); return false; } (void)(0</span></span>          <span class='macro'>CHECK_AND_CLEAR_NONASYNC_(false)<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { (((ThreadShadow*)__the_thread__)-&gt;clear_pending_nonasync_exception<br>()); return false; } (void)(0</span></span></span></td></tr>
<tr class="codeline" data-linenumber="251"><td class="num" id="LN251">251</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="252"><td class="num" id="LN252">252</td><td class="line"><span class='comment'>// The THROW... macros should be used to throw an exception. They require a THREAD variable to be</span></td></tr>
<tr class="codeline" data-linenumber="253"><td class="num" id="LN253">253</td><td class="line"><span class='comment'>// visible within the scope containing the THROW. Usually this is achieved by declaring the function</span></td></tr>
<tr class="codeline" data-linenumber="254"><td class="num" id="LN254">254</td><td class="line"><span class='comment'>// with a TRAPS argument.</span></td></tr>
<tr class="codeline" data-linenumber="255"><td class="num" id="LN255">255</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="256"><td class="num" id="LN256">256</td><td class="line"><span class='directive'>#define <span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 256</span></span>                      <span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>, <span class='macro'>__FILE__<span class='macro_popup'>"/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"</span></span>, <span class='macro'>__LINE__<span class='macro_popup'>256</span></span></span></td></tr>
<tr class="codeline" data-linenumber="257"><td class="num" id="LN257">257</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="258"><td class="num" id="LN258">258</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_OOP(e)<span class='macro_popup'>{ Exceptions::_throw_oop(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 258, e); return; }</span></span>                                \</span></td></tr>
<tr class="codeline" data-linenumber="259"><td class="num" id="LN259">259</td><td class="line">  <span class='directive'>{ Exceptions::_throw_oop(<span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 259</span></span>, e);                             return;  }</span></td></tr>
<tr class="codeline" data-linenumber="260"><td class="num" id="LN260">260</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="261"><td class="num" id="LN261">261</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_HANDLE(e)<span class='macro_popup'>{ Exceptions::_throw(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 261, e); return; }</span></span>                                \</span></td></tr>
<tr class="codeline" data-linenumber="262"><td class="num" id="LN262">262</td><td class="line">  <span class='directive'>{ Exceptions::_throw(<span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 262</span></span>, e);                             return;  }</span></td></tr>
<tr class="codeline" data-linenumber="263"><td class="num" id="LN263">263</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="264"><td class="num" id="LN264">264</td><td class="line"><span class='directive'>#define <span class='macro'>THROW(name)<span class='macro_popup'>{ Exceptions::_throw_msg(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 264, name, __null); return; }</span></span>                                 \</span></td></tr>
<tr class="codeline" data-linenumber="265"><td class="num" id="LN265">265</td><td class="line">  <span class='directive'>{ Exceptions::_throw_msg(<span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 265</span></span>, name, <span class='macro'>NULL<span class='macro_popup'>__null</span></span>); return;  }</span></td></tr>
<tr class="codeline" data-linenumber="266"><td class="num" id="LN266">266</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="267"><td class="num" id="LN267">267</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_MSG(name, message)<span class='macro_popup'>{ Exceptions::_throw_msg(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 267, name, message); return; }</span></span>                    \</span></td></tr>
<tr class="codeline" data-linenumber="268"><td class="num" id="LN268">268</td><td class="line">  <span class='directive'>{ Exceptions::_throw_msg(<span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 268</span></span>, name, message); return;  }</span></td></tr>
<tr class="codeline" data-linenumber="269"><td class="num" id="LN269">269</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="270"><td class="num" id="LN270">270</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_CAUSE(name, cause)<span class='macro_popup'>{ Exceptions::_throw_cause(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 270, name, cause); return; }</span></span>   \</span></td></tr>
<tr class="codeline" data-linenumber="271"><td class="num" id="LN271">271</td><td class="line">  <span class='directive'>{ Exceptions::_throw_cause(<span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 271</span></span>, name, cause); return; }</span></td></tr>
<tr class="codeline" data-linenumber="272"><td class="num" id="LN272">272</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="273"><td class="num" id="LN273">273</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_MSG_LOADER(name, message, loader, protection_domain)<span class='macro_popup'>{ Exceptions::_throw_msg(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 273, name, message, loader, protection_domain); return; }</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="274"><td class="num" id="LN274">274</td><td class="line">  <span class='directive'>{ Exceptions::_throw_msg(<span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 274</span></span>, name, message, loader, protection_domain); return;  }</span></td></tr>
<tr class="codeline" data-linenumber="275"><td class="num" id="LN275">275</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="276"><td class="num" id="LN276">276</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_ARG(name, signature, args)<span class='macro_popup'>{ Exceptions::_throw_args(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 276, name, signature, args); return; }</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="277"><td class="num" id="LN277">277</td><td class="line">  <span class='directive'>{ Exceptions::_throw_args(<span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 277</span></span>, name, signature, args);   return; }</span></td></tr>
<tr class="codeline" data-linenumber="278"><td class="num" id="LN278">278</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="279"><td class="num" id="LN279">279</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_OOP_(e, result)<span class='macro_popup'>{ Exceptions::_throw_oop(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 279, e); return result; }</span></span>                       \</span></td></tr>
<tr class="codeline" data-linenumber="280"><td class="num" id="LN280">280</td><td class="line">  <span class='directive'>{ Exceptions::_throw_oop(<span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 280</span></span>, e);                           return result; }</span></td></tr>
<tr class="codeline" data-linenumber="281"><td class="num" id="LN281">281</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="282"><td class="num" id="LN282">282</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_HANDLE_(e, result)<span class='macro_popup'>{ Exceptions::_throw(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 282, e); return result; }</span></span>                       \</span></td></tr>
<tr class="codeline" data-linenumber="283"><td class="num" id="LN283">283</td><td class="line">  <span class='directive'>{ Exceptions::_throw(<span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 283</span></span>, e);                           return result; }</span></td></tr>
<tr class="codeline" data-linenumber="284"><td class="num" id="LN284">284</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="285"><td class="num" id="LN285">285</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_(name, result)<span class='macro_popup'>{ Exceptions::_throw_msg(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 285, name, __null); return result; }</span></span>                        \</span></td></tr>
<tr class="codeline" data-linenumber="286"><td class="num" id="LN286">286</td><td class="line">  <span class='directive'>{ Exceptions::_throw_msg(<span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 286</span></span>, name, <span class='macro'>NULL<span class='macro_popup'>__null</span></span>); return result; }</span></td></tr>
<tr class="codeline" data-linenumber="287"><td class="num" id="LN287">287</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="288"><td class="num" id="LN288">288</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_MSG_(name, message, result)<span class='macro_popup'>{ Exceptions::_throw_msg(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 288, name, message); return result; }</span></span>           \</span></td></tr>
<tr class="codeline" data-linenumber="289"><td class="num" id="LN289">289</td><td class="line">  <span class='directive'>{ Exceptions::_throw_msg(<span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 289</span></span>, name, message); return result; }</span></td></tr>
<tr class="codeline" data-linenumber="290"><td class="num" id="LN290">290</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="291"><td class="num" id="LN291">291</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_MSG_LOADER_(name, message, loader, protection_domain, result)<span class='macro_popup'>{ Exceptions::_throw_msg(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 291, name, message, loader, protection_domain); return result<br>; }</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="292"><td class="num" id="LN292">292</td><td class="line">  <span class='directive'>{ Exceptions::_throw_msg(<span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 292</span></span>, name, message, loader, protection_domain); return result; }</span></td></tr>
<tr class="codeline" data-linenumber="293"><td class="num" id="LN293">293</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="294"><td class="num" id="LN294">294</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_ARG_(name, signature, args, result)<span class='macro_popup'>{ Exceptions::_throw_args(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 294, name, signature, args); return result; }</span></span> \</span></td></tr>
<tr class="codeline" data-linenumber="295"><td class="num" id="LN295">295</td><td class="line">  <span class='directive'>{ Exceptions::_throw_args(<span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 295</span></span>, name, signature, args); return result; }</span></td></tr>
<tr class="codeline" data-linenumber="296"><td class="num" id="LN296">296</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="297"><td class="num" id="LN297">297</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_MSG_CAUSE(name, message, cause)<span class='macro_popup'>{ Exceptions::_throw_msg_cause(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 297, name, message, cause); return; }</span></span>   \</span></td></tr>
<tr class="codeline" data-linenumber="298"><td class="num" id="LN298">298</td><td class="line">  <span class='directive'>{ Exceptions::_throw_msg_cause(<span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 298</span></span>, name, message, cause); return; }</span></td></tr>
<tr class="codeline" data-linenumber="299"><td class="num" id="LN299">299</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="300"><td class="num" id="LN300">300</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_MSG_CAUSE_(name, message, cause, result)<span class='macro_popup'>{ Exceptions::_throw_msg_cause(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 300, name, message, cause); return result; }</span></span>   \</span></td></tr>
<tr class="codeline" data-linenumber="301"><td class="num" id="LN301">301</td><td class="line">  <span class='directive'>{ Exceptions::_throw_msg_cause(<span class='macro'>THREAD_AND_LOCATION<span class='macro_popup'>__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 301</span></span>, name, message, cause); return result; }</span></td></tr>
<tr class="codeline" data-linenumber="302"><td class="num" id="LN302">302</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="303"><td class="num" id="LN303">303</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="304"><td class="num" id="LN304">304</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_OOP_0(e)<span class='macro_popup'>{ Exceptions::_throw_oop(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 304, e); return 0; }</span></span>                      <span class='macro'>THROW_OOP_(e, 0)<span class='macro_popup'>{ Exceptions::_throw_oop(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 304, e); return 0; }</span></span></span></td></tr>
<tr class="codeline" data-linenumber="305"><td class="num" id="LN305">305</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_HANDLE_0(e)<span class='macro_popup'>{ Exceptions::_throw(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 305, e); return 0; }</span></span>                   <span class='macro'>THROW_HANDLE_(e, 0)<span class='macro_popup'>{ Exceptions::_throw(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 305, e); return 0; }</span></span></span></td></tr>
<tr class="codeline" data-linenumber="306"><td class="num" id="LN306">306</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_0(name)<span class='macro_popup'>{ Exceptions::_throw_msg(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 306, name, __null); return 0; }</span></span>                       <span class='macro'>THROW_(name, 0)<span class='macro_popup'>{ Exceptions::_throw_msg(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 306, name, __null); return 0; }</span></span></span></td></tr>
<tr class="codeline" data-linenumber="307"><td class="num" id="LN307">307</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_MSG_0(name, message)<span class='macro_popup'>{ Exceptions::_throw_msg(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 307, name, message); return 0; }</span></span>          <span class='macro'>THROW_MSG_(name, message, 0)<span class='macro_popup'>{ Exceptions::_throw_msg(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 307, name, message); return 0; }</span></span></span></td></tr>
<tr class="codeline" data-linenumber="308"><td class="num" id="LN308">308</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_WRAPPED_0(name, oop_to_wrap)<span class='macro_popup'>THROW_WRAPPED_(name, oop_to_wrap, 0)</span></span>  THROW_WRAPPED_(name, oop_to_wrap, 0)</span></td></tr>
<tr class="codeline" data-linenumber="309"><td class="num" id="LN309">309</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_ARG_0(name, signature, arg)<span class='macro_popup'>{ Exceptions::_throw_args(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 309, name, signature, arg); return 0; }</span></span>   <span class='macro'>THROW_ARG_(name, signature, arg, 0)<span class='macro_popup'>{ Exceptions::_throw_args(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 309, name, signature, arg); return 0; }</span></span></span></td></tr>
<tr class="codeline" data-linenumber="310"><td class="num" id="LN310">310</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_MSG_CAUSE_0(name, message, cause)<span class='macro_popup'>{ Exceptions::_throw_msg_cause(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 310, name, message, cause); return 0; }</span></span> <span class='macro'>THROW_MSG_CAUSE_(name, message, cause, 0)<span class='macro_popup'>{ Exceptions::_throw_msg_cause(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 310, name, message, cause); return 0; }</span></span></span></td></tr>
<tr class="codeline" data-linenumber="311"><td class="num" id="LN311">311</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_MSG_CAUSE_NULL(name, message, cause)<span class='macro_popup'>{ Exceptions::_throw_msg_cause(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 311, name, message, cause); return __null; }</span></span> <span class='macro'>THROW_MSG_CAUSE_(name, message, cause, NULL)<span class='macro_popup'>{ Exceptions::_throw_msg_cause(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 311, name, message, cause); return __null; }</span></span></span></td></tr>
<tr class="codeline" data-linenumber="312"><td class="num" id="LN312">312</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="313"><td class="num" id="LN313">313</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_NULL(name)<span class='macro_popup'>{ Exceptions::_throw_msg(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 313, name, __null); return __null; }</span></span>                    <span class='macro'>THROW_(name, NULL)<span class='macro_popup'>{ Exceptions::_throw_msg(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 313, name, __null); return __null; }</span></span></span></td></tr>
<tr class="codeline" data-linenumber="314"><td class="num" id="LN314">314</td><td class="line"><span class='directive'>#define <span class='macro'>THROW_MSG_NULL(name, message)<span class='macro_popup'>{ Exceptions::_throw_msg(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 314, name, message); return __null; }</span></span>       <span class='macro'>THROW_MSG_(name, message, NULL)<span class='macro_popup'>{ Exceptions::_throw_msg(__the_thread__, "/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 314, name, message); return __null; }</span></span></span></td></tr>
<tr class="codeline" data-linenumber="315"><td class="num" id="LN315">315</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="316"><td class="num" id="LN316">316</td><td class="line"><span class='comment'>// The CATCH macro checks that no exception has been thrown by a function; it is used at</span></td></tr>
<tr class="codeline" data-linenumber="317"><td class="num" id="LN317">317</td><td class="line"><span class='comment'>// call sites about which is statically known that the callee cannot throw an exception</span></td></tr>
<tr class="codeline" data-linenumber="318"><td class="num" id="LN318">318</td><td class="line"><span class='comment'>// even though it is declared with TRAPS.</span></td></tr>
<tr class="codeline" data-linenumber="319"><td class="num" id="LN319">319</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="320"><td class="num" id="LN320">320</td><td class="line"><span class='directive'>#define <span class='macro'>CATCH<span class='macro_popup'>__the_thread__); if ((((ThreadShadow*)__the_thread__)-&gt;has_pending_exception<br>())) { oop ex = (((ThreadShadow*)__the_thread__)-&gt;pending_exception<br>()); (((ThreadShadow*)__the_thread__)-&gt;clear_pending_exception<br>()); ex-&gt;print(); do { if (!(false)) { (*g_assert_poison) =<br> 'X';; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 320, "assert(" "false" ") failed", "CATCH"); ::breakpoint()<br>; } } while (0); } (void)(0</span></span>                              \</span></td></tr>
<tr class="codeline" data-linenumber="321"><td class="num" id="LN321">321</td><td class="line">  <span class='directive'><span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>); if (<span class='macro'>HAS_PENDING_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;has_pending_exception())</span></span>) {    \</span></td></tr>
<tr class="codeline" data-linenumber="322"><td class="num" id="LN322">322</td><td class="line">    <span class='directive'>oop ex = <span class='macro'>PENDING_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;pending_exception())</span></span>;            \</span></td></tr>
<tr class="codeline" data-linenumber="323"><td class="num" id="LN323">323</td><td class="line">    <span class='directive'><span class='macro'>CLEAR_PENDING_EXCEPTION<span class='macro_popup'>(((ThreadShadow*)__the_thread__)-&gt;clear_pending_exception(<br>))</span></span>;               \</span></td></tr>
<tr class="codeline" data-linenumber="324"><td class="num" id="LN324">324</td><td class="line">    <span class='directive'><span class='macro'>DEBUG_ONLY(ex-&gt;print();)<span class='macro_popup'>ex-&gt;print();</span></span>               \</span></td></tr>
<tr class="codeline" data-linenumber="325"><td class="num" id="LN325">325</td><td class="line">    <span class='directive'><span class='macro'>assert(false, "CATCH")<span class='macro_popup'>do { if (!(false)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/utilities/exceptions.hpp"<br>, 325, "assert(" "false" ") failed", "CATCH"); ::breakpoint()<br>; } } while (0)</span></span>;                \</span></td></tr>
<tr class="codeline" data-linenumber="326"><td class="num" id="LN326">326</td><td class="line">  <span class='directive'>} (void)(0</span></td></tr>
<tr class="codeline" data-linenumber="327"><td class="num" id="LN327">327</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="328"><td class="num" id="LN328">328</td><td class="line"><span class='comment'>// ExceptionMark is a stack-allocated helper class for local exception handling.</span></td></tr>
<tr class="codeline" data-linenumber="329"><td class="num" id="LN329">329</td><td class="line"><span class='comment'>// It is used with the EXCEPTION_MARK macro.</span></td></tr>
<tr class="codeline" data-linenumber="330"><td class="num" id="LN330">330</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="331"><td class="num" id="LN331">331</td><td class="line"><span class='keyword'>class</span> ExceptionMark {</td></tr>
<tr class="codeline" data-linenumber="332"><td class="num" id="LN332">332</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="333"><td class="num" id="LN333">333</td><td class="line">  JavaThread* _thread;</td></tr>
<tr class="codeline" data-linenumber="334"><td class="num" id="LN334">334</td><td class="line">  <span class='keyword'>inline</span> <span class='keyword'>void</span> check_no_pending_exception();</td></tr>
<tr class="codeline" data-linenumber="335"><td class="num" id="LN335">335</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="336"><td class="num" id="LN336">336</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="337"><td class="num" id="LN337">337</td><td class="line">  ExceptionMark();</td></tr>
<tr class="codeline" data-linenumber="338"><td class="num" id="LN338">338</td><td class="line">  ExceptionMark(JavaThread* thread);</td></tr>
<tr class="codeline" data-linenumber="339"><td class="num" id="LN339">339</td><td class="line">  ~ExceptionMark();</td></tr>
<tr class="codeline" data-linenumber="340"><td class="num" id="LN340">340</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="341"><td class="num" id="LN341">341</td><td class="line">  JavaThread* thread() {</td></tr>
<tr class="codeline" data-linenumber="342"><td class="num" id="LN342">342</td><td class="line">    <span class='keyword'>return</span> _thread;</td></tr>
<tr class="codeline" data-linenumber="343"><td class="num" id="LN343">343</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="344"><td class="num" id="LN344">344</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="345"><td class="num" id="LN345">345</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="346"><td class="num" id="LN346">346</td><td class="line"><span class='comment'>// Use an EXCEPTION_MARK for 'local' exceptions. EXCEPTION_MARK makes sure that no</span></td></tr>
<tr class="codeline" data-linenumber="347"><td class="num" id="LN347">347</td><td class="line"><span class='comment'>// pending exception exists upon entering its scope and tests that no pending exception</span></td></tr>
<tr class="codeline" data-linenumber="348"><td class="num" id="LN348">348</td><td class="line"><span class='comment'>// exists when leaving the scope.</span></td></tr>
<tr class="codeline" data-linenumber="349"><td class="num" id="LN349">349</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="350"><td class="num" id="LN350">350</td><td class="line"><span class='comment'>// See also preserveException.hpp for PreserveExceptionMark</span></td></tr>
<tr class="codeline" data-linenumber="351"><td class="num" id="LN351">351</td><td class="line"><span class='comment'>// which preserves pre-existing exceptions and does not allow new</span></td></tr>
<tr class="codeline" data-linenumber="352"><td class="num" id="LN352">352</td><td class="line"><span class='comment'>// exceptions.</span></td></tr>
<tr class="codeline" data-linenumber="353"><td class="num" id="LN353">353</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="354"><td class="num" id="LN354">354</td><td class="line"><span class='directive'>#define <span class='macro'>EXCEPTION_MARK<span class='macro_popup'>ExceptionMark __em; JavaThread* __the_thread__ = __em.thread(<br>);</span></span>                           ExceptionMark __em; JavaThread* <span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span> = __em.thread();</span></td></tr>
<tr class="codeline" data-linenumber="355"><td class="num" id="LN355">355</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="356"><td class="num" id="LN356">356</td><td class="line"><span class='directive'>#endif // SHARE_UTILITIES_EXCEPTIONS_HPP</span></td></tr>
</table><hr class=divider>
<div id=File31794>
<div class=FileNav><a href="#File36877">&#x2190;</a></div><h4 class=FileName>/home/daniel/Projects/java/jdk/src/hotspot/share/oops/oopsHierarchy.hpp</h4>
<div class=FileNav><a href="#File48751">&#x2192;</a></div></div>
<table class="code" data-fileid="31794">
<tr class="codeline" data-linenumber="1"><td class="num" id="LN1">1</td><td class="line"><span class='comment'>/*</span></td></tr>
<tr class="codeline" data-linenumber="2"><td class="num" id="LN2">2</td><td class="line"> <span class='comment'>* Copyright (c) 1997, 2020, Oracle and/or its affiliates. All rights reserved.</span></td></tr>
<tr class="codeline" data-linenumber="3"><td class="num" id="LN3">3</td><td class="line"> <span class='comment'>* DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.</span></td></tr>
<tr class="codeline" data-linenumber="4"><td class="num" id="LN4">4</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="5"><td class="num" id="LN5">5</td><td class="line"> <span class='comment'>* This code is free software; you can redistribute it and/or modify it</span></td></tr>
<tr class="codeline" data-linenumber="6"><td class="num" id="LN6">6</td><td class="line"> <span class='comment'>* under the terms of the GNU General Public License version 2 only, as</span></td></tr>
<tr class="codeline" data-linenumber="7"><td class="num" id="LN7">7</td><td class="line"> <span class='comment'>* published by the Free Software Foundation.</span></td></tr>
<tr class="codeline" data-linenumber="8"><td class="num" id="LN8">8</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="9"><td class="num" id="LN9">9</td><td class="line"> <span class='comment'>* This code is distributed in the hope that it will be useful, but WITHOUT</span></td></tr>
<tr class="codeline" data-linenumber="10"><td class="num" id="LN10">10</td><td class="line"> <span class='comment'>* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span></td></tr>
<tr class="codeline" data-linenumber="11"><td class="num" id="LN11">11</td><td class="line"> <span class='comment'>* FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License</span></td></tr>
<tr class="codeline" data-linenumber="12"><td class="num" id="LN12">12</td><td class="line"> <span class='comment'>* version 2 for more details (a copy is included in the LICENSE file that</span></td></tr>
<tr class="codeline" data-linenumber="13"><td class="num" id="LN13">13</td><td class="line"> <span class='comment'>* accompanied this code).</span></td></tr>
<tr class="codeline" data-linenumber="14"><td class="num" id="LN14">14</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="15"><td class="num" id="LN15">15</td><td class="line"> <span class='comment'>* You should have received a copy of the GNU General Public License version</span></td></tr>
<tr class="codeline" data-linenumber="16"><td class="num" id="LN16">16</td><td class="line"> <span class='comment'>* 2 along with this work; if not, write to the Free Software Foundation,</span></td></tr>
<tr class="codeline" data-linenumber="17"><td class="num" id="LN17">17</td><td class="line"> <span class='comment'>* Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.</span></td></tr>
<tr class="codeline" data-linenumber="18"><td class="num" id="LN18">18</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="19"><td class="num" id="LN19">19</td><td class="line"> <span class='comment'>* Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA</span></td></tr>
<tr class="codeline" data-linenumber="20"><td class="num" id="LN20">20</td><td class="line"> <span class='comment'>* or visit www.oracle.com if you need additional information or have any</span></td></tr>
<tr class="codeline" data-linenumber="21"><td class="num" id="LN21">21</td><td class="line"> <span class='comment'>* questions.</span></td></tr>
<tr class="codeline" data-linenumber="22"><td class="num" id="LN22">22</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="23"><td class="num" id="LN23">23</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="24"><td class="num" id="LN24">24</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="25"><td class="num" id="LN25">25</td><td class="line"><span class='directive'>#ifndef SHARE_OOPS_OOPSHIERARCHY_HPP</span></td></tr>
<tr class="codeline" data-linenumber="26"><td class="num" id="LN26">26</td><td class="line"><span class='directive'>#define SHARE_OOPS_OOPSHIERARCHY_HPP</span></td></tr>
<tr class="codeline" data-linenumber="27"><td class="num" id="LN27">27</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="28"><td class="num" id="LN28">28</td><td class="line"><span class='directive'>#include "metaprogramming/integralConstant.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="29"><td class="num" id="LN29">29</td><td class="line"><span class='directive'>#include "metaprogramming/primitiveConversions.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="30"><td class="num" id="LN30">30</td><td class="line"><span class='directive'>#include "utilities/globalDefinitions.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="31"><td class="num" id="LN31">31</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="32"><td class="num" id="LN32">32</td><td class="line"><span class='comment'>// OBJECT hierarchy</span></td></tr>
<tr class="codeline" data-linenumber="33"><td class="num" id="LN33">33</td><td class="line"><span class='comment'>// This hierarchy is a representation hierarchy, i.e. if A is a superclass</span></td></tr>
<tr class="codeline" data-linenumber="34"><td class="num" id="LN34">34</td><td class="line"><span class='comment'>// of B, A's representation is a prefix of B's representation.</span></td></tr>
<tr class="codeline" data-linenumber="35"><td class="num" id="LN35">35</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="36"><td class="num" id="LN36">36</td><td class="line"><span class='comment'>// Global offset instead of address for an oop within a java object.</span></td></tr>
<tr class="codeline" data-linenumber="37"><td class="num" id="LN37">37</td><td class="line"><span class='keyword'>enum</span> <span class='keyword'>class</span> narrowOop : uint32_t { null = 0 };</td></tr>
<tr class="codeline" data-linenumber="38"><td class="num" id="LN38">38</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="39"><td class="num" id="LN39">39</td><td class="line"><span class='comment'>// If compressed klass pointers then use narrowKlass.</span></td></tr>
<tr class="codeline" data-linenumber="40"><td class="num" id="LN40">40</td><td class="line"><span class='keyword'>typedef</span> juint  narrowKlass;</td></tr>
<tr class="codeline" data-linenumber="41"><td class="num" id="LN41">41</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="42"><td class="num" id="LN42">42</td><td class="line"><span class='keyword'>typedef</span> <span class='keyword'>void</span>* OopOrNarrowOopStar;</td></tr>
<tr class="codeline" data-linenumber="43"><td class="num" id="LN43">43</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="44"><td class="num" id="LN44">44</td><td class="line"><span class='directive'>#ifndef <span class='macro'>CHECK_UNHANDLED_OOPS<span class='macro_popup'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="45"><td class="num" id="LN45">45</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="46"><td class="num" id="LN46">46</td><td class="line"><span class='keyword'>typedef</span> <span class='keyword'>class</span> oopDesc*                    oop;</td></tr>
<tr class="codeline" data-linenumber="47"><td class="num" id="LN47">47</td><td class="line"><span class='keyword'>typedef</span> <span class='keyword'>class</span>   instanceOopDesc*            instanceOop;</td></tr>
<tr class="codeline" data-linenumber="48"><td class="num" id="LN48">48</td><td class="line"><span class='keyword'>typedef</span> <span class='keyword'>class</span>   arrayOopDesc*               arrayOop;</td></tr>
<tr class="codeline" data-linenumber="49"><td class="num" id="LN49">49</td><td class="line"><span class='keyword'>typedef</span> <span class='keyword'>class</span>     objArrayOopDesc*            objArrayOop;</td></tr>
<tr class="codeline" data-linenumber="50"><td class="num" id="LN50">50</td><td class="line"><span class='keyword'>typedef</span> <span class='keyword'>class</span>     typeArrayOopDesc*           typeArrayOop;</td></tr>
<tr class="codeline" data-linenumber="51"><td class="num" id="LN51">51</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="52"><td class="num" id="LN52">52</td><td class="line"><span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="53"><td class="num" id="LN53">53</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="54"><td class="num" id="LN54">54</td><td class="line"><span class='comment'>// When CHECK_UNHANDLED_OOPS is defined, an "oop" is a class with a</span></td></tr>
<tr class="codeline" data-linenumber="55"><td class="num" id="LN55">55</td><td class="line"><span class='comment'>// carefully chosen set of constructors and conversion operators to go</span></td></tr>
<tr class="codeline" data-linenumber="56"><td class="num" id="LN56">56</td><td class="line"><span class='comment'>// to and from the underlying oopDesc pointer type.</span></td></tr>
<tr class="codeline" data-linenumber="57"><td class="num" id="LN57">57</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="58"><td class="num" id="LN58">58</td><td class="line"><span class='comment'>// Because oop and its subclasses &lt;type&gt;Oop are class types, arbitrary</span></td></tr>
<tr class="codeline" data-linenumber="59"><td class="num" id="LN59">59</td><td class="line"><span class='comment'>// conversions are not accepted by the compiler.  Applying a cast to</span></td></tr>
<tr class="codeline" data-linenumber="60"><td class="num" id="LN60">60</td><td class="line"><span class='comment'>// an oop will cause the best matched conversion operator to be</span></td></tr>
<tr class="codeline" data-linenumber="61"><td class="num" id="LN61">61</td><td class="line"><span class='comment'>// invoked returning the underlying oopDesc* type if appropriate.</span></td></tr>
<tr class="codeline" data-linenumber="62"><td class="num" id="LN62">62</td><td class="line"><span class='comment'>// No copy constructors, explicit user conversions or operators of</span></td></tr>
<tr class="codeline" data-linenumber="63"><td class="num" id="LN63">63</td><td class="line"><span class='comment'>// numerical type should be defined within the oop class. Most C++</span></td></tr>
<tr class="codeline" data-linenumber="64"><td class="num" id="LN64">64</td><td class="line"><span class='comment'>// compilers will issue a compile time error concerning the overloading</span></td></tr>
<tr class="codeline" data-linenumber="65"><td class="num" id="LN65">65</td><td class="line"><span class='comment'>// ambiguity between operators of numerical and pointer types. If</span></td></tr>
<tr class="codeline" data-linenumber="66"><td class="num" id="LN66">66</td><td class="line"><span class='comment'>// a conversion to or from an oop to a numerical type is needed,</span></td></tr>
<tr class="codeline" data-linenumber="67"><td class="num" id="LN67">67</td><td class="line"><span class='comment'>// use the inline template methods, cast_*_oop, defined below.</span></td></tr>
<tr class="codeline" data-linenumber="68"><td class="num" id="LN68">68</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="69"><td class="num" id="LN69">69</td><td class="line"><span class='comment'>// Converting NULL to oop to Handle implicit is no longer accepted by the</span></td></tr>
<tr class="codeline" data-linenumber="70"><td class="num" id="LN70">70</td><td class="line"><span class='comment'>// compiler because there are too many steps in the conversion.  Use Handle()</span></td></tr>
<tr class="codeline" data-linenumber="71"><td class="num" id="LN71">71</td><td class="line"><span class='comment'>// instead, which generates less code anyway.</span></td></tr>
<tr class="codeline" data-linenumber="72"><td class="num" id="LN72">72</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="73"><td class="num" id="LN73">73</td><td class="line"><span class='keyword'>class</span> Thread;</td></tr>
<tr class="codeline" data-linenumber="74"><td class="num" id="LN74">74</td><td class="line"><span class='keyword'>class</span> oopDesc;</td></tr>
<tr class="codeline" data-linenumber="75"><td class="num" id="LN75">75</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="76"><td class="num" id="LN76">76</td><td class="line"><span class='keyword'>extern</span> <span class='string_literal'>"C"</span> <span class='keyword'>bool</span> CheckUnhandledOops;</td></tr>
<tr class="codeline" data-linenumber="77"><td class="num" id="LN77">77</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="78"><td class="num" id="LN78">78</td><td class="line"><span class='keyword'>class</span> oop {</td></tr>
<tr class="codeline" data-linenumber="79"><td class="num" id="LN79">79</td><td class="line">  oopDesc* _o;</td></tr>
<tr class="codeline" data-linenumber="80"><td class="num" id="LN80">80</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="81"><td class="num" id="LN81">81</td><td class="line">  <span class='keyword'>void</span> register_oop();</td></tr>
<tr class="codeline" data-linenumber="82"><td class="num" id="LN82">82</td><td class="line">  <span class='keyword'>void</span> unregister_oop();</td></tr>
<tr class="codeline" data-linenumber="83"><td class="num" id="LN83">83</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="84"><td class="num" id="LN84">84</td><td class="line">  <span class='keyword'>void</span> register_if_checking() {</td></tr>
<tr class="codeline" data-linenumber="85"><td class="num" id="LN85">85</td><td class="line">    <span class='keyword'>if</span> (CheckUnhandledOops) register_oop();</td></tr>
<tr class="codeline" data-linenumber="86"><td class="num" id="LN86">86</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="87"><td class="num" id="LN87">87</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="88"><td class="num" id="LN88">88</td><td class="line"><span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="89"><td class="num" id="LN89">89</td><td class="line">  oop()             : _o(<span class='keyword'>nullptr</span>) { register_if_checking(); }</td></tr>
<tr class="codeline" data-linenumber="90"><td class="num" id="LN90">90</td><td class="line">  oop(<span class='keyword'>const</span> oop&amp; o) : _o(o._o)    { register_if_checking(); }</td></tr>
<tr class="codeline" data-linenumber="91"><td class="num" id="LN91">91</td><td class="line">  oop(oopDesc* o)   : _o(o)       { register_if_checking(); }</td></tr>
<tr class="codeline" data-linenumber="92"><td class="num" id="LN92">92</td><td class="line">  ~oop() {</td></tr>
<tr class="codeline" data-linenumber="93"><td class="num" id="LN93">93</td><td class="line">    <span class='keyword'>if</span> (CheckUnhandledOops) unregister_oop();</td></tr>
<tr class="codeline" data-linenumber="94"><td class="num" id="LN94">94</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="95"><td class="num" id="LN95">95</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="96"><td class="num" id="LN96">96</td><td class="line">  oopDesc* obj() <span class='keyword'>const</span>                 { <span class='keyword'>return</span> _o; }</td></tr>
<tr class="codeline" data-linenumber="97"><td class="num" id="LN97">97</td><td class="line">  oopDesc* <span class='keyword'>operator</span>-&gt;() <span class='keyword'>const</span>          { <span class='keyword'>return</span> _o; }</td></tr>
<tr class="codeline" data-linenumber="98"><td class="num" id="LN98">98</td><td class="line">  <span class='keyword'>operator</span> oopDesc* () <span class='keyword'>const</span>           { <span class='keyword'>return</span> _o; }</td></tr>
<tr class="codeline" data-linenumber="99"><td class="num" id="LN99">99</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="100"><td class="num" id="LN100">100</td><td class="line">  <span class='keyword'>bool</span> <span class='keyword'>operator</span>==(<span class='keyword'>const</span> oop&amp; o) <span class='keyword'>const</span>  { <span class='keyword'>return</span> _o == o._o; }</td></tr>
<tr class="codeline" data-linenumber="101"><td class="num" id="LN101">101</td><td class="line">  <span class='keyword'>bool</span> <span class='keyword'>operator</span>!=(<span class='keyword'>const</span> oop&amp; o) <span class='keyword'>const</span>  { <span class='keyword'>return</span> _o != o._o; }</td></tr>
<tr class="codeline" data-linenumber="102"><td class="num" id="LN102">102</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="103"><td class="num" id="LN103">103</td><td class="line">  <span class='keyword'>bool</span> <span class='keyword'>operator</span>==(std::nullptr_t) <span class='keyword'>const</span>     { <span class='keyword'>return</span> _o == <span class='keyword'>nullptr</span>; }</td></tr>
<tr class="codeline" data-linenumber="104"><td class="num" id="LN104">104</td><td class="line">  <span class='keyword'>bool</span> <span class='keyword'>operator</span>!=(std::nullptr_t) <span class='keyword'>const</span>     { <span class="mrange"><span class='keyword'>return</span> <span class="mrange">_o != <span class='keyword'>nullptr</span></span></span>; }</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path32" class="msg msgEvent" style="margin-left:54ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">32</div></td><td><div class="PathNav"><a href="#Path31" title="Previous event (31)">&#x2190;</a></div></td><td>Assuming the condition is false</td><td><div class="PathNav"><a href="#Path33" title="Next event (33)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path33" class="msg msgEvent" style="margin-left:47ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">33</div></td><td><div class="PathNav"><a href="#Path32" title="Previous event (32)">&#x2190;</a></div></td><td>Returning zero, which participates in a condition later</td><td><div class="PathNav"><a href="#Path34" title="Next event (34)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="105"><td class="num" id="LN105">105</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="106"><td class="num" id="LN106">106</td><td class="line">  oop&amp; <span class='keyword'>operator</span>=(<span class='keyword'>const</span> oop&amp; o)         { _o = o._o; <span class='keyword'>return</span> *<span class='keyword'>this</span>; }</td></tr>
<tr class="codeline" data-linenumber="107"><td class="num" id="LN107">107</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="108"><td class="num" id="LN108">108</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="109"><td class="num" id="LN109">109</td><td class="line"><span class='keyword'>template</span>&lt;&gt;</td></tr>
<tr class="codeline" data-linenumber="110"><td class="num" id="LN110">110</td><td class="line"><span class='keyword'>struct</span> PrimitiveConversions::Translate&lt;oop&gt; : <span class='keyword'>public</span> TrueType {</td></tr>
<tr class="codeline" data-linenumber="111"><td class="num" id="LN111">111</td><td class="line">  <span class='keyword'>typedef</span> oop Value;</td></tr>
<tr class="codeline" data-linenumber="112"><td class="num" id="LN112">112</td><td class="line">  <span class='keyword'>typedef</span> oopDesc* Decayed;</td></tr>
<tr class="codeline" data-linenumber="113"><td class="num" id="LN113">113</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="114"><td class="num" id="LN114">114</td><td class="line">  <span class='keyword'>static</span> Decayed decay(Value x) { <span class='keyword'>return</span> x.obj(); }</td></tr>
<tr class="codeline" data-linenumber="115"><td class="num" id="LN115">115</td><td class="line">  <span class='keyword'>static</span> Value recover(Decayed x) { <span class='keyword'>return</span> oop(x); }</td></tr>
<tr class="codeline" data-linenumber="116"><td class="num" id="LN116">116</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="117"><td class="num" id="LN117">117</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="118"><td class="num" id="LN118">118</td><td class="line"><span class='directive'>#define <span class='macro'>DEF_OOP(type)<span class='macro_popup'>class typeOopDesc; class typeOop : public oop { public: typeOop<br>() : oop() {} typeOop(const typeOop&amp; o) : oop(o) {} typeOop<br>(const oop&amp; o) : oop(o) {} typeOop(typeOopDesc* o) : oop(<br>(oopDesc*)o) {} operator typeOopDesc* () const { return (typeOopDesc<br>*)obj(); } typeOopDesc* operator-&gt;() const { return (typeOopDesc<br>*)obj(); } typeOop&amp; operator=(const typeOop&amp; o) { oop<br>::operator=(o); return *this; } }; template&lt;&gt; struct PrimitiveConversions<br>::Translate&lt;typeOop&gt; : public TrueType { typedef typeOop<br> Value; typedef typeOopDesc* Decayed; static Decayed decay(Value<br> x) { return (typeOopDesc*)x.obj(); } static Value recover(Decayed<br> x) { return typeOop(x); } };</span></span>                                                      \</span></td></tr>
<tr class="codeline" data-linenumber="119"><td class="num" id="LN119">119</td><td class="line">   <span class='directive'>class type##OopDesc;                                                    \</span></td></tr>
<tr class="codeline" data-linenumber="120"><td class="num" id="LN120">120</td><td class="line">   <span class='directive'>class type##Oop : public oop {                                          \</span></td></tr>
<tr class="codeline" data-linenumber="121"><td class="num" id="LN121">121</td><td class="line">     <span class='directive'>public:                                                               \</span></td></tr>
<tr class="codeline" data-linenumber="122"><td class="num" id="LN122">122</td><td class="line">       <span class='directive'>type##Oop() : oop() {}                                              \</span></td></tr>
<tr class="codeline" data-linenumber="123"><td class="num" id="LN123">123</td><td class="line">       <span class='directive'>type##Oop(const type##Oop&amp; o) : oop(o) {}                           \</span></td></tr>
<tr class="codeline" data-linenumber="124"><td class="num" id="LN124">124</td><td class="line">       <span class='directive'>type##Oop(const oop&amp; o) : oop(o) {}                                 \</span></td></tr>
<tr class="codeline" data-linenumber="125"><td class="num" id="LN125">125</td><td class="line">       <span class='directive'>type##Oop(type##OopDesc* o) : oop((oopDesc*)o) {}                   \</span></td></tr>
<tr class="codeline" data-linenumber="126"><td class="num" id="LN126">126</td><td class="line">       <span class='directive'>operator type##OopDesc* () const { return (type##OopDesc*)obj(); }  \</span></td></tr>
<tr class="codeline" data-linenumber="127"><td class="num" id="LN127">127</td><td class="line">       <span class='directive'>type##OopDesc* operator-&gt;() const {                                 \</span></td></tr>
<tr class="codeline" data-linenumber="128"><td class="num" id="LN128">128</td><td class="line">            <span class='directive'>return (type##OopDesc*)obj();                                  \</span></td></tr>
<tr class="codeline" data-linenumber="129"><td class="num" id="LN129">129</td><td class="line">       <span class='directive'>}                                                                   \</span></td></tr>
<tr class="codeline" data-linenumber="130"><td class="num" id="LN130">130</td><td class="line">       <span class='directive'>type##Oop&amp; operator=(const type##Oop&amp; o) {                          \</span></td></tr>
<tr class="codeline" data-linenumber="131"><td class="num" id="LN131">131</td><td class="line">            <span class='directive'>oop::operator=(o);                                             \</span></td></tr>
<tr class="codeline" data-linenumber="132"><td class="num" id="LN132">132</td><td class="line">            <span class='directive'>return *this;                                                  \</span></td></tr>
<tr class="codeline" data-linenumber="133"><td class="num" id="LN133">133</td><td class="line">       <span class='directive'>}                                                                   \</span></td></tr>
<tr class="codeline" data-linenumber="134"><td class="num" id="LN134">134</td><td class="line">   <span class='directive'>};                                                                      \</span></td></tr>
<tr class="codeline" data-linenumber="135"><td class="num" id="LN135">135</td><td class="line">                                                                           <span class='directive'>\</span></td></tr>
<tr class="codeline" data-linenumber="136"><td class="num" id="LN136">136</td><td class="line">   <span class='directive'>template&lt;&gt;                                                              \</span></td></tr>
<tr class="codeline" data-linenumber="137"><td class="num" id="LN137">137</td><td class="line">   <span class='directive'>struct PrimitiveConversions::Translate&lt;type##Oop&gt; : public TrueType {   \</span></td></tr>
<tr class="codeline" data-linenumber="138"><td class="num" id="LN138">138</td><td class="line">     <span class='directive'>typedef type##Oop Value;                                              \</span></td></tr>
<tr class="codeline" data-linenumber="139"><td class="num" id="LN139">139</td><td class="line">     <span class='directive'>typedef type##OopDesc* Decayed;                                       \</span></td></tr>
<tr class="codeline" data-linenumber="140"><td class="num" id="LN140">140</td><td class="line">                                                                           <span class='directive'>\</span></td></tr>
<tr class="codeline" data-linenumber="141"><td class="num" id="LN141">141</td><td class="line">     <span class='directive'>static Decayed decay(Value x) { return (type##OopDesc*)x.obj(); }     \</span></td></tr>
<tr class="codeline" data-linenumber="142"><td class="num" id="LN142">142</td><td class="line">     <span class='directive'>static Value recover(Decayed x) { return type##Oop(x); }              \</span></td></tr>
<tr class="codeline" data-linenumber="143"><td class="num" id="LN143">143</td><td class="line">   <span class='directive'>};</span></td></tr>
<tr class="codeline" data-linenumber="144"><td class="num" id="LN144">144</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="145"><td class="num" id="LN145">145</td><td class="line"><span class='macro'>DEF_OOP(instance)<span class='macro_popup'>class instanceOopDesc; class instanceOop : public oop { public<br>: instanceOop() : oop() {} instanceOop(const instanceOop&amp;<br> o) : oop(o) {} instanceOop(const oop&amp; o) : oop(o) {} instanceOop<br>(instanceOopDesc* o) : oop((oopDesc*)o) {} operator instanceOopDesc<br>* () const { return (instanceOopDesc*)obj(); } instanceOopDesc<br>* operator-&gt;() const { return (instanceOopDesc*)obj(); } instanceOop<br>&amp; operator=(const instanceOop&amp; o) { oop::operator=(o)<br>; return *this; } }; template&lt;&gt; struct PrimitiveConversions<br>::Translate&lt;instanceOop&gt; : public TrueType { typedef instanceOop<br> Value; typedef instanceOopDesc* Decayed; static Decayed decay<br>(Value x) { return (instanceOopDesc*)x.obj(); } static Value recover<br>(Decayed x) { return instanceOop(x); } };</span></span>;</td></tr>
<tr class="codeline" data-linenumber="146"><td class="num" id="LN146">146</td><td class="line"><span class='macro'>DEF_OOP(array)<span class='macro_popup'>class arrayOopDesc; class arrayOop : public oop { public: arrayOop<br>() : oop() {} arrayOop(const arrayOop&amp; o) : oop(o) {} arrayOop<br>(const oop&amp; o) : oop(o) {} arrayOop(arrayOopDesc* o) : oop<br>((oopDesc*)o) {} operator arrayOopDesc* () const { return (arrayOopDesc<br>*)obj(); } arrayOopDesc* operator-&gt;() const { return (arrayOopDesc<br>*)obj(); } arrayOop&amp; operator=(const arrayOop&amp; o) { oop<br>::operator=(o); return *this; } }; template&lt;&gt; struct PrimitiveConversions<br>::Translate&lt;arrayOop&gt; : public TrueType { typedef arrayOop<br> Value; typedef arrayOopDesc* Decayed; static Decayed decay(Value<br> x) { return (arrayOopDesc*)x.obj(); } static Value recover(Decayed<br> x) { return arrayOop(x); } };</span></span>;</td></tr>
<tr class="codeline" data-linenumber="147"><td class="num" id="LN147">147</td><td class="line"><span class='macro'>DEF_OOP(objArray)<span class='macro_popup'>class objArrayOopDesc; class objArrayOop : public oop { public<br>: objArrayOop() : oop() {} objArrayOop(const objArrayOop&amp;<br> o) : oop(o) {} objArrayOop(const oop&amp; o) : oop(o) {} objArrayOop<br>(objArrayOopDesc* o) : oop((oopDesc*)o) {} operator objArrayOopDesc<br>* () const { return (objArrayOopDesc*)obj(); } objArrayOopDesc<br>* operator-&gt;() const { return (objArrayOopDesc*)obj(); } objArrayOop<br>&amp; operator=(const objArrayOop&amp; o) { oop::operator=(o)<br>; return *this; } }; template&lt;&gt; struct PrimitiveConversions<br>::Translate&lt;objArrayOop&gt; : public TrueType { typedef objArrayOop<br> Value; typedef objArrayOopDesc* Decayed; static Decayed decay<br>(Value x) { return (objArrayOopDesc*)x.obj(); } static Value recover<br>(Decayed x) { return objArrayOop(x); } };</span></span>;</td></tr>
<tr class="codeline" data-linenumber="148"><td class="num" id="LN148">148</td><td class="line"><span class='macro'>DEF_OOP(typeArray)<span class='macro_popup'>class typeArrayOopDesc; class typeArrayOop : public oop { public<br>: typeArrayOop() : oop() {} typeArrayOop(const typeArrayOop&amp;<br> o) : oop(o) {} typeArrayOop(const oop&amp; o) : oop(o) {} typeArrayOop<br>(typeArrayOopDesc* o) : oop((oopDesc*)o) {} operator typeArrayOopDesc<br>* () const { return (typeArrayOopDesc*)obj(); } typeArrayOopDesc<br>* operator-&gt;() const { return (typeArrayOopDesc*)obj(); } typeArrayOop<br>&amp; operator=(const typeArrayOop&amp; o) { oop::operator=(o<br>); return *this; } }; template&lt;&gt; struct PrimitiveConversions<br>::Translate&lt;typeArrayOop&gt; : public TrueType { typedef typeArrayOop<br> Value; typedef typeArrayOopDesc* Decayed; static Decayed decay<br>(Value x) { return (typeArrayOopDesc*)x.obj(); } static Value<br> recover(Decayed x) { return typeArrayOop(x); } };</span></span>;</td></tr>
<tr class="codeline" data-linenumber="149"><td class="num" id="LN149">149</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="150"><td class="num" id="LN150">150</td><td class="line"><span class='directive'>#endif // CHECK_UNHANDLED_OOPS</span></td></tr>
<tr class="codeline" data-linenumber="151"><td class="num" id="LN151">151</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="152"><td class="num" id="LN152">152</td><td class="line"><span class='comment'>// Cast functions to convert to and from oops.</span></td></tr>
<tr class="codeline" data-linenumber="153"><td class="num" id="LN153">153</td><td class="line"><span class='keyword'>template</span> &lt;<span class='keyword'>typename</span> T&gt; <span class='keyword'>inline</span> oop cast_to_oop(T value) {</td></tr>
<tr class="codeline" data-linenumber="154"><td class="num" id="LN154">154</td><td class="line">  <span class='keyword'>return</span> (oopDesc*)value;</td></tr>
<tr class="codeline" data-linenumber="155"><td class="num" id="LN155">155</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="156"><td class="num" id="LN156">156</td><td class="line"><span class='keyword'>template</span> &lt;<span class='keyword'>typename</span> T&gt; <span class='keyword'>inline</span> T cast_from_oop(oop o) {</td></tr>
<tr class="codeline" data-linenumber="157"><td class="num" id="LN157">157</td><td class="line">  <span class='keyword'>return</span> (T)(<span class='macro'>CHECK_UNHANDLED_OOPS_ONLY((oopDesc*))<span class='macro_popup'>(oopDesc*)</span></span>o);</td></tr>
<tr class="codeline" data-linenumber="158"><td class="num" id="LN158">158</td><td class="line">}</td></tr>
<tr class="codeline" data-linenumber="159"><td class="num" id="LN159">159</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="160"><td class="num" id="LN160">160</td><td class="line"><span class='comment'>// The metadata hierarchy is separate from the oop hierarchy</span></td></tr>
<tr class="codeline" data-linenumber="161"><td class="num" id="LN161">161</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="162"><td class="num" id="LN162">162</td><td class="line"><span class='comment'>//      class MetaspaceObj</span></td></tr>
<tr class="codeline" data-linenumber="163"><td class="num" id="LN163">163</td><td class="line"><span class='keyword'>class</span>   ConstMethod;</td></tr>
<tr class="codeline" data-linenumber="164"><td class="num" id="LN164">164</td><td class="line"><span class='keyword'>class</span>   ConstantPoolCache;</td></tr>
<tr class="codeline" data-linenumber="165"><td class="num" id="LN165">165</td><td class="line"><span class='keyword'>class</span>   MethodData;</td></tr>
<tr class="codeline" data-linenumber="166"><td class="num" id="LN166">166</td><td class="line"><span class='comment'>//      class Metadata</span></td></tr>
<tr class="codeline" data-linenumber="167"><td class="num" id="LN167">167</td><td class="line"><span class='keyword'>class</span>   Method;</td></tr>
<tr class="codeline" data-linenumber="168"><td class="num" id="LN168">168</td><td class="line"><span class='keyword'>class</span>   ConstantPool;</td></tr>
<tr class="codeline" data-linenumber="169"><td class="num" id="LN169">169</td><td class="line"><span class='comment'>//      class CHeapObj</span></td></tr>
<tr class="codeline" data-linenumber="170"><td class="num" id="LN170">170</td><td class="line"><span class='keyword'>class</span>   CompiledICHolder;</td></tr>
<tr class="codeline" data-linenumber="171"><td class="num" id="LN171">171</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="172"><td class="num" id="LN172">172</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="173"><td class="num" id="LN173">173</td><td class="line"><span class='comment'>// The klass hierarchy is separate from the oop hierarchy.</span></td></tr>
<tr class="codeline" data-linenumber="174"><td class="num" id="LN174">174</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="175"><td class="num" id="LN175">175</td><td class="line"><span class='keyword'>class</span> Klass;</td></tr>
<tr class="codeline" data-linenumber="176"><td class="num" id="LN176">176</td><td class="line"><span class='keyword'>class</span>   InstanceKlass;</td></tr>
<tr class="codeline" data-linenumber="177"><td class="num" id="LN177">177</td><td class="line"><span class='keyword'>class</span>     InstanceMirrorKlass;</td></tr>
<tr class="codeline" data-linenumber="178"><td class="num" id="LN178">178</td><td class="line"><span class='keyword'>class</span>     InstanceClassLoaderKlass;</td></tr>
<tr class="codeline" data-linenumber="179"><td class="num" id="LN179">179</td><td class="line"><span class='keyword'>class</span>     InstanceRefKlass;</td></tr>
<tr class="codeline" data-linenumber="180"><td class="num" id="LN180">180</td><td class="line"><span class='keyword'>class</span>   ArrayKlass;</td></tr>
<tr class="codeline" data-linenumber="181"><td class="num" id="LN181">181</td><td class="line"><span class='keyword'>class</span>     ObjArrayKlass;</td></tr>
<tr class="codeline" data-linenumber="182"><td class="num" id="LN182">182</td><td class="line"><span class='keyword'>class</span>     TypeArrayKlass;</td></tr>
<tr class="codeline" data-linenumber="183"><td class="num" id="LN183">183</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="184"><td class="num" id="LN184">184</td><td class="line"><span class='directive'>#endif // SHARE_OOPS_OOPSHIERARCHY_HPP</span></td></tr>
</table><hr class=divider>
<div id=File48751>
<div class=FileNav><a href="#File31794">&#x2190;</a></div><h4 class=FileName>/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp</h4>
<div class=FileNav><a href="#File44890">&#x2192;</a></div></div>
<table class="code" data-fileid="48751">
<tr class="codeline" data-linenumber="1"><td class="num" id="LN1">1</td><td class="line"><span class='comment'>/*</span></td></tr>
<tr class="codeline" data-linenumber="2"><td class="num" id="LN2">2</td><td class="line"> <span class='comment'>* Copyright (c) 1997, 2021, Oracle and/or its affiliates. All rights reserved.</span></td></tr>
<tr class="codeline" data-linenumber="3"><td class="num" id="LN3">3</td><td class="line"> <span class='comment'>* DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.</span></td></tr>
<tr class="codeline" data-linenumber="4"><td class="num" id="LN4">4</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="5"><td class="num" id="LN5">5</td><td class="line"> <span class='comment'>* This code is free software; you can redistribute it and/or modify it</span></td></tr>
<tr class="codeline" data-linenumber="6"><td class="num" id="LN6">6</td><td class="line"> <span class='comment'>* under the terms of the GNU General Public License version 2 only, as</span></td></tr>
<tr class="codeline" data-linenumber="7"><td class="num" id="LN7">7</td><td class="line"> <span class='comment'>* published by the Free Software Foundation.</span></td></tr>
<tr class="codeline" data-linenumber="8"><td class="num" id="LN8">8</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="9"><td class="num" id="LN9">9</td><td class="line"> <span class='comment'>* This code is distributed in the hope that it will be useful, but WITHOUT</span></td></tr>
<tr class="codeline" data-linenumber="10"><td class="num" id="LN10">10</td><td class="line"> <span class='comment'>* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span></td></tr>
<tr class="codeline" data-linenumber="11"><td class="num" id="LN11">11</td><td class="line"> <span class='comment'>* FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License</span></td></tr>
<tr class="codeline" data-linenumber="12"><td class="num" id="LN12">12</td><td class="line"> <span class='comment'>* version 2 for more details (a copy is included in the LICENSE file that</span></td></tr>
<tr class="codeline" data-linenumber="13"><td class="num" id="LN13">13</td><td class="line"> <span class='comment'>* accompanied this code).</span></td></tr>
<tr class="codeline" data-linenumber="14"><td class="num" id="LN14">14</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="15"><td class="num" id="LN15">15</td><td class="line"> <span class='comment'>* You should have received a copy of the GNU General Public License version</span></td></tr>
<tr class="codeline" data-linenumber="16"><td class="num" id="LN16">16</td><td class="line"> <span class='comment'>* 2 along with this work; if not, write to the Free Software Foundation,</span></td></tr>
<tr class="codeline" data-linenumber="17"><td class="num" id="LN17">17</td><td class="line"> <span class='comment'>* Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.</span></td></tr>
<tr class="codeline" data-linenumber="18"><td class="num" id="LN18">18</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="19"><td class="num" id="LN19">19</td><td class="line"> <span class='comment'>* Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA</span></td></tr>
<tr class="codeline" data-linenumber="20"><td class="num" id="LN20">20</td><td class="line"> <span class='comment'>* or visit www.oracle.com if you need additional information or have any</span></td></tr>
<tr class="codeline" data-linenumber="21"><td class="num" id="LN21">21</td><td class="line"> <span class='comment'>* questions.</span></td></tr>
<tr class="codeline" data-linenumber="22"><td class="num" id="LN22">22</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="23"><td class="num" id="LN23">23</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="24"><td class="num" id="LN24">24</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="25"><td class="num" id="LN25">25</td><td class="line"><span class='directive'>#ifndef SHARE_OOPS_METHOD_HPP</span></td></tr>
<tr class="codeline" data-linenumber="26"><td class="num" id="LN26">26</td><td class="line"><span class='directive'>#define SHARE_OOPS_METHOD_HPP</span></td></tr>
<tr class="codeline" data-linenumber="27"><td class="num" id="LN27">27</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="28"><td class="num" id="LN28">28</td><td class="line"><span class='directive'>#include "code/compressedStream.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="29"><td class="num" id="LN29">29</td><td class="line"><span class='directive'>#include "compiler/compilerDefinitions.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="30"><td class="num" id="LN30">30</td><td class="line"><span class='directive'>#include "interpreter/invocationCounter.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="31"><td class="num" id="LN31">31</td><td class="line"><span class='directive'>#include "oops/annotations.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="32"><td class="num" id="LN32">32</td><td class="line"><span class='directive'>#include "oops/constantPool.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="33"><td class="num" id="LN33">33</td><td class="line"><span class='directive'>#include "oops/methodCounters.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="34"><td class="num" id="LN34">34</td><td class="line"><span class='directive'>#include "oops/instanceKlass.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="35"><td class="num" id="LN35">35</td><td class="line"><span class='directive'>#include "oops/oop.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="36"><td class="num" id="LN36">36</td><td class="line"><span class='directive'>#include "oops/typeArrayOop.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="37"><td class="num" id="LN37">37</td><td class="line"><span class='directive'>#include "utilities/accessFlags.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="38"><td class="num" id="LN38">38</td><td class="line"><span class='directive'>#include "utilities/align.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="39"><td class="num" id="LN39">39</td><td class="line"><span class='directive'>#include "utilities/growableArray.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="40"><td class="num" id="LN40">40</td><td class="line"><span class='directive'>#include "utilities/macros.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="41"><td class="num" id="LN41">41</td><td class="line"><span class='directive'>#include "utilities/vmEnums.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="42"><td class="num" id="LN42">42</td><td class="line"><span class='directive'>#if <span class='macro'>INCLUDE_JFR<span class='macro_popup'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="43"><td class="num" id="LN43">43</td><td class="line"><span class='directive'>#include "jfr/support/jfrTraceIdExtension.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="44"><td class="num" id="LN44">44</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="45"><td class="num" id="LN45">45</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="46"><td class="num" id="LN46">46</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="47"><td class="num" id="LN47">47</td><td class="line"><span class='comment'>// A Method represents a Java method.</span></td></tr>
<tr class="codeline" data-linenumber="48"><td class="num" id="LN48">48</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="49"><td class="num" id="LN49">49</td><td class="line"><span class='comment'>// Note that most applications load thousands of methods, so keeping the size of this</span></td></tr>
<tr class="codeline" data-linenumber="50"><td class="num" id="LN50">50</td><td class="line"><span class='comment'>// class small has a big impact on footprint.</span></td></tr>
<tr class="codeline" data-linenumber="51"><td class="num" id="LN51">51</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="52"><td class="num" id="LN52">52</td><td class="line"><span class='comment'>// Note that native_function and signature_handler have to be at fixed offsets</span></td></tr>
<tr class="codeline" data-linenumber="53"><td class="num" id="LN53">53</td><td class="line"><span class='comment'>// (required by the interpreter)</span></td></tr>
<tr class="codeline" data-linenumber="54"><td class="num" id="LN54">54</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="55"><td class="num" id="LN55">55</td><td class="line"><span class='comment'>//  Method embedded field layout (after declared fields):</span></td></tr>
<tr class="codeline" data-linenumber="56"><td class="num" id="LN56">56</td><td class="line"><span class='comment'>//   [EMBEDDED native_function       (present only if native) ]</span></td></tr>
<tr class="codeline" data-linenumber="57"><td class="num" id="LN57">57</td><td class="line"><span class='comment'>//   [EMBEDDED signature_handler     (present only if native) ]</span></td></tr>
<tr class="codeline" data-linenumber="58"><td class="num" id="LN58">58</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="59"><td class="num" id="LN59">59</td><td class="line"><span class='keyword'>class</span> CheckedExceptionElement;</td></tr>
<tr class="codeline" data-linenumber="60"><td class="num" id="LN60">60</td><td class="line"><span class='keyword'>class</span> LocalVariableTableElement;</td></tr>
<tr class="codeline" data-linenumber="61"><td class="num" id="LN61">61</td><td class="line"><span class='keyword'>class</span> AdapterHandlerEntry;</td></tr>
<tr class="codeline" data-linenumber="62"><td class="num" id="LN62">62</td><td class="line"><span class='keyword'>class</span> MethodData;</td></tr>
<tr class="codeline" data-linenumber="63"><td class="num" id="LN63">63</td><td class="line"><span class='keyword'>class</span> MethodCounters;</td></tr>
<tr class="codeline" data-linenumber="64"><td class="num" id="LN64">64</td><td class="line"><span class='keyword'>class</span> ConstMethod;</td></tr>
<tr class="codeline" data-linenumber="65"><td class="num" id="LN65">65</td><td class="line"><span class='keyword'>class</span> InlineTableSizes;</td></tr>
<tr class="codeline" data-linenumber="66"><td class="num" id="LN66">66</td><td class="line"><span class='keyword'>class</span> CompiledMethod;</td></tr>
<tr class="codeline" data-linenumber="67"><td class="num" id="LN67">67</td><td class="line"><span class='keyword'>class</span> InterpreterOopMap;</td></tr>
<tr class="codeline" data-linenumber="68"><td class="num" id="LN68">68</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="69"><td class="num" id="LN69">69</td><td class="line"><span class='keyword'>class</span> Method : <span class='keyword'>public</span> Metadata {</td></tr>
<tr class="codeline" data-linenumber="70"><td class="num" id="LN70">70</td><td class="line"> <span class='keyword'>friend</span> <span class='keyword'>class</span> VMStructs;</td></tr>
<tr class="codeline" data-linenumber="71"><td class="num" id="LN71">71</td><td class="line"> <span class='keyword'>friend</span> <span class='keyword'>class</span> JVMCIVMStructs;</td></tr>
<tr class="codeline" data-linenumber="72"><td class="num" id="LN72">72</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="73"><td class="num" id="LN73">73</td><td class="line">  <span class='comment'>// If you add a new field that points to any metaspace object, you</span></td></tr>
<tr class="codeline" data-linenumber="74"><td class="num" id="LN74">74</td><td class="line">  <span class='comment'>// must add this field to Method::metaspace_pointers_do().</span></td></tr>
<tr class="codeline" data-linenumber="75"><td class="num" id="LN75">75</td><td class="line">  ConstMethod*      _constMethod;                <span class='comment'>// Method read-only data.</span></td></tr>
<tr class="codeline" data-linenumber="76"><td class="num" id="LN76">76</td><td class="line">  MethodData*       _method_data;</td></tr>
<tr class="codeline" data-linenumber="77"><td class="num" id="LN77">77</td><td class="line">  MethodCounters*   _method_counters;</td></tr>
<tr class="codeline" data-linenumber="78"><td class="num" id="LN78">78</td><td class="line">  AdapterHandlerEntry* _adapter;</td></tr>
<tr class="codeline" data-linenumber="79"><td class="num" id="LN79">79</td><td class="line">  AccessFlags       _access_flags;               <span class='comment'>// Access flags</span></td></tr>
<tr class="codeline" data-linenumber="80"><td class="num" id="LN80">80</td><td class="line">  <span class='keyword'>int</span>               _vtable_index;               <span class='comment'>// vtable index of this method (see VtableIndexFlag)</span></td></tr>
<tr class="codeline" data-linenumber="81"><td class="num" id="LN81">81</td><td class="line">                                                 <span class='comment'>// note: can have vtables with &gt;2**16 elements (because of inheritance)</span></td></tr>
<tr class="codeline" data-linenumber="82"><td class="num" id="LN82">82</td><td class="line">  u2                _intrinsic_id;               <span class='comment'>// vmSymbols::intrinsic_id (0 == _none)</span></td></tr>
<tr class="codeline" data-linenumber="83"><td class="num" id="LN83">83</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="84"><td class="num" id="LN84">84</td><td class="line">  <span class='comment'>// Flags</span></td></tr>
<tr class="codeline" data-linenumber="85"><td class="num" id="LN85">85</td><td class="line">  <span class='keyword'>enum</span> Flags {</td></tr>
<tr class="codeline" data-linenumber="86"><td class="num" id="LN86">86</td><td class="line">    _caller_sensitive      = 1 &lt;&lt; 0,</td></tr>
<tr class="codeline" data-linenumber="87"><td class="num" id="LN87">87</td><td class="line">    _force_inline          = 1 &lt;&lt; 1,</td></tr>
<tr class="codeline" data-linenumber="88"><td class="num" id="LN88">88</td><td class="line">    _dont_inline           = 1 &lt;&lt; 2,</td></tr>
<tr class="codeline" data-linenumber="89"><td class="num" id="LN89">89</td><td class="line">    _hidden                = 1 &lt;&lt; 3,</td></tr>
<tr class="codeline" data-linenumber="90"><td class="num" id="LN90">90</td><td class="line">    _has_injected_profile  = 1 &lt;&lt; 4,</td></tr>
<tr class="codeline" data-linenumber="91"><td class="num" id="LN91">91</td><td class="line">    _intrinsic_candidate   = 1 &lt;&lt; 5,</td></tr>
<tr class="codeline" data-linenumber="92"><td class="num" id="LN92">92</td><td class="line">    _reserved_stack_access = 1 &lt;&lt; 6,</td></tr>
<tr class="codeline" data-linenumber="93"><td class="num" id="LN93">93</td><td class="line">    _scoped                = 1 &lt;&lt; 7</td></tr>
<tr class="codeline" data-linenumber="94"><td class="num" id="LN94">94</td><td class="line">  };</td></tr>
<tr class="codeline" data-linenumber="95"><td class="num" id="LN95">95</td><td class="line">  <span class='keyword'>mutable</span> u2 _flags;</td></tr>
<tr class="codeline" data-linenumber="96"><td class="num" id="LN96">96</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="97"><td class="num" id="LN97">97</td><td class="line">  <span class='macro'>JFR_ONLY(DEFINE_TRACE_FLAG;)<span class='macro_popup'>mutable JfrTraceFlag _trace_flags;</span></span></td></tr>
<tr class="codeline" data-linenumber="98"><td class="num" id="LN98">98</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="99"><td class="num" id="LN99">99</td><td class="line"><span class='directive'>#ifndef PRODUCT</span></td></tr>
<tr class="codeline" data-linenumber="100"><td class="num" id="LN100">100</td><td class="line">  int64_t _compiled_invocation_count;</td></tr>
<tr class="codeline" data-linenumber="101"><td class="num" id="LN101">101</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="102"><td class="num" id="LN102">102</td><td class="line">  <span class='comment'>// Entry point for calling both from and to the interpreter.</span></td></tr>
<tr class="codeline" data-linenumber="103"><td class="num" id="LN103">103</td><td class="line">  address _i2i_entry;           <span class='comment'>// All-args-on-stack calling convention</span></td></tr>
<tr class="codeline" data-linenumber="104"><td class="num" id="LN104">104</td><td class="line">  <span class='comment'>// Entry point for calling from compiled code, to compiled code if it exists</span></td></tr>
<tr class="codeline" data-linenumber="105"><td class="num" id="LN105">105</td><td class="line">  <span class='comment'>// or else the interpreter.</span></td></tr>
<tr class="codeline" data-linenumber="106"><td class="num" id="LN106">106</td><td class="line">  <span class='keyword'>volatile</span> address _from_compiled_entry;        <span class='comment'>// Cache of: _code ? _code-&gt;entry_point() : _adapter-&gt;c2i_entry()</span></td></tr>
<tr class="codeline" data-linenumber="107"><td class="num" id="LN107">107</td><td class="line">  <span class='comment'>// The entry point for calling both from and to compiled code is</span></td></tr>
<tr class="codeline" data-linenumber="108"><td class="num" id="LN108">108</td><td class="line">  <span class='comment'>// "_code-&gt;entry_point()".  Because of tiered compilation and de-opt, this</span></td></tr>
<tr class="codeline" data-linenumber="109"><td class="num" id="LN109">109</td><td class="line">  <span class='comment'>// field can come and go.  It can transition from NULL to not-null at any</span></td></tr>
<tr class="codeline" data-linenumber="110"><td class="num" id="LN110">110</td><td class="line">  <span class='comment'>// time (whenever a compile completes).  It can transition from not-null to</span></td></tr>
<tr class="codeline" data-linenumber="111"><td class="num" id="LN111">111</td><td class="line">  <span class='comment'>// NULL only at safepoints (because of a de-opt).</span></td></tr>
<tr class="codeline" data-linenumber="112"><td class="num" id="LN112">112</td><td class="line">  CompiledMethod* <span class='keyword'>volatile</span> _code;                       <span class='comment'>// Points to the corresponding piece of native code</span></td></tr>
<tr class="codeline" data-linenumber="113"><td class="num" id="LN113">113</td><td class="line">  <span class='keyword'>volatile</span> address           _from_interpreted_entry; <span class='comment'>// Cache of _code ? _adapter-&gt;i2c_entry() : _i2i_entry</span></td></tr>
<tr class="codeline" data-linenumber="114"><td class="num" id="LN114">114</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="115"><td class="num" id="LN115">115</td><td class="line">  <span class='comment'>// Constructor</span></td></tr>
<tr class="codeline" data-linenumber="116"><td class="num" id="LN116">116</td><td class="line">  Method(ConstMethod* xconst, AccessFlags access_flags);</td></tr>
<tr class="codeline" data-linenumber="117"><td class="num" id="LN117">117</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="118"><td class="num" id="LN118">118</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="119"><td class="num" id="LN119">119</td><td class="line">  <span class='keyword'>static</span> Method* allocate(ClassLoaderData* loader_data,</td></tr>
<tr class="codeline" data-linenumber="120"><td class="num" id="LN120">120</td><td class="line">                          <span class='keyword'>int</span> byte_code_size,</td></tr>
<tr class="codeline" data-linenumber="121"><td class="num" id="LN121">121</td><td class="line">                          AccessFlags access_flags,</td></tr>
<tr class="codeline" data-linenumber="122"><td class="num" id="LN122">122</td><td class="line">                          InlineTableSizes* sizes,</td></tr>
<tr class="codeline" data-linenumber="123"><td class="num" id="LN123">123</td><td class="line">                          ConstMethod::MethodType method_type,</td></tr>
<tr class="codeline" data-linenumber="124"><td class="num" id="LN124">124</td><td class="line">                          <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="125"><td class="num" id="LN125">125</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="126"><td class="num" id="LN126">126</td><td class="line">  <span class='comment'>// CDS and vtbl checking can create an empty Method to get vtbl pointer.</span></td></tr>
<tr class="codeline" data-linenumber="127"><td class="num" id="LN127">127</td><td class="line">  Method(){}</td></tr>
<tr class="codeline" data-linenumber="128"><td class="num" id="LN128">128</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="129"><td class="num" id="LN129">129</td><td class="line">  <span class='keyword'>virtual</span> <span class='keyword'>bool</span> is_method() <span class='keyword'>const</span> { <span class='keyword'>return</span> <span class='keyword'>true</span>; }</td></tr>
<tr class="codeline" data-linenumber="130"><td class="num" id="LN130">130</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="131"><td class="num" id="LN131">131</td><td class="line">  <span class='keyword'>void</span> restore_unshareable_info(<span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="132"><td class="num" id="LN132">132</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="133"><td class="num" id="LN133">133</td><td class="line">  <span class='comment'>// accessors for instance variables</span></td></tr>
<tr class="codeline" data-linenumber="134"><td class="num" id="LN134">134</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="135"><td class="num" id="LN135">135</td><td class="line">  ConstMethod* constMethod() <span class='keyword'>const</span>             { <span class='keyword'>return</span> _constMethod; }</td></tr>
<tr class="codeline" data-linenumber="136"><td class="num" id="LN136">136</td><td class="line">  <span class='keyword'>void</span> set_constMethod(ConstMethod* xconst)    { _constMethod = xconst; }</td></tr>
<tr class="codeline" data-linenumber="137"><td class="num" id="LN137">137</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="138"><td class="num" id="LN138">138</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="139"><td class="num" id="LN139">139</td><td class="line">  <span class='keyword'>static</span> address make_adapters(<span class='keyword'>const</span> methodHandle&amp; mh, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="140"><td class="num" id="LN140">140</td><td class="line">  address from_compiled_entry() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="141"><td class="num" id="LN141">141</td><td class="line">  address from_compiled_entry_no_trampoline() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="142"><td class="num" id="LN142">142</td><td class="line">  address from_interpreted_entry() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="143"><td class="num" id="LN143">143</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="144"><td class="num" id="LN144">144</td><td class="line">  <span class='comment'>// access flag</span></td></tr>
<tr class="codeline" data-linenumber="145"><td class="num" id="LN145">145</td><td class="line">  AccessFlags access_flags() <span class='keyword'>const</span>               { <span class='keyword'>return</span> _access_flags;  }</td></tr>
<tr class="codeline" data-linenumber="146"><td class="num" id="LN146">146</td><td class="line">  <span class='keyword'>void</span> set_access_flags(AccessFlags flags)       { _access_flags = flags; }</td></tr>
<tr class="codeline" data-linenumber="147"><td class="num" id="LN147">147</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="148"><td class="num" id="LN148">148</td><td class="line">  <span class='comment'>// name</span></td></tr>
<tr class="codeline" data-linenumber="149"><td class="num" id="LN149">149</td><td class="line">  Symbol* name() <span class='keyword'>const</span>                           { <span class='keyword'>return</span> constants()-&gt;symbol_at(name_index()); }</td></tr>
<tr class="codeline" data-linenumber="150"><td class="num" id="LN150">150</td><td class="line">  <span class='keyword'>int</span> name_index() <span class='keyword'>const</span>                         { <span class='keyword'>return</span> constMethod()-&gt;name_index();         }</td></tr>
<tr class="codeline" data-linenumber="151"><td class="num" id="LN151">151</td><td class="line">  <span class='keyword'>void</span> set_name_index(<span class='keyword'>int</span> index)                 { constMethod()-&gt;set_name_index(index);       }</td></tr>
<tr class="codeline" data-linenumber="152"><td class="num" id="LN152">152</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="153"><td class="num" id="LN153">153</td><td class="line">  <span class='comment'>// signature</span></td></tr>
<tr class="codeline" data-linenumber="154"><td class="num" id="LN154">154</td><td class="line">  Symbol* signature() <span class='keyword'>const</span>                      { <span class='keyword'>return</span> constants()-&gt;symbol_at(signature_index()); }</td></tr>
<tr class="codeline" data-linenumber="155"><td class="num" id="LN155">155</td><td class="line">  <span class='keyword'>int</span> signature_index() <span class='keyword'>const</span>                    { <span class='keyword'>return</span> constMethod()-&gt;signature_index();         }</td></tr>
<tr class="codeline" data-linenumber="156"><td class="num" id="LN156">156</td><td class="line">  <span class='keyword'>void</span> set_signature_index(<span class='keyword'>int</span> index)            { constMethod()-&gt;set_signature_index(index);       }</td></tr>
<tr class="codeline" data-linenumber="157"><td class="num" id="LN157">157</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="158"><td class="num" id="LN158">158</td><td class="line">  <span class='comment'>// generics support</span></td></tr>
<tr class="codeline" data-linenumber="159"><td class="num" id="LN159">159</td><td class="line">  Symbol* generic_signature() <span class='keyword'>const</span>              { <span class='keyword'>int</span> idx = generic_signature_index(); <span class='keyword'>return</span> ((idx != 0) ? constants()-&gt;symbol_at(idx) : (Symbol*)<span class='macro'>NULL<span class='macro_popup'>__null</span></span>); }</td></tr>
<tr class="codeline" data-linenumber="160"><td class="num" id="LN160">160</td><td class="line">  <span class='keyword'>int</span> generic_signature_index() <span class='keyword'>const</span>            { <span class='keyword'>return</span> constMethod()-&gt;generic_signature_index(); }</td></tr>
<tr class="codeline" data-linenumber="161"><td class="num" id="LN161">161</td><td class="line">  <span class='keyword'>void</span> set_generic_signature_index(<span class='keyword'>int</span> index)    { constMethod()-&gt;set_generic_signature_index(index); }</td></tr>
<tr class="codeline" data-linenumber="162"><td class="num" id="LN162">162</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="163"><td class="num" id="LN163">163</td><td class="line">  <span class='comment'>// annotations support</span></td></tr>
<tr class="codeline" data-linenumber="164"><td class="num" id="LN164">164</td><td class="line">  AnnotationArray* annotations() <span class='keyword'>const</span>           {</td></tr>
<tr class="codeline" data-linenumber="165"><td class="num" id="LN165">165</td><td class="line">    <span class='keyword'>return</span> constMethod()-&gt;method_annotations();</td></tr>
<tr class="codeline" data-linenumber="166"><td class="num" id="LN166">166</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="167"><td class="num" id="LN167">167</td><td class="line">  AnnotationArray* parameter_annotations() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="168"><td class="num" id="LN168">168</td><td class="line">    <span class='keyword'>return</span> constMethod()-&gt;parameter_annotations();</td></tr>
<tr class="codeline" data-linenumber="169"><td class="num" id="LN169">169</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="170"><td class="num" id="LN170">170</td><td class="line">  AnnotationArray* annotation_default() <span class='keyword'>const</span>    {</td></tr>
<tr class="codeline" data-linenumber="171"><td class="num" id="LN171">171</td><td class="line">    <span class='keyword'>return</span> constMethod()-&gt;default_annotations();</td></tr>
<tr class="codeline" data-linenumber="172"><td class="num" id="LN172">172</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="173"><td class="num" id="LN173">173</td><td class="line">  AnnotationArray* type_annotations() <span class='keyword'>const</span>      {</td></tr>
<tr class="codeline" data-linenumber="174"><td class="num" id="LN174">174</td><td class="line">    <span class='keyword'>return</span> constMethod()-&gt;type_annotations();</td></tr>
<tr class="codeline" data-linenumber="175"><td class="num" id="LN175">175</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="176"><td class="num" id="LN176">176</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="177"><td class="num" id="LN177">177</td><td class="line">  <span class='comment'>// Helper routine: get klass name + "." + method name + signature as</span></td></tr>
<tr class="codeline" data-linenumber="178"><td class="num" id="LN178">178</td><td class="line">  <span class='comment'>// C string, for the purpose of providing more useful</span></td></tr>
<tr class="codeline" data-linenumber="179"><td class="num" id="LN179">179</td><td class="line">  <span class='comment'>// fatal error handling. The string is allocated in resource</span></td></tr>
<tr class="codeline" data-linenumber="180"><td class="num" id="LN180">180</td><td class="line">  <span class='comment'>// area if a buffer is not provided by the caller.</span></td></tr>
<tr class="codeline" data-linenumber="181"><td class="num" id="LN181">181</td><td class="line">  <span class='keyword'>char</span>* name_and_sig_as_C_string() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="182"><td class="num" id="LN182">182</td><td class="line">  <span class='keyword'>char</span>* name_and_sig_as_C_string(<span class='keyword'>char</span>* buf, <span class='keyword'>int</span> size) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="183"><td class="num" id="LN183">183</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="184"><td class="num" id="LN184">184</td><td class="line">  <span class='comment'>// Static routine in the situations we don't have a Method*</span></td></tr>
<tr class="codeline" data-linenumber="185"><td class="num" id="LN185">185</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>char</span>* name_and_sig_as_C_string(Klass* klass, Symbol* method_name, Symbol* signature);</td></tr>
<tr class="codeline" data-linenumber="186"><td class="num" id="LN186">186</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>char</span>* name_and_sig_as_C_string(Klass* klass, Symbol* method_name, Symbol* signature, <span class='keyword'>char</span>* buf, <span class='keyword'>int</span> size);</td></tr>
<tr class="codeline" data-linenumber="187"><td class="num" id="LN187">187</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="188"><td class="num" id="LN188">188</td><td class="line">  <span class='comment'>// Get return type + klass name + "." + method name + ( parameters types )</span></td></tr>
<tr class="codeline" data-linenumber="189"><td class="num" id="LN189">189</td><td class="line">  <span class='comment'>// as a C string or print it to an outputStream.</span></td></tr>
<tr class="codeline" data-linenumber="190"><td class="num" id="LN190">190</td><td class="line">  <span class='comment'>// This is to be used to assemble strings passed to Java, so that</span></td></tr>
<tr class="codeline" data-linenumber="191"><td class="num" id="LN191">191</td><td class="line">  <span class='comment'>// the text more resembles Java code. Used in exception messages.</span></td></tr>
<tr class="codeline" data-linenumber="192"><td class="num" id="LN192">192</td><td class="line">  <span class='comment'>// Memory is allocated in the resource area; the caller needs</span></td></tr>
<tr class="codeline" data-linenumber="193"><td class="num" id="LN193">193</td><td class="line">  <span class='comment'>// a ResourceMark.</span></td></tr>
<tr class="codeline" data-linenumber="194"><td class="num" id="LN194">194</td><td class="line">  <span class='keyword'>const</span> <span class='keyword'>char</span>* external_name() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="195"><td class="num" id="LN195">195</td><td class="line">  <span class='keyword'>void</span>  print_external_name(outputStream *os) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="196"><td class="num" id="LN196">196</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="197"><td class="num" id="LN197">197</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>const</span> <span class='keyword'>char</span>* external_name(                  Klass* klass, Symbol* method_name, Symbol* signature);</td></tr>
<tr class="codeline" data-linenumber="198"><td class="num" id="LN198">198</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span>  print_external_name(outputStream *os, Klass* klass, Symbol* method_name, Symbol* signature);</td></tr>
<tr class="codeline" data-linenumber="199"><td class="num" id="LN199">199</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="200"><td class="num" id="LN200">200</td><td class="line">  Bytecodes::Code java_code_at(<span class='keyword'>int</span> bci) <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="201"><td class="num" id="LN201">201</td><td class="line">    <span class='keyword'>return</span> Bytecodes::java_code_at(<span class='keyword'>this</span>, bcp_from(bci));</td></tr>
<tr class="codeline" data-linenumber="202"><td class="num" id="LN202">202</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="203"><td class="num" id="LN203">203</td><td class="line">  Bytecodes::Code code_at(<span class='keyword'>int</span> bci) <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="204"><td class="num" id="LN204">204</td><td class="line">    <span class='keyword'>return</span> Bytecodes::code_at(<span class='keyword'>this</span>, bcp_from(bci));</td></tr>
<tr class="codeline" data-linenumber="205"><td class="num" id="LN205">205</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="206"><td class="num" id="LN206">206</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="207"><td class="num" id="LN207">207</td><td class="line">  <span class='comment'>// JVMTI breakpoints</span></td></tr>
<tr class="codeline" data-linenumber="208"><td class="num" id="LN208">208</td><td class="line"><span class='directive'>#if !<span class='macro'>INCLUDE_JVMTI<span class='macro_popup'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="209"><td class="num" id="LN209">209</td><td class="line">  Bytecodes::Code orig_bytecode_at(<span class='keyword'>int</span> bci) <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="210"><td class="num" id="LN210">210</td><td class="line">    <span class='macro'>ShouldNotReachHere()<span class='macro_popup'>do { (*g_assert_poison) = 'X';; report_should_not_reach_here(<br>"/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp"<br>, 210); ::breakpoint(); } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="211"><td class="num" id="LN211">211</td><td class="line">    <span class='keyword'>return</span> Bytecodes::_shouldnotreachhere;</td></tr>
<tr class="codeline" data-linenumber="212"><td class="num" id="LN212">212</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="213"><td class="num" id="LN213">213</td><td class="line">  <span class='keyword'>void</span> set_orig_bytecode_at(<span class='keyword'>int</span> bci, Bytecodes::Code code) {</td></tr>
<tr class="codeline" data-linenumber="214"><td class="num" id="LN214">214</td><td class="line">    <span class='macro'>ShouldNotReachHere()<span class='macro_popup'>do { (*g_assert_poison) = 'X';; report_should_not_reach_here(<br>"/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp"<br>, 214); ::breakpoint(); } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="215"><td class="num" id="LN215">215</td><td class="line">  };</td></tr>
<tr class="codeline" data-linenumber="216"><td class="num" id="LN216">216</td><td class="line">  u2   number_of_breakpoints() <span class='keyword'>const</span> {<span class='keyword'>return</span> 0;}</td></tr>
<tr class="codeline" data-linenumber="217"><td class="num" id="LN217">217</td><td class="line"><span class='directive'>#else // !INCLUDE_JVMTI</span></td></tr>
<tr class="codeline" data-linenumber="218"><td class="num" id="LN218">218</td><td class="line">  Bytecodes::Code orig_bytecode_at(<span class='keyword'>int</span> bci) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="219"><td class="num" id="LN219">219</td><td class="line">  <span class='keyword'>void</span> set_orig_bytecode_at(<span class='keyword'>int</span> bci, Bytecodes::Code code);</td></tr>
<tr class="codeline" data-linenumber="220"><td class="num" id="LN220">220</td><td class="line">  <span class='keyword'>void</span> set_breakpoint(<span class='keyword'>int</span> bci);</td></tr>
<tr class="codeline" data-linenumber="221"><td class="num" id="LN221">221</td><td class="line">  <span class='keyword'>void</span> clear_breakpoint(<span class='keyword'>int</span> bci);</td></tr>
<tr class="codeline" data-linenumber="222"><td class="num" id="LN222">222</td><td class="line">  <span class='keyword'>void</span> clear_all_breakpoints();</td></tr>
<tr class="codeline" data-linenumber="223"><td class="num" id="LN223">223</td><td class="line">  <span class='comment'>// Tracking number of breakpoints, for fullspeed debugging.</span></td></tr>
<tr class="codeline" data-linenumber="224"><td class="num" id="LN224">224</td><td class="line">  <span class='comment'>// Only mutated by VM thread.</span></td></tr>
<tr class="codeline" data-linenumber="225"><td class="num" id="LN225">225</td><td class="line">  u2   number_of_breakpoints() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="226"><td class="num" id="LN226">226</td><td class="line">    MethodCounters* mcs = method_counters();</td></tr>
<tr class="codeline" data-linenumber="227"><td class="num" id="LN227">227</td><td class="line">    <span class='keyword'>if</span> (mcs == <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="228"><td class="num" id="LN228">228</td><td class="line">      <span class='keyword'>return</span> 0;</td></tr>
<tr class="codeline" data-linenumber="229"><td class="num" id="LN229">229</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="230"><td class="num" id="LN230">230</td><td class="line">      <span class='keyword'>return</span> mcs-&gt;number_of_breakpoints();</td></tr>
<tr class="codeline" data-linenumber="231"><td class="num" id="LN231">231</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="232"><td class="num" id="LN232">232</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="233"><td class="num" id="LN233">233</td><td class="line">  <span class='keyword'>void</span> incr_number_of_breakpoints(Thread* current) {</td></tr>
<tr class="codeline" data-linenumber="234"><td class="num" id="LN234">234</td><td class="line">    MethodCounters* mcs = get_method_counters(current);</td></tr>
<tr class="codeline" data-linenumber="235"><td class="num" id="LN235">235</td><td class="line">    <span class='keyword'>if</span> (mcs != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="236"><td class="num" id="LN236">236</td><td class="line">      mcs-&gt;incr_number_of_breakpoints();</td></tr>
<tr class="codeline" data-linenumber="237"><td class="num" id="LN237">237</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="238"><td class="num" id="LN238">238</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="239"><td class="num" id="LN239">239</td><td class="line">  <span class='keyword'>void</span> decr_number_of_breakpoints(Thread* current) {</td></tr>
<tr class="codeline" data-linenumber="240"><td class="num" id="LN240">240</td><td class="line">    MethodCounters* mcs = get_method_counters(current);</td></tr>
<tr class="codeline" data-linenumber="241"><td class="num" id="LN241">241</td><td class="line">    <span class='keyword'>if</span> (mcs != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="242"><td class="num" id="LN242">242</td><td class="line">      mcs-&gt;decr_number_of_breakpoints();</td></tr>
<tr class="codeline" data-linenumber="243"><td class="num" id="LN243">243</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="244"><td class="num" id="LN244">244</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="245"><td class="num" id="LN245">245</td><td class="line">  <span class='comment'>// Initialization only</span></td></tr>
<tr class="codeline" data-linenumber="246"><td class="num" id="LN246">246</td><td class="line">  <span class='keyword'>void</span> clear_number_of_breakpoints() {</td></tr>
<tr class="codeline" data-linenumber="247"><td class="num" id="LN247">247</td><td class="line">    MethodCounters* mcs = method_counters();</td></tr>
<tr class="codeline" data-linenumber="248"><td class="num" id="LN248">248</td><td class="line">    <span class='keyword'>if</span> (mcs != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="249"><td class="num" id="LN249">249</td><td class="line">      mcs-&gt;clear_number_of_breakpoints();</td></tr>
<tr class="codeline" data-linenumber="250"><td class="num" id="LN250">250</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="251"><td class="num" id="LN251">251</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="252"><td class="num" id="LN252">252</td><td class="line"><span class='directive'>#endif // !INCLUDE_JVMTI</span></td></tr>
<tr class="codeline" data-linenumber="253"><td class="num" id="LN253">253</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="254"><td class="num" id="LN254">254</td><td class="line">  <span class='comment'>// index into InstanceKlass methods() array</span></td></tr>
<tr class="codeline" data-linenumber="255"><td class="num" id="LN255">255</td><td class="line">  <span class='comment'>// note: also used by jfr</span></td></tr>
<tr class="codeline" data-linenumber="256"><td class="num" id="LN256">256</td><td class="line">  u2 method_idnum() <span class='keyword'>const</span>           { <span class='keyword'>return</span> constMethod()-&gt;method_idnum(); }</td></tr>
<tr class="codeline" data-linenumber="257"><td class="num" id="LN257">257</td><td class="line">  <span class='keyword'>void</span> set_method_idnum(u2 idnum)   { constMethod()-&gt;set_method_idnum(idnum); }</td></tr>
<tr class="codeline" data-linenumber="258"><td class="num" id="LN258">258</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="259"><td class="num" id="LN259">259</td><td class="line">  u2 orig_method_idnum() <span class='keyword'>const</span>           { <span class='keyword'>return</span> constMethod()-&gt;orig_method_idnum(); }</td></tr>
<tr class="codeline" data-linenumber="260"><td class="num" id="LN260">260</td><td class="line">  <span class='keyword'>void</span> set_orig_method_idnum(u2 idnum)   { constMethod()-&gt;set_orig_method_idnum(idnum); }</td></tr>
<tr class="codeline" data-linenumber="261"><td class="num" id="LN261">261</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="262"><td class="num" id="LN262">262</td><td class="line">  <span class='comment'>// code size</span></td></tr>
<tr class="codeline" data-linenumber="263"><td class="num" id="LN263">263</td><td class="line">  <span class='keyword'>int</span> code_size() <span class='keyword'>const</span>                  { <span class='keyword'>return</span> constMethod()-&gt;code_size(); }</td></tr>
<tr class="codeline" data-linenumber="264"><td class="num" id="LN264">264</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="265"><td class="num" id="LN265">265</td><td class="line">  <span class='comment'>// method size in words</span></td></tr>
<tr class="codeline" data-linenumber="266"><td class="num" id="LN266">266</td><td class="line">  <span class='keyword'>int</span> method_size() <span class='keyword'>const</span>                { <span class='keyword'>return</span> <span class='keyword'>sizeof</span>(Method)/wordSize + ( is_native() ? 2 : 0 ); }</td></tr>
<tr class="codeline" data-linenumber="267"><td class="num" id="LN267">267</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="268"><td class="num" id="LN268">268</td><td class="line">  <span class='comment'>// constant pool for Klass* holding this method</span></td></tr>
<tr class="codeline" data-linenumber="269"><td class="num" id="LN269">269</td><td class="line">  ConstantPool* constants() <span class='keyword'>const</span>              { <span class='keyword'>return</span> constMethod()-&gt;constants(); }</td></tr>
<tr class="codeline" data-linenumber="270"><td class="num" id="LN270">270</td><td class="line">  <span class='keyword'>void</span> set_constants(ConstantPool* c)          { constMethod()-&gt;set_constants(c); }</td></tr>
<tr class="codeline" data-linenumber="271"><td class="num" id="LN271">271</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="272"><td class="num" id="LN272">272</td><td class="line">  <span class='comment'>// max stack</span></td></tr>
<tr class="codeline" data-linenumber="273"><td class="num" id="LN273">273</td><td class="line">  <span class='comment'>// return original max stack size for method verification</span></td></tr>
<tr class="codeline" data-linenumber="274"><td class="num" id="LN274">274</td><td class="line">  <span class='keyword'>int</span>  verifier_max_stack() <span class='keyword'>const</span>                { <span class='keyword'>return</span> constMethod()-&gt;max_stack(); }</td></tr>
<tr class="codeline" data-linenumber="275"><td class="num" id="LN275">275</td><td class="line">  <span class='keyword'>int</span>           max_stack() <span class='keyword'>const</span>                { <span class='keyword'>return</span> constMethod()-&gt;max_stack() + extra_stack_entries(); }</td></tr>
<tr class="codeline" data-linenumber="276"><td class="num" id="LN276">276</td><td class="line">  <span class='keyword'>void</span>      set_max_stack(<span class='keyword'>int</span> size)              {        constMethod()-&gt;set_max_stack(size); }</td></tr>
<tr class="codeline" data-linenumber="277"><td class="num" id="LN277">277</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="278"><td class="num" id="LN278">278</td><td class="line">  <span class='comment'>// max locals</span></td></tr>
<tr class="codeline" data-linenumber="279"><td class="num" id="LN279">279</td><td class="line">  <span class='keyword'>int</span>  max_locals() <span class='keyword'>const</span>                        { <span class='keyword'>return</span> constMethod()-&gt;max_locals(); }</td></tr>
<tr class="codeline" data-linenumber="280"><td class="num" id="LN280">280</td><td class="line">  <span class='keyword'>void</span> set_max_locals(<span class='keyword'>int</span> size)                  { constMethod()-&gt;set_max_locals(size); }</td></tr>
<tr class="codeline" data-linenumber="281"><td class="num" id="LN281">281</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="282"><td class="num" id="LN282">282</td><td class="line">  <span class='keyword'>int</span> highest_comp_level() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="283"><td class="num" id="LN283">283</td><td class="line">  <span class='keyword'>void</span> set_highest_comp_level(<span class='keyword'>int</span> level);</td></tr>
<tr class="codeline" data-linenumber="284"><td class="num" id="LN284">284</td><td class="line">  <span class='keyword'>int</span> highest_osr_comp_level() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="285"><td class="num" id="LN285">285</td><td class="line">  <span class='keyword'>void</span> set_highest_osr_comp_level(<span class='keyword'>int</span> level);</td></tr>
<tr class="codeline" data-linenumber="286"><td class="num" id="LN286">286</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="287"><td class="num" id="LN287">287</td><td class="line"><span class='directive'>#if <span class='macro'>COMPILER2_OR_JVMCI<span class='macro_popup'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="288"><td class="num" id="LN288">288</td><td class="line">  <span class='comment'>// Count of times method was exited via exception while interpreting</span></td></tr>
<tr class="codeline" data-linenumber="289"><td class="num" id="LN289">289</td><td class="line">  <span class='keyword'>void</span> interpreter_throwout_increment(Thread* current) {</td></tr>
<tr class="codeline" data-linenumber="290"><td class="num" id="LN290">290</td><td class="line">    MethodCounters* mcs = get_method_counters(current);</td></tr>
<tr class="codeline" data-linenumber="291"><td class="num" id="LN291">291</td><td class="line">    <span class='keyword'>if</span> (mcs != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="292"><td class="num" id="LN292">292</td><td class="line">      mcs-&gt;interpreter_throwout_increment();</td></tr>
<tr class="codeline" data-linenumber="293"><td class="num" id="LN293">293</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="294"><td class="num" id="LN294">294</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="295"><td class="num" id="LN295">295</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="296"><td class="num" id="LN296">296</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="297"><td class="num" id="LN297">297</td><td class="line">  <span class='keyword'>int</span>  interpreter_throwout_count() <span class='keyword'>const</span>        {</td></tr>
<tr class="codeline" data-linenumber="298"><td class="num" id="LN298">298</td><td class="line">    MethodCounters* mcs = method_counters();</td></tr>
<tr class="codeline" data-linenumber="299"><td class="num" id="LN299">299</td><td class="line">    <span class='keyword'>if</span> (mcs == <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="300"><td class="num" id="LN300">300</td><td class="line">      <span class='keyword'>return</span> 0;</td></tr>
<tr class="codeline" data-linenumber="301"><td class="num" id="LN301">301</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="302"><td class="num" id="LN302">302</td><td class="line">      <span class='keyword'>return</span> mcs-&gt;interpreter_throwout_count();</td></tr>
<tr class="codeline" data-linenumber="303"><td class="num" id="LN303">303</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="304"><td class="num" id="LN304">304</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="305"><td class="num" id="LN305">305</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="306"><td class="num" id="LN306">306</td><td class="line">  <span class='comment'>// Derive stuff from the signature at load time.</span></td></tr>
<tr class="codeline" data-linenumber="307"><td class="num" id="LN307">307</td><td class="line">  <span class='keyword'>void</span> compute_from_signature(Symbol* sig);</td></tr>
<tr class="codeline" data-linenumber="308"><td class="num" id="LN308">308</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="309"><td class="num" id="LN309">309</td><td class="line">  <span class='comment'>// size of parameters (receiver if any + arguments)</span></td></tr>
<tr class="codeline" data-linenumber="310"><td class="num" id="LN310">310</td><td class="line">  <span class='keyword'>int</span>  size_of_parameters() <span class='keyword'>const</span>                { <span class='keyword'>return</span> constMethod()-&gt;size_of_parameters(); }</td></tr>
<tr class="codeline" data-linenumber="311"><td class="num" id="LN311">311</td><td class="line">  <span class='keyword'>void</span> set_size_of_parameters(<span class='keyword'>int</span> size)          { constMethod()-&gt;set_size_of_parameters(size); }</td></tr>
<tr class="codeline" data-linenumber="312"><td class="num" id="LN312">312</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="313"><td class="num" id="LN313">313</td><td class="line">  <span class='keyword'>bool</span> has_stackmap_table() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="314"><td class="num" id="LN314">314</td><td class="line">    <span class='keyword'>return</span> constMethod()-&gt;has_stackmap_table();</td></tr>
<tr class="codeline" data-linenumber="315"><td class="num" id="LN315">315</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="316"><td class="num" id="LN316">316</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="317"><td class="num" id="LN317">317</td><td class="line">  Array&lt;u1&gt;* stackmap_data() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="318"><td class="num" id="LN318">318</td><td class="line">    <span class='keyword'>return</span> constMethod()-&gt;stackmap_data();</td></tr>
<tr class="codeline" data-linenumber="319"><td class="num" id="LN319">319</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="320"><td class="num" id="LN320">320</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="321"><td class="num" id="LN321">321</td><td class="line">  <span class='keyword'>void</span> set_stackmap_data(Array&lt;u1&gt;* sd) {</td></tr>
<tr class="codeline" data-linenumber="322"><td class="num" id="LN322">322</td><td class="line">    constMethod()-&gt;set_stackmap_data(sd);</td></tr>
<tr class="codeline" data-linenumber="323"><td class="num" id="LN323">323</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="324"><td class="num" id="LN324">324</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="325"><td class="num" id="LN325">325</td><td class="line">  <span class='comment'>// exception handler table</span></td></tr>
<tr class="codeline" data-linenumber="326"><td class="num" id="LN326">326</td><td class="line">  <span class='keyword'>bool</span> has_exception_handler() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="327"><td class="num" id="LN327">327</td><td class="line">                             { <span class='keyword'>return</span> constMethod()-&gt;has_exception_handler(); }</td></tr>
<tr class="codeline" data-linenumber="328"><td class="num" id="LN328">328</td><td class="line">  <span class='keyword'>int</span> exception_table_length() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="329"><td class="num" id="LN329">329</td><td class="line">                             { <span class='keyword'>return</span> constMethod()-&gt;exception_table_length(); }</td></tr>
<tr class="codeline" data-linenumber="330"><td class="num" id="LN330">330</td><td class="line">  ExceptionTableElement* exception_table_start() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="331"><td class="num" id="LN331">331</td><td class="line">                             { <span class='keyword'>return</span> constMethod()-&gt;exception_table_start(); }</td></tr>
<tr class="codeline" data-linenumber="332"><td class="num" id="LN332">332</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="333"><td class="num" id="LN333">333</td><td class="line">  <span class='comment'>// Finds the first entry point bci of an exception handler for an</span></td></tr>
<tr class="codeline" data-linenumber="334"><td class="num" id="LN334">334</td><td class="line">  <span class='comment'>// exception of klass ex_klass thrown at throw_bci. A value of NULL</span></td></tr>
<tr class="codeline" data-linenumber="335"><td class="num" id="LN335">335</td><td class="line">  <span class='comment'>// for ex_klass indicates that the exception klass is not known; in</span></td></tr>
<tr class="codeline" data-linenumber="336"><td class="num" id="LN336">336</td><td class="line">  <span class='comment'>// this case it matches any constraint class. Returns -1 if the</span></td></tr>
<tr class="codeline" data-linenumber="337"><td class="num" id="LN337">337</td><td class="line">  <span class='comment'>// exception cannot be handled in this method. The handler</span></td></tr>
<tr class="codeline" data-linenumber="338"><td class="num" id="LN338">338</td><td class="line">  <span class='comment'>// constraint classes are loaded if necessary. Note that this may</span></td></tr>
<tr class="codeline" data-linenumber="339"><td class="num" id="LN339">339</td><td class="line">  <span class='comment'>// throw an exception if loading of the constraint classes causes</span></td></tr>
<tr class="codeline" data-linenumber="340"><td class="num" id="LN340">340</td><td class="line">  <span class='comment'>// an IllegalAccessError (bugid 4307310) or an OutOfMemoryError.</span></td></tr>
<tr class="codeline" data-linenumber="341"><td class="num" id="LN341">341</td><td class="line">  <span class='comment'>// If an exception is thrown, returns the bci of the</span></td></tr>
<tr class="codeline" data-linenumber="342"><td class="num" id="LN342">342</td><td class="line">  <span class='comment'>// exception handler which caused the exception to be thrown, which</span></td></tr>
<tr class="codeline" data-linenumber="343"><td class="num" id="LN343">343</td><td class="line">  <span class='comment'>// is needed for proper retries. See, for example,</span></td></tr>
<tr class="codeline" data-linenumber="344"><td class="num" id="LN344">344</td><td class="line">  <span class='comment'>// InterpreterRuntime::exception_handler_for_exception.</span></td></tr>
<tr class="codeline" data-linenumber="345"><td class="num" id="LN345">345</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>int</span> fast_exception_handler_bci_for(<span class='keyword'>const</span> methodHandle&amp; mh, Klass* ex_klass, <span class='keyword'>int</span> throw_bci, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="346"><td class="num" id="LN346">346</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="347"><td class="num" id="LN347">347</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>bool</span> register_native(Klass* k,</td></tr>
<tr class="codeline" data-linenumber="348"><td class="num" id="LN348">348</td><td class="line">                              Symbol* name,</td></tr>
<tr class="codeline" data-linenumber="349"><td class="num" id="LN349">349</td><td class="line">                              Symbol* signature,</td></tr>
<tr class="codeline" data-linenumber="350"><td class="num" id="LN350">350</td><td class="line">                              address entry,</td></tr>
<tr class="codeline" data-linenumber="351"><td class="num" id="LN351">351</td><td class="line">                              <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="352"><td class="num" id="LN352">352</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="353"><td class="num" id="LN353">353</td><td class="line">  <span class='comment'>// method data access</span></td></tr>
<tr class="codeline" data-linenumber="354"><td class="num" id="LN354">354</td><td class="line">  MethodData* method_data() <span class='keyword'>const</span>              {</td></tr>
<tr class="codeline" data-linenumber="355"><td class="num" id="LN355">355</td><td class="line">    <span class='keyword'>return</span> _method_data;</td></tr>
<tr class="codeline" data-linenumber="356"><td class="num" id="LN356">356</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="357"><td class="num" id="LN357">357</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="358"><td class="num" id="LN358">358</td><td class="line">  <span class='keyword'>void</span> set_method_data(MethodData* data);</td></tr>
<tr class="codeline" data-linenumber="359"><td class="num" id="LN359">359</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="360"><td class="num" id="LN360">360</td><td class="line">  MethodCounters* method_counters() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="361"><td class="num" id="LN361">361</td><td class="line">    <span class='keyword'>return</span> _method_counters;</td></tr>
<tr class="codeline" data-linenumber="362"><td class="num" id="LN362">362</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="363"><td class="num" id="LN363">363</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="364"><td class="num" id="LN364">364</td><td class="line">  <span class='keyword'>void</span> clear_method_counters() {</td></tr>
<tr class="codeline" data-linenumber="365"><td class="num" id="LN365">365</td><td class="line">    _method_counters = <span class='macro'>NULL<span class='macro_popup'>__null</span></span>;</td></tr>
<tr class="codeline" data-linenumber="366"><td class="num" id="LN366">366</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="367"><td class="num" id="LN367">367</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="368"><td class="num" id="LN368">368</td><td class="line">  <span class='keyword'>bool</span> init_method_counters(MethodCounters* counters);</td></tr>
<tr class="codeline" data-linenumber="369"><td class="num" id="LN369">369</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="370"><td class="num" id="LN370">370</td><td class="line">  <span class='keyword'>int</span> prev_event_count() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="371"><td class="num" id="LN371">371</td><td class="line">    MethodCounters* mcs = method_counters();</td></tr>
<tr class="codeline" data-linenumber="372"><td class="num" id="LN372">372</td><td class="line">    <span class='keyword'>return</span> mcs == <span class='macro'>NULL<span class='macro_popup'>__null</span></span> ? 0 : mcs-&gt;prev_event_count();</td></tr>
<tr class="codeline" data-linenumber="373"><td class="num" id="LN373">373</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="374"><td class="num" id="LN374">374</td><td class="line">  <span class='keyword'>void</span> set_prev_event_count(<span class='keyword'>int</span> count) {</td></tr>
<tr class="codeline" data-linenumber="375"><td class="num" id="LN375">375</td><td class="line">    MethodCounters* mcs = method_counters();</td></tr>
<tr class="codeline" data-linenumber="376"><td class="num" id="LN376">376</td><td class="line">    <span class='keyword'>if</span> (mcs != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="377"><td class="num" id="LN377">377</td><td class="line">      mcs-&gt;set_prev_event_count(count);</td></tr>
<tr class="codeline" data-linenumber="378"><td class="num" id="LN378">378</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="379"><td class="num" id="LN379">379</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="380"><td class="num" id="LN380">380</td><td class="line">  jlong prev_time() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="381"><td class="num" id="LN381">381</td><td class="line">    MethodCounters* mcs = method_counters();</td></tr>
<tr class="codeline" data-linenumber="382"><td class="num" id="LN382">382</td><td class="line">    <span class='keyword'>return</span> mcs == <span class='macro'>NULL<span class='macro_popup'>__null</span></span> ? 0 : mcs-&gt;prev_time();</td></tr>
<tr class="codeline" data-linenumber="383"><td class="num" id="LN383">383</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="384"><td class="num" id="LN384">384</td><td class="line">  <span class='keyword'>void</span> set_prev_time(jlong time) {</td></tr>
<tr class="codeline" data-linenumber="385"><td class="num" id="LN385">385</td><td class="line">    MethodCounters* mcs = method_counters();</td></tr>
<tr class="codeline" data-linenumber="386"><td class="num" id="LN386">386</td><td class="line">    <span class='keyword'>if</span> (mcs != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="387"><td class="num" id="LN387">387</td><td class="line">      mcs-&gt;set_prev_time(time);</td></tr>
<tr class="codeline" data-linenumber="388"><td class="num" id="LN388">388</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="389"><td class="num" id="LN389">389</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="390"><td class="num" id="LN390">390</td><td class="line">  <span class='keyword'>float</span> rate() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="391"><td class="num" id="LN391">391</td><td class="line">    MethodCounters* mcs = method_counters();</td></tr>
<tr class="codeline" data-linenumber="392"><td class="num" id="LN392">392</td><td class="line">    <span class='keyword'>return</span> mcs == <span class='macro'>NULL<span class='macro_popup'>__null</span></span> ? 0 : mcs-&gt;rate();</td></tr>
<tr class="codeline" data-linenumber="393"><td class="num" id="LN393">393</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="394"><td class="num" id="LN394">394</td><td class="line">  <span class='keyword'>void</span> set_rate(<span class='keyword'>float</span> rate) {</td></tr>
<tr class="codeline" data-linenumber="395"><td class="num" id="LN395">395</td><td class="line">    MethodCounters* mcs = method_counters();</td></tr>
<tr class="codeline" data-linenumber="396"><td class="num" id="LN396">396</td><td class="line">    <span class='keyword'>if</span> (mcs != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="397"><td class="num" id="LN397">397</td><td class="line">      mcs-&gt;set_rate(rate);</td></tr>
<tr class="codeline" data-linenumber="398"><td class="num" id="LN398">398</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="399"><td class="num" id="LN399">399</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="400"><td class="num" id="LN400">400</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="401"><td class="num" id="LN401">401</td><td class="line">  <span class='keyword'>int</span> nmethod_age() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="402"><td class="num" id="LN402">402</td><td class="line">    <span class='keyword'>if</span> (method_counters() == <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="403"><td class="num" id="LN403">403</td><td class="line">      <span class='keyword'>return</span> <span class='macro'>INT_MAX<span class='macro_popup'>2147483647</span></span>;</td></tr>
<tr class="codeline" data-linenumber="404"><td class="num" id="LN404">404</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="405"><td class="num" id="LN405">405</td><td class="line">      <span class='keyword'>return</span> method_counters()-&gt;nmethod_age();</td></tr>
<tr class="codeline" data-linenumber="406"><td class="num" id="LN406">406</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="407"><td class="num" id="LN407">407</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="408"><td class="num" id="LN408">408</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="409"><td class="num" id="LN409">409</td><td class="line">  <span class='keyword'>int</span> invocation_count() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="410"><td class="num" id="LN410">410</td><td class="line">  <span class='keyword'>int</span> backedge_count() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="411"><td class="num" id="LN411">411</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="412"><td class="num" id="LN412">412</td><td class="line">  <span class='keyword'>bool</span> was_executed_more_than(<span class='keyword'>int</span> n);</td></tr>
<tr class="codeline" data-linenumber="413"><td class="num" id="LN413">413</td><td class="line">  <span class='keyword'>bool</span> was_never_executed()                     { <span class='keyword'>return</span> !was_executed_more_than(0);  }</td></tr>
<tr class="codeline" data-linenumber="414"><td class="num" id="LN414">414</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="415"><td class="num" id="LN415">415</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> build_interpreter_method_data(<span class='keyword'>const</span> methodHandle&amp; method, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="416"><td class="num" id="LN416">416</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="417"><td class="num" id="LN417">417</td><td class="line">  <span class='keyword'>static</span> MethodCounters* build_method_counters(Thread* current, Method* m);</td></tr>
<tr class="codeline" data-linenumber="418"><td class="num" id="LN418">418</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="419"><td class="num" id="LN419">419</td><td class="line">  <span class='keyword'>int</span> interpreter_invocation_count()            { <span class='keyword'>return</span> invocation_count();          }</td></tr>
<tr class="codeline" data-linenumber="420"><td class="num" id="LN420">420</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="421"><td class="num" id="LN421">421</td><td class="line"><span class='directive'>#ifndef PRODUCT</span></td></tr>
<tr class="codeline" data-linenumber="422"><td class="num" id="LN422">422</td><td class="line">  int64_t  compiled_invocation_count() <span class='keyword'>const</span>    { <span class='keyword'>return</span> _compiled_invocation_count;}</td></tr>
<tr class="codeline" data-linenumber="423"><td class="num" id="LN423">423</td><td class="line">  <span class='keyword'>void</span> set_compiled_invocation_count(<span class='keyword'>int</span> count) { _compiled_invocation_count = (int64_t)count; }</td></tr>
<tr class="codeline" data-linenumber="424"><td class="num" id="LN424">424</td><td class="line"><span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="425"><td class="num" id="LN425">425</td><td class="line">  <span class='comment'>// for PrintMethodData in a product build</span></td></tr>
<tr class="codeline" data-linenumber="426"><td class="num" id="LN426">426</td><td class="line">  int64_t  compiled_invocation_count() <span class='keyword'>const</span>    { <span class='keyword'>return</span> 0; }</td></tr>
<tr class="codeline" data-linenumber="427"><td class="num" id="LN427">427</td><td class="line"><span class='directive'>#endif // not PRODUCT</span></td></tr>
<tr class="codeline" data-linenumber="428"><td class="num" id="LN428">428</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="429"><td class="num" id="LN429">429</td><td class="line">  <span class='comment'>// Clear (non-shared space) pointers which could not be relevant</span></td></tr>
<tr class="codeline" data-linenumber="430"><td class="num" id="LN430">430</td><td class="line">  <span class='comment'>// if this (shared) method were mapped into another JVM.</span></td></tr>
<tr class="codeline" data-linenumber="431"><td class="num" id="LN431">431</td><td class="line">  <span class='keyword'>void</span> remove_unshareable_info();</td></tr>
<tr class="codeline" data-linenumber="432"><td class="num" id="LN432">432</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="433"><td class="num" id="LN433">433</td><td class="line">  <span class='comment'>// nmethod/verified compiler entry</span></td></tr>
<tr class="codeline" data-linenumber="434"><td class="num" id="LN434">434</td><td class="line">  address verified_code_entry();</td></tr>
<tr class="codeline" data-linenumber="435"><td class="num" id="LN435">435</td><td class="line">  <span class='keyword'>bool</span> check_code() <span class='keyword'>const</span>;      <span class='comment'>// Not inline to avoid circular ref</span></td></tr>
<tr class="codeline" data-linenumber="436"><td class="num" id="LN436">436</td><td class="line">  CompiledMethod* <span class='keyword'>volatile</span> code() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="437"><td class="num" id="LN437">437</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="438"><td class="num" id="LN438">438</td><td class="line">  <span class='comment'>// Locks CompiledMethod_lock if not held.</span></td></tr>
<tr class="codeline" data-linenumber="439"><td class="num" id="LN439">439</td><td class="line">  <span class='keyword'>void</span> unlink_code(CompiledMethod *compare);</td></tr>
<tr class="codeline" data-linenumber="440"><td class="num" id="LN440">440</td><td class="line">  <span class='comment'>// Locks CompiledMethod_lock if not held.</span></td></tr>
<tr class="codeline" data-linenumber="441"><td class="num" id="LN441">441</td><td class="line">  <span class='keyword'>void</span> unlink_code();</td></tr>
<tr class="codeline" data-linenumber="442"><td class="num" id="LN442">442</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="443"><td class="num" id="LN443">443</td><td class="line"><span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="444"><td class="num" id="LN444">444</td><td class="line">  <span class='comment'>// Either called with CompiledMethod_lock held or from constructor.</span></td></tr>
<tr class="codeline" data-linenumber="445"><td class="num" id="LN445">445</td><td class="line">  <span class='keyword'>void</span> clear_code();</td></tr>
<tr class="codeline" data-linenumber="446"><td class="num" id="LN446">446</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="447"><td class="num" id="LN447">447</td><td class="line"><span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="448"><td class="num" id="LN448">448</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> set_code(<span class='keyword'>const</span> methodHandle&amp; mh, CompiledMethod* code);</td></tr>
<tr class="codeline" data-linenumber="449"><td class="num" id="LN449">449</td><td class="line">  <span class='keyword'>void</span> set_adapter_entry(AdapterHandlerEntry* adapter) {</td></tr>
<tr class="codeline" data-linenumber="450"><td class="num" id="LN450">450</td><td class="line">    _adapter = adapter;</td></tr>
<tr class="codeline" data-linenumber="451"><td class="num" id="LN451">451</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="452"><td class="num" id="LN452">452</td><td class="line">  <span class='keyword'>void</span> set_from_compiled_entry(address entry) {</td></tr>
<tr class="codeline" data-linenumber="453"><td class="num" id="LN453">453</td><td class="line">    _from_compiled_entry =  entry;</td></tr>
<tr class="codeline" data-linenumber="454"><td class="num" id="LN454">454</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="455"><td class="num" id="LN455">455</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="456"><td class="num" id="LN456">456</td><td class="line">  address get_i2c_entry();</td></tr>
<tr class="codeline" data-linenumber="457"><td class="num" id="LN457">457</td><td class="line">  address get_c2i_entry();</td></tr>
<tr class="codeline" data-linenumber="458"><td class="num" id="LN458">458</td><td class="line">  address get_c2i_unverified_entry();</td></tr>
<tr class="codeline" data-linenumber="459"><td class="num" id="LN459">459</td><td class="line">  address get_c2i_no_clinit_check_entry();</td></tr>
<tr class="codeline" data-linenumber="460"><td class="num" id="LN460">460</td><td class="line">  AdapterHandlerEntry* adapter() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="461"><td class="num" id="LN461">461</td><td class="line">    <span class='keyword'>return</span> _adapter;</td></tr>
<tr class="codeline" data-linenumber="462"><td class="num" id="LN462">462</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="463"><td class="num" id="LN463">463</td><td class="line">  <span class='comment'>// setup entry points</span></td></tr>
<tr class="codeline" data-linenumber="464"><td class="num" id="LN464">464</td><td class="line">  <span class='keyword'>void</span> link_method(<span class='keyword'>const</span> methodHandle&amp; method, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="465"><td class="num" id="LN465">465</td><td class="line">  <span class='comment'>// clear entry points. Used by sharing code during dump time</span></td></tr>
<tr class="codeline" data-linenumber="466"><td class="num" id="LN466">466</td><td class="line">  <span class='keyword'>void</span> unlink_method() NOT_CDS_RETURN;</td></tr>
<tr class="codeline" data-linenumber="467"><td class="num" id="LN467">467</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="468"><td class="num" id="LN468">468</td><td class="line">  <span class='keyword'>virtual</span> <span class='keyword'>void</span> metaspace_pointers_do(MetaspaceClosure* iter);</td></tr>
<tr class="codeline" data-linenumber="469"><td class="num" id="LN469">469</td><td class="line">  <span class='keyword'>virtual</span> MetaspaceObj::Type type() <span class='keyword'>const</span> { <span class='keyword'>return</span> MethodType; }</td></tr>
<tr class="codeline" data-linenumber="470"><td class="num" id="LN470">470</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="471"><td class="num" id="LN471">471</td><td class="line">  <span class='comment'>// vtable index</span></td></tr>
<tr class="codeline" data-linenumber="472"><td class="num" id="LN472">472</td><td class="line">  <span class='keyword'>enum</span> VtableIndexFlag {</td></tr>
<tr class="codeline" data-linenumber="473"><td class="num" id="LN473">473</td><td class="line">    <span class='comment'>// Valid vtable indexes are non-negative (&gt;= 0).</span></td></tr>
<tr class="codeline" data-linenumber="474"><td class="num" id="LN474">474</td><td class="line">    <span class='comment'>// These few negative values are used as sentinels.</span></td></tr>
<tr class="codeline" data-linenumber="475"><td class="num" id="LN475">475</td><td class="line">    itable_index_max        = -10, <span class='comment'>// first itable index, growing downward</span></td></tr>
<tr class="codeline" data-linenumber="476"><td class="num" id="LN476">476</td><td class="line">    pending_itable_index    = -9,  <span class='comment'>// itable index will be assigned</span></td></tr>
<tr class="codeline" data-linenumber="477"><td class="num" id="LN477">477</td><td class="line">    invalid_vtable_index    = -4,  <span class='comment'>// distinct from any valid vtable index</span></td></tr>
<tr class="codeline" data-linenumber="478"><td class="num" id="LN478">478</td><td class="line">    garbage_vtable_index    = -3,  <span class='comment'>// not yet linked; no vtable layout yet</span></td></tr>
<tr class="codeline" data-linenumber="479"><td class="num" id="LN479">479</td><td class="line">    nonvirtual_vtable_index = -2   <span class='comment'>// there is no need for vtable dispatch</span></td></tr>
<tr class="codeline" data-linenumber="480"><td class="num" id="LN480">480</td><td class="line">    <span class='comment'>// 6330203 Note:  Do not use -1, which was overloaded with many meanings.</span></td></tr>
<tr class="codeline" data-linenumber="481"><td class="num" id="LN481">481</td><td class="line">  };</td></tr>
<tr class="codeline" data-linenumber="482"><td class="num" id="LN482">482</td><td class="line">  <span class='macro'>DEBUG_ONLY(<span class='keyword'>bool</span> valid_vtable_index() <span class='keyword'>const</span>     { <span class='keyword'>return</span> _vtable_index &gt;= nonvirtual_vtable_index; })<span class='macro_popup'>bool valid_vtable_index() const { return _vtable_index &gt;= nonvirtual_vtable_index<br>; }</span></span></td></tr>
<tr class="codeline" data-linenumber="483"><td class="num" id="LN483">483</td><td class="line">  <span class='keyword'>bool</span> has_vtable_index() <span class='keyword'>const</span>                  { <span class='keyword'>return</span> _vtable_index &gt;= 0; }</td></tr>
<tr class="codeline" data-linenumber="484"><td class="num" id="LN484">484</td><td class="line">  <span class='keyword'>int</span>  vtable_index() <span class='keyword'>const</span>                      { <span class='keyword'>return</span> _vtable_index; }</td></tr>
<tr class="codeline" data-linenumber="485"><td class="num" id="LN485">485</td><td class="line">  <span class='keyword'>void</span> set_vtable_index(<span class='keyword'>int</span> index);</td></tr>
<tr class="codeline" data-linenumber="486"><td class="num" id="LN486">486</td><td class="line">  <span class='macro'>DEBUG_ONLY(<span class='keyword'>bool</span> valid_itable_index() <span class='keyword'>const</span>     { <span class='keyword'>return</span> _vtable_index &lt;= pending_itable_index; })<span class='macro_popup'>bool valid_itable_index() const { return _vtable_index &lt;= pending_itable_index<br>; }</span></span></td></tr>
<tr class="codeline" data-linenumber="487"><td class="num" id="LN487">487</td><td class="line">  <span class='keyword'>bool</span> has_itable_index() <span class='keyword'>const</span>                  { <span class='keyword'>return</span> _vtable_index &lt;= itable_index_max; }</td></tr>
<tr class="codeline" data-linenumber="488"><td class="num" id="LN488">488</td><td class="line">  <span class='keyword'>int</span>  itable_index() <span class='keyword'>const</span>                      { <span class='macro'>assert(valid_itable_index(), <span class='string_literal'>""</span>)<span class='macro_popup'>do { if (!(valid_itable_index())) { (*g_assert_poison) = 'X';<br>; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp"<br>, 488, "assert(" "valid_itable_index()" ") failed", ""); ::breakpoint<br>(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="489"><td class="num" id="LN489">489</td><td class="line">                                                   <span class='keyword'>return</span> itable_index_max - _vtable_index; }</td></tr>
<tr class="codeline" data-linenumber="490"><td class="num" id="LN490">490</td><td class="line">  <span class='keyword'>void</span> set_itable_index(<span class='keyword'>int</span> index);</td></tr>
<tr class="codeline" data-linenumber="491"><td class="num" id="LN491">491</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="492"><td class="num" id="LN492">492</td><td class="line">  <span class='comment'>// interpreter entry</span></td></tr>
<tr class="codeline" data-linenumber="493"><td class="num" id="LN493">493</td><td class="line">  address interpreter_entry() <span class='keyword'>const</span>              { <span class='keyword'>return</span> _i2i_entry; }</td></tr>
<tr class="codeline" data-linenumber="494"><td class="num" id="LN494">494</td><td class="line">  <span class='comment'>// Only used when first initialize so we can set _i2i_entry and _from_interpreted_entry</span></td></tr>
<tr class="codeline" data-linenumber="495"><td class="num" id="LN495">495</td><td class="line">  <span class='keyword'>void</span> set_interpreter_entry(address entry) {</td></tr>
<tr class="codeline" data-linenumber="496"><td class="num" id="LN496">496</td><td class="line">    <span class='keyword'>if</span> (_i2i_entry != entry) {</td></tr>
<tr class="codeline" data-linenumber="497"><td class="num" id="LN497">497</td><td class="line">      _i2i_entry = entry;</td></tr>
<tr class="codeline" data-linenumber="498"><td class="num" id="LN498">498</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="499"><td class="num" id="LN499">499</td><td class="line">    <span class='keyword'>if</span> (_from_interpreted_entry != entry) {</td></tr>
<tr class="codeline" data-linenumber="500"><td class="num" id="LN500">500</td><td class="line">      _from_interpreted_entry = entry;</td></tr>
<tr class="codeline" data-linenumber="501"><td class="num" id="LN501">501</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="502"><td class="num" id="LN502">502</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="503"><td class="num" id="LN503">503</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="504"><td class="num" id="LN504">504</td><td class="line">  <span class='comment'>// native function (used for native methods only)</span></td></tr>
<tr class="codeline" data-linenumber="505"><td class="num" id="LN505">505</td><td class="line">  <span class='keyword'>enum</span> {</td></tr>
<tr class="codeline" data-linenumber="506"><td class="num" id="LN506">506</td><td class="line">    native_bind_event_is_interesting = <span class='keyword'>true</span></td></tr>
<tr class="codeline" data-linenumber="507"><td class="num" id="LN507">507</td><td class="line">  };</td></tr>
<tr class="codeline" data-linenumber="508"><td class="num" id="LN508">508</td><td class="line">  address native_function() <span class='keyword'>const</span>                { <span class='keyword'>return</span> *(native_function_addr()); }</td></tr>
<tr class="codeline" data-linenumber="509"><td class="num" id="LN509">509</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="510"><td class="num" id="LN510">510</td><td class="line">  <span class='comment'>// Must specify a real function (not NULL).</span></td></tr>
<tr class="codeline" data-linenumber="511"><td class="num" id="LN511">511</td><td class="line">  <span class='comment'>// Use clear_native_function() to unregister.</span></td></tr>
<tr class="codeline" data-linenumber="512"><td class="num" id="LN512">512</td><td class="line">  <span class='keyword'>void</span> set_native_function(address function, <span class='keyword'>bool</span> post_event_flag);</td></tr>
<tr class="codeline" data-linenumber="513"><td class="num" id="LN513">513</td><td class="line">  <span class='keyword'>bool</span> has_native_function() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="514"><td class="num" id="LN514">514</td><td class="line">  <span class='keyword'>void</span> clear_native_function();</td></tr>
<tr class="codeline" data-linenumber="515"><td class="num" id="LN515">515</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="516"><td class="num" id="LN516">516</td><td class="line">  <span class='comment'>// signature handler (used for native methods only)</span></td></tr>
<tr class="codeline" data-linenumber="517"><td class="num" id="LN517">517</td><td class="line">  address signature_handler() <span class='keyword'>const</span>              { <span class='keyword'>return</span> *(signature_handler_addr()); }</td></tr>
<tr class="codeline" data-linenumber="518"><td class="num" id="LN518">518</td><td class="line">  <span class='keyword'>void</span> set_signature_handler(address handler);</td></tr>
<tr class="codeline" data-linenumber="519"><td class="num" id="LN519">519</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="520"><td class="num" id="LN520">520</td><td class="line">  <span class='comment'>// Interpreter oopmap support</span></td></tr>
<tr class="codeline" data-linenumber="521"><td class="num" id="LN521">521</td><td class="line">  <span class='keyword'>void</span> mask_for(<span class='keyword'>int</span> bci, InterpreterOopMap* mask);</td></tr>
<tr class="codeline" data-linenumber="522"><td class="num" id="LN522">522</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="523"><td class="num" id="LN523">523</td><td class="line">  <span class='comment'>// operations on invocation counter</span></td></tr>
<tr class="codeline" data-linenumber="524"><td class="num" id="LN524">524</td><td class="line">  <span class='keyword'>void</span> print_invocation_count();</td></tr>
<tr class="codeline" data-linenumber="525"><td class="num" id="LN525">525</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="526"><td class="num" id="LN526">526</td><td class="line">  <span class='comment'>// byte codes</span></td></tr>
<tr class="codeline" data-linenumber="527"><td class="num" id="LN527">527</td><td class="line">  <span class='keyword'>void</span>    set_code(address code)      { <span class='keyword'>return</span> <span class="mrange">constMethod()-&gt;set_code(<span class="mrange">code</span>)</span>; }</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path40" class="msg msgEvent" style="margin-left:72ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">40</div></td><td><div class="PathNav"><a href="#Path39" title="Previous event (39)">&#x2190;</a></div></td><td>Passing null pointer value via 1st parameter 'code'</td><td><div class="PathNav"><a href="#Path41" title="Next event (41)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path41" class="msg msgEvent" style="margin-left:48ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">41</div></td><td><div class="PathNav"><a href="#Path40" title="Previous event (40)">&#x2190;</a></div></td><td>Calling 'ConstMethod::set_code'</td><td><div class="PathNav"><a href="#Path42" title="Next event (42)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="528"><td class="num" id="LN528">528</td><td class="line">  address code_base() <span class='keyword'>const</span>           { <span class='keyword'>return</span> constMethod()-&gt;code_base(); }</td></tr>
<tr class="codeline" data-linenumber="529"><td class="num" id="LN529">529</td><td class="line">  <span class='keyword'>bool</span>    contains(address bcp) <span class='keyword'>const</span> { <span class='keyword'>return</span> constMethod()-&gt;contains(bcp); }</td></tr>
<tr class="codeline" data-linenumber="530"><td class="num" id="LN530">530</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="531"><td class="num" id="LN531">531</td><td class="line">  <span class='comment'>// prints byte codes</span></td></tr>
<tr class="codeline" data-linenumber="532"><td class="num" id="LN532">532</td><td class="line">  <span class='keyword'>void</span> print_codes() <span class='keyword'>const</span>            { print_codes_on(tty); }</td></tr>
<tr class="codeline" data-linenumber="533"><td class="num" id="LN533">533</td><td class="line">  <span class='keyword'>void</span> print_codes_on(outputStream* st) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="534"><td class="num" id="LN534">534</td><td class="line">  <span class='keyword'>void</span> print_codes_on(<span class='keyword'>int</span> from, <span class='keyword'>int</span> to, outputStream* st) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="535"><td class="num" id="LN535">535</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="536"><td class="num" id="LN536">536</td><td class="line">  <span class='comment'>// method parameters</span></td></tr>
<tr class="codeline" data-linenumber="537"><td class="num" id="LN537">537</td><td class="line">  <span class='keyword'>bool</span> has_method_parameters() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="538"><td class="num" id="LN538">538</td><td class="line">                         { <span class='keyword'>return</span> constMethod()-&gt;has_method_parameters(); }</td></tr>
<tr class="codeline" data-linenumber="539"><td class="num" id="LN539">539</td><td class="line">  <span class='keyword'>int</span> method_parameters_length() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="540"><td class="num" id="LN540">540</td><td class="line">                         { <span class='keyword'>return</span> constMethod()-&gt;method_parameters_length(); }</td></tr>
<tr class="codeline" data-linenumber="541"><td class="num" id="LN541">541</td><td class="line">  MethodParametersElement* method_parameters_start() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="542"><td class="num" id="LN542">542</td><td class="line">                          { <span class='keyword'>return</span> constMethod()-&gt;method_parameters_start(); }</td></tr>
<tr class="codeline" data-linenumber="543"><td class="num" id="LN543">543</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="544"><td class="num" id="LN544">544</td><td class="line">  <span class='comment'>// checked exceptions</span></td></tr>
<tr class="codeline" data-linenumber="545"><td class="num" id="LN545">545</td><td class="line">  <span class='keyword'>int</span> checked_exceptions_length() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="546"><td class="num" id="LN546">546</td><td class="line">                         { <span class='keyword'>return</span> constMethod()-&gt;checked_exceptions_length(); }</td></tr>
<tr class="codeline" data-linenumber="547"><td class="num" id="LN547">547</td><td class="line">  CheckedExceptionElement* checked_exceptions_start() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="548"><td class="num" id="LN548">548</td><td class="line">                          { <span class='keyword'>return</span> constMethod()-&gt;checked_exceptions_start(); }</td></tr>
<tr class="codeline" data-linenumber="549"><td class="num" id="LN549">549</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="550"><td class="num" id="LN550">550</td><td class="line">  <span class='comment'>// localvariable table</span></td></tr>
<tr class="codeline" data-linenumber="551"><td class="num" id="LN551">551</td><td class="line">  <span class='keyword'>bool</span> has_localvariable_table() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="552"><td class="num" id="LN552">552</td><td class="line">                          { <span class='keyword'>return</span> constMethod()-&gt;has_localvariable_table(); }</td></tr>
<tr class="codeline" data-linenumber="553"><td class="num" id="LN553">553</td><td class="line">  <span class='keyword'>int</span> localvariable_table_length() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="554"><td class="num" id="LN554">554</td><td class="line">                        { <span class='keyword'>return</span> constMethod()-&gt;localvariable_table_length(); }</td></tr>
<tr class="codeline" data-linenumber="555"><td class="num" id="LN555">555</td><td class="line">  LocalVariableTableElement* localvariable_table_start() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="556"><td class="num" id="LN556">556</td><td class="line">                         { <span class='keyword'>return</span> constMethod()-&gt;localvariable_table_start(); }</td></tr>
<tr class="codeline" data-linenumber="557"><td class="num" id="LN557">557</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="558"><td class="num" id="LN558">558</td><td class="line">  <span class='keyword'>bool</span> has_linenumber_table() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="559"><td class="num" id="LN559">559</td><td class="line">                              { <span class='keyword'>return</span> constMethod()-&gt;has_linenumber_table(); }</td></tr>
<tr class="codeline" data-linenumber="560"><td class="num" id="LN560">560</td><td class="line">  u_char* compressed_linenumber_table() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="561"><td class="num" id="LN561">561</td><td class="line">                       { <span class='keyword'>return</span> constMethod()-&gt;compressed_linenumber_table(); }</td></tr>
<tr class="codeline" data-linenumber="562"><td class="num" id="LN562">562</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="563"><td class="num" id="LN563">563</td><td class="line">  <span class='comment'>// method holder (the Klass* holding this method)</span></td></tr>
<tr class="codeline" data-linenumber="564"><td class="num" id="LN564">564</td><td class="line">  InstanceKlass* method_holder() <span class='keyword'>const</span>         { <span class='keyword'>return</span> constants()-&gt;pool_holder(); }</td></tr>
<tr class="codeline" data-linenumber="565"><td class="num" id="LN565">565</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="566"><td class="num" id="LN566">566</td><td class="line">  Symbol* klass_name() <span class='keyword'>const</span>;                    <span class='comment'>// returns the name of the method holder</span></td></tr>
<tr class="codeline" data-linenumber="567"><td class="num" id="LN567">567</td><td class="line">  BasicType result_type() <span class='keyword'>const</span>                  { <span class='keyword'>return</span> constMethod()-&gt;result_type(); }</td></tr>
<tr class="codeline" data-linenumber="568"><td class="num" id="LN568">568</td><td class="line">  <span class='keyword'>bool</span> is_returning_oop() <span class='keyword'>const</span>                  { BasicType r = result_type(); <span class='keyword'>return</span> is_reference_type(r); }</td></tr>
<tr class="codeline" data-linenumber="569"><td class="num" id="LN569">569</td><td class="line">  <span class='keyword'>bool</span> is_returning_fp() <span class='keyword'>const</span>                   { BasicType r = result_type(); <span class='keyword'>return</span> (r == T_FLOAT || r == T_DOUBLE); }</td></tr>
<tr class="codeline" data-linenumber="570"><td class="num" id="LN570">570</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="571"><td class="num" id="LN571">571</td><td class="line">  <span class='comment'>// Checked exceptions thrown by this method (resolved to mirrors)</span></td></tr>
<tr class="codeline" data-linenumber="572"><td class="num" id="LN572">572</td><td class="line">  objArrayHandle resolved_checked_exceptions(<span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>) { <span class='keyword'>return</span> resolved_checked_exceptions_impl(<span class='keyword'>this</span>, <span class='macro'>THREAD<span class='macro_popup'>__the_thread__</span></span>); }</td></tr>
<tr class="codeline" data-linenumber="573"><td class="num" id="LN573">573</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="574"><td class="num" id="LN574">574</td><td class="line">  <span class='comment'>// Access flags</span></td></tr>
<tr class="codeline" data-linenumber="575"><td class="num" id="LN575">575</td><td class="line">  <span class='keyword'>bool</span> is_public() <span class='keyword'>const</span>                         { <span class='keyword'>return</span> access_flags().is_public();      }</td></tr>
<tr class="codeline" data-linenumber="576"><td class="num" id="LN576">576</td><td class="line">  <span class='keyword'>bool</span> is_private() <span class='keyword'>const</span>                        { <span class='keyword'>return</span> access_flags().is_private();     }</td></tr>
<tr class="codeline" data-linenumber="577"><td class="num" id="LN577">577</td><td class="line">  <span class='keyword'>bool</span> is_protected() <span class='keyword'>const</span>                      { <span class='keyword'>return</span> access_flags().is_protected();   }</td></tr>
<tr class="codeline" data-linenumber="578"><td class="num" id="LN578">578</td><td class="line">  <span class='keyword'>bool</span> is_package_private() <span class='keyword'>const</span>                { <span class='keyword'>return</span> !is_public() &amp;&amp; !is_private() &amp;&amp; !is_protected(); }</td></tr>
<tr class="codeline" data-linenumber="579"><td class="num" id="LN579">579</td><td class="line">  <span class='keyword'>bool</span> is_static() <span class='keyword'>const</span>                         { <span class='keyword'>return</span> access_flags().is_static();      }</td></tr>
<tr class="codeline" data-linenumber="580"><td class="num" id="LN580">580</td><td class="line">  <span class='keyword'>bool</span> is_final() <span class='keyword'>const</span>                          { <span class='keyword'>return</span> access_flags().is_final();       }</td></tr>
<tr class="codeline" data-linenumber="581"><td class="num" id="LN581">581</td><td class="line">  <span class='keyword'>bool</span> is_synchronized() <span class='keyword'>const</span>                   { <span class='keyword'>return</span> access_flags().is_synchronized();}</td></tr>
<tr class="codeline" data-linenumber="582"><td class="num" id="LN582">582</td><td class="line">  <span class='keyword'>bool</span> is_native() <span class='keyword'>const</span>                         { <span class='keyword'>return</span> access_flags().is_native();      }</td></tr>
<tr class="codeline" data-linenumber="583"><td class="num" id="LN583">583</td><td class="line">  <span class='keyword'>bool</span> is_abstract() <span class='keyword'>const</span>                       { <span class='keyword'>return</span> access_flags().is_abstract();    }</td></tr>
<tr class="codeline" data-linenumber="584"><td class="num" id="LN584">584</td><td class="line">  <span class='keyword'>bool</span> is_synthetic() <span class='keyword'>const</span>                      { <span class='keyword'>return</span> access_flags().is_synthetic();   }</td></tr>
<tr class="codeline" data-linenumber="585"><td class="num" id="LN585">585</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="586"><td class="num" id="LN586">586</td><td class="line">  <span class='comment'>// returns true if contains only return operation</span></td></tr>
<tr class="codeline" data-linenumber="587"><td class="num" id="LN587">587</td><td class="line">  <span class='keyword'>bool</span> is_empty_method() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="588"><td class="num" id="LN588">588</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="589"><td class="num" id="LN589">589</td><td class="line">  <span class='comment'>// returns true if this is a vanilla constructor</span></td></tr>
<tr class="codeline" data-linenumber="590"><td class="num" id="LN590">590</td><td class="line">  <span class='keyword'>bool</span> is_vanilla_constructor() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="591"><td class="num" id="LN591">591</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="592"><td class="num" id="LN592">592</td><td class="line">  <span class='comment'>// checks method and its method holder</span></td></tr>
<tr class="codeline" data-linenumber="593"><td class="num" id="LN593">593</td><td class="line">  <span class='keyword'>bool</span> is_final_method() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="594"><td class="num" id="LN594">594</td><td class="line">  <span class='keyword'>bool</span> is_final_method(AccessFlags class_access_flags) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="595"><td class="num" id="LN595">595</td><td class="line">  <span class='comment'>// interface method declared with 'default' - excludes private interface methods</span></td></tr>
<tr class="codeline" data-linenumber="596"><td class="num" id="LN596">596</td><td class="line">  <span class='keyword'>bool</span> is_default_method() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="597"><td class="num" id="LN597">597</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="598"><td class="num" id="LN598">598</td><td class="line">  <span class='comment'>// true if method needs no dynamic dispatch (final and/or no vtable entry)</span></td></tr>
<tr class="codeline" data-linenumber="599"><td class="num" id="LN599">599</td><td class="line">  <span class='keyword'>bool</span> can_be_statically_bound() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="600"><td class="num" id="LN600">600</td><td class="line">  <span class='keyword'>bool</span> can_be_statically_bound(InstanceKlass* context) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="601"><td class="num" id="LN601">601</td><td class="line">  <span class='keyword'>bool</span> can_be_statically_bound(AccessFlags class_access_flags) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="602"><td class="num" id="LN602">602</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="603"><td class="num" id="LN603">603</td><td class="line">  <span class='comment'>// true if method can omit stack trace in throw in compiled code.</span></td></tr>
<tr class="codeline" data-linenumber="604"><td class="num" id="LN604">604</td><td class="line">  <span class='keyword'>bool</span> can_omit_stack_trace();</td></tr>
<tr class="codeline" data-linenumber="605"><td class="num" id="LN605">605</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="606"><td class="num" id="LN606">606</td><td class="line">  <span class='comment'>// returns true if the method has any backward branches.</span></td></tr>
<tr class="codeline" data-linenumber="607"><td class="num" id="LN607">607</td><td class="line">  <span class='keyword'>bool</span> has_loops() {</td></tr>
<tr class="codeline" data-linenumber="608"><td class="num" id="LN608">608</td><td class="line">    <span class='keyword'>return</span> access_flags().loops_flag_init() ? access_flags().has_loops() : compute_has_loops_flag();</td></tr>
<tr class="codeline" data-linenumber="609"><td class="num" id="LN609">609</td><td class="line">  };</td></tr>
<tr class="codeline" data-linenumber="610"><td class="num" id="LN610">610</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="611"><td class="num" id="LN611">611</td><td class="line">  <span class='keyword'>bool</span> compute_has_loops_flag();</td></tr>
<tr class="codeline" data-linenumber="612"><td class="num" id="LN612">612</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="613"><td class="num" id="LN613">613</td><td class="line">  <span class='keyword'>bool</span> has_jsrs() {</td></tr>
<tr class="codeline" data-linenumber="614"><td class="num" id="LN614">614</td><td class="line">    <span class='keyword'>return</span> access_flags().has_jsrs();</td></tr>
<tr class="codeline" data-linenumber="615"><td class="num" id="LN615">615</td><td class="line">  };</td></tr>
<tr class="codeline" data-linenumber="616"><td class="num" id="LN616">616</td><td class="line">  <span class='keyword'>void</span> set_has_jsrs() {</td></tr>
<tr class="codeline" data-linenumber="617"><td class="num" id="LN617">617</td><td class="line">    _access_flags.set_has_jsrs();</td></tr>
<tr class="codeline" data-linenumber="618"><td class="num" id="LN618">618</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="619"><td class="num" id="LN619">619</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="620"><td class="num" id="LN620">620</td><td class="line">  <span class='comment'>// returns true if the method has any monitors.</span></td></tr>
<tr class="codeline" data-linenumber="621"><td class="num" id="LN621">621</td><td class="line">  <span class='keyword'>bool</span> has_monitors() <span class='keyword'>const</span>                      { <span class='keyword'>return</span> is_synchronized() || access_flags().has_monitor_bytecodes(); }</td></tr>
<tr class="codeline" data-linenumber="622"><td class="num" id="LN622">622</td><td class="line">  <span class='keyword'>bool</span> has_monitor_bytecodes() <span class='keyword'>const</span>             { <span class='keyword'>return</span> access_flags().has_monitor_bytecodes(); }</td></tr>
<tr class="codeline" data-linenumber="623"><td class="num" id="LN623">623</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="624"><td class="num" id="LN624">624</td><td class="line">  <span class='keyword'>void</span> set_has_monitor_bytecodes()               { _access_flags.set_has_monitor_bytecodes(); }</td></tr>
<tr class="codeline" data-linenumber="625"><td class="num" id="LN625">625</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="626"><td class="num" id="LN626">626</td><td class="line">  <span class='comment'>// monitor matching. This returns a conservative estimate of whether the monitorenter/monitorexit bytecodes</span></td></tr>
<tr class="codeline" data-linenumber="627"><td class="num" id="LN627">627</td><td class="line">  <span class='comment'>// propererly nest in the method. It might return false, even though they actually nest properly, since the info.</span></td></tr>
<tr class="codeline" data-linenumber="628"><td class="num" id="LN628">628</td><td class="line">  <span class='comment'>// has not been computed yet.</span></td></tr>
<tr class="codeline" data-linenumber="629"><td class="num" id="LN629">629</td><td class="line">  <span class='keyword'>bool</span> guaranteed_monitor_matching() <span class='keyword'>const</span>       { <span class='keyword'>return</span> access_flags().is_monitor_matching(); }</td></tr>
<tr class="codeline" data-linenumber="630"><td class="num" id="LN630">630</td><td class="line">  <span class='keyword'>void</span> set_guaranteed_monitor_matching()         { _access_flags.set_monitor_matching(); }</td></tr>
<tr class="codeline" data-linenumber="631"><td class="num" id="LN631">631</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="632"><td class="num" id="LN632">632</td><td class="line">  <span class='comment'>// returns true if the method is an accessor function (setter/getter).</span></td></tr>
<tr class="codeline" data-linenumber="633"><td class="num" id="LN633">633</td><td class="line">  <span class='keyword'>bool</span> is_accessor() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="634"><td class="num" id="LN634">634</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="635"><td class="num" id="LN635">635</td><td class="line">  <span class='comment'>// returns true if the method is a getter</span></td></tr>
<tr class="codeline" data-linenumber="636"><td class="num" id="LN636">636</td><td class="line">  <span class='keyword'>bool</span> is_getter() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="637"><td class="num" id="LN637">637</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="638"><td class="num" id="LN638">638</td><td class="line">  <span class='comment'>// returns true if the method is a setter</span></td></tr>
<tr class="codeline" data-linenumber="639"><td class="num" id="LN639">639</td><td class="line">  <span class='keyword'>bool</span> is_setter() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="640"><td class="num" id="LN640">640</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="641"><td class="num" id="LN641">641</td><td class="line">  <span class='comment'>// returns true if the method does nothing but return a constant of primitive type</span></td></tr>
<tr class="codeline" data-linenumber="642"><td class="num" id="LN642">642</td><td class="line">  <span class='keyword'>bool</span> is_constant_getter() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="643"><td class="num" id="LN643">643</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="644"><td class="num" id="LN644">644</td><td class="line">  <span class='comment'>// returns true if the method is an initializer (&lt;init&gt; or &lt;clinit&gt;).</span></td></tr>
<tr class="codeline" data-linenumber="645"><td class="num" id="LN645">645</td><td class="line">  <span class='keyword'>bool</span> is_initializer() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="646"><td class="num" id="LN646">646</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="647"><td class="num" id="LN647">647</td><td class="line">  <span class='comment'>// returns true if the method is static OR if the classfile version &lt; 51</span></td></tr>
<tr class="codeline" data-linenumber="648"><td class="num" id="LN648">648</td><td class="line">  <span class='keyword'>bool</span> has_valid_initializer_flags() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="649"><td class="num" id="LN649">649</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="650"><td class="num" id="LN650">650</td><td class="line">  <span class='comment'>// returns true if the method name is &lt;clinit&gt; and the method has</span></td></tr>
<tr class="codeline" data-linenumber="651"><td class="num" id="LN651">651</td><td class="line">  <span class='comment'>// valid static initializer flags.</span></td></tr>
<tr class="codeline" data-linenumber="652"><td class="num" id="LN652">652</td><td class="line">  <span class='keyword'>bool</span> is_static_initializer() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="653"><td class="num" id="LN653">653</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="654"><td class="num" id="LN654">654</td><td class="line">  <span class='comment'>// returns true if the method name is &lt;init&gt;</span></td></tr>
<tr class="codeline" data-linenumber="655"><td class="num" id="LN655">655</td><td class="line">  <span class='keyword'>bool</span> is_object_initializer() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="656"><td class="num" id="LN656">656</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="657"><td class="num" id="LN657">657</td><td class="line">  <span class='comment'>// compiled code support</span></td></tr>
<tr class="codeline" data-linenumber="658"><td class="num" id="LN658">658</td><td class="line">  <span class='comment'>// NOTE: code() is inherently racy as deopt can be clearing code</span></td></tr>
<tr class="codeline" data-linenumber="659"><td class="num" id="LN659">659</td><td class="line">  <span class='comment'>// simultaneously. Use with caution.</span></td></tr>
<tr class="codeline" data-linenumber="660"><td class="num" id="LN660">660</td><td class="line">  <span class='keyword'>bool</span> has_compiled_code() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="661"><td class="num" id="LN661">661</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="662"><td class="num" id="LN662">662</td><td class="line">  <span class='keyword'>bool</span> needs_clinit_barrier() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="663"><td class="num" id="LN663">663</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="664"><td class="num" id="LN664">664</td><td class="line">  <span class='comment'>// sizing</span></td></tr>
<tr class="codeline" data-linenumber="665"><td class="num" id="LN665">665</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>int</span> header_size()                       {</td></tr>
<tr class="codeline" data-linenumber="666"><td class="num" id="LN666">666</td><td class="line">    <span class='keyword'>return</span> align_up((<span class='keyword'>int</span>)<span class='keyword'>sizeof</span>(Method), wordSize) / wordSize;</td></tr>
<tr class="codeline" data-linenumber="667"><td class="num" id="LN667">667</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="668"><td class="num" id="LN668">668</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>int</span> size(<span class='keyword'>bool</span> is_native);</td></tr>
<tr class="codeline" data-linenumber="669"><td class="num" id="LN669">669</td><td class="line">  <span class='keyword'>int</span> size() <span class='keyword'>const</span>                               { <span class='keyword'>return</span> method_size(); }</td></tr>
<tr class="codeline" data-linenumber="670"><td class="num" id="LN670">670</td><td class="line">  <span class='keyword'>void</span> log_touched(Thread* current);</td></tr>
<tr class="codeline" data-linenumber="671"><td class="num" id="LN671">671</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> print_touched_methods(outputStream* out);</td></tr>
<tr class="codeline" data-linenumber="672"><td class="num" id="LN672">672</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="673"><td class="num" id="LN673">673</td><td class="line">  <span class='comment'>// interpreter support</span></td></tr>
<tr class="codeline" data-linenumber="674"><td class="num" id="LN674">674</td><td class="line">  <span class='keyword'>static</span> ByteSize const_offset()                 { <span class='keyword'>return</span> <span class='macro'>byte_offset_of(Method, _constMethod       )<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((Method*)16)-&gt;_constMethod<br>) - 16))</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="675"><td class="num" id="LN675">675</td><td class="line">  <span class='keyword'>static</span> ByteSize access_flags_offset()          { <span class='keyword'>return</span> <span class='macro'>byte_offset_of(Method, _access_flags      )<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((Method*)16)-&gt;_access_flags<br>) - 16))</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="676"><td class="num" id="LN676">676</td><td class="line">  <span class='keyword'>static</span> ByteSize from_compiled_offset()         { <span class='keyword'>return</span> <span class='macro'>byte_offset_of(Method, _from_compiled_entry)<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((Method*)16)-&gt;_from_compiled_entry<br>) - 16))</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="677"><td class="num" id="LN677">677</td><td class="line">  <span class='keyword'>static</span> ByteSize code_offset()                  { <span class='keyword'>return</span> <span class='macro'>byte_offset_of(Method, _code)<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((Method*)16)-&gt;_code<br>) - 16))</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="678"><td class="num" id="LN678">678</td><td class="line">  <span class='keyword'>static</span> ByteSize method_data_offset()           {</td></tr>
<tr class="codeline" data-linenumber="679"><td class="num" id="LN679">679</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>byte_offset_of(Method, _method_data)<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((Method*)16)-&gt;_method_data<br>) - 16))</span></span>;</td></tr>
<tr class="codeline" data-linenumber="680"><td class="num" id="LN680">680</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="681"><td class="num" id="LN681">681</td><td class="line">  <span class='keyword'>static</span> ByteSize method_counters_offset()       {</td></tr>
<tr class="codeline" data-linenumber="682"><td class="num" id="LN682">682</td><td class="line">    <span class='keyword'>return</span> <span class='macro'>byte_offset_of(Method, _method_counters)<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((Method*)16)-&gt;_method_counters<br>) - 16))</span></span>;</td></tr>
<tr class="codeline" data-linenumber="683"><td class="num" id="LN683">683</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="684"><td class="num" id="LN684">684</td><td class="line"><span class='directive'>#ifndef PRODUCT</span></td></tr>
<tr class="codeline" data-linenumber="685"><td class="num" id="LN685">685</td><td class="line">  <span class='keyword'>static</span> ByteSize compiled_invocation_counter_offset() { <span class='keyword'>return</span> <span class='macro'>byte_offset_of(Method, _compiled_invocation_count)<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((Method*)16)-&gt;_compiled_invocation_count<br>) - 16))</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="686"><td class="num" id="LN686">686</td><td class="line"><span class='directive'>#endif // not PRODUCT</span></td></tr>
<tr class="codeline" data-linenumber="687"><td class="num" id="LN687">687</td><td class="line">  <span class='keyword'>static</span> ByteSize native_function_offset()       { <span class='keyword'>return</span> in_ByteSize(<span class='keyword'>sizeof</span>(Method));                 }</td></tr>
<tr class="codeline" data-linenumber="688"><td class="num" id="LN688">688</td><td class="line">  <span class='keyword'>static</span> ByteSize from_interpreted_offset()      { <span class='keyword'>return</span> <span class='macro'>byte_offset_of(Method, _from_interpreted_entry )<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((Method*)16)-&gt;_from_interpreted_entry<br>) - 16))</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="689"><td class="num" id="LN689">689</td><td class="line">  <span class='keyword'>static</span> ByteSize interpreter_entry_offset()     { <span class='keyword'>return</span> <span class='macro'>byte_offset_of(Method, _i2i_entry )<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((Method*)16)-&gt;_i2i_entry<br>) - 16))</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="690"><td class="num" id="LN690">690</td><td class="line">  <span class='keyword'>static</span> ByteSize signature_handler_offset()     { <span class='keyword'>return</span> in_ByteSize(<span class='keyword'>sizeof</span>(Method) + wordSize);      }</td></tr>
<tr class="codeline" data-linenumber="691"><td class="num" id="LN691">691</td><td class="line">  <span class='keyword'>static</span> ByteSize itable_index_offset()          { <span class='keyword'>return</span> <span class='macro'>byte_offset_of(Method, _vtable_index )<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((Method*)16)-&gt;_vtable_index<br>) - 16))</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="692"><td class="num" id="LN692">692</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="693"><td class="num" id="LN693">693</td><td class="line">  <span class='comment'>// for code generation</span></td></tr>
<tr class="codeline" data-linenumber="694"><td class="num" id="LN694">694</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>int</span> method_data_offset_in_bytes()       { <span class='keyword'>return</span> <span class='macro'>offset_of(Method, _method_data)<span class='macro_popup'>(size_t)((intx)&amp;(((Method*)16)-&gt;_method_data) - 16)</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="695"><td class="num" id="LN695">695</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>int</span> intrinsic_id_offset_in_bytes()      { <span class='keyword'>return</span> <span class='macro'>offset_of(Method, _intrinsic_id)<span class='macro_popup'>(size_t)((intx)&amp;(((Method*)16)-&gt;_intrinsic_id) - 16)</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="696"><td class="num" id="LN696">696</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>int</span> intrinsic_id_size_in_bytes()        { <span class='keyword'>return</span> <span class='keyword'>sizeof</span>(u2); }</td></tr>
<tr class="codeline" data-linenumber="697"><td class="num" id="LN697">697</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="698"><td class="num" id="LN698">698</td><td class="line">  <span class='comment'>// Static methods that are used to implement member methods where an exposed this pointer</span></td></tr>
<tr class="codeline" data-linenumber="699"><td class="num" id="LN699">699</td><td class="line">  <span class='comment'>// is needed due to possible GCs</span></td></tr>
<tr class="codeline" data-linenumber="700"><td class="num" id="LN700">700</td><td class="line">  <span class='keyword'>static</span> objArrayHandle resolved_checked_exceptions_impl(Method* method, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="701"><td class="num" id="LN701">701</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="702"><td class="num" id="LN702">702</td><td class="line">  <span class='comment'>// Returns the byte code index from the byte code pointer</span></td></tr>
<tr class="codeline" data-linenumber="703"><td class="num" id="LN703">703</td><td class="line">  <span class='keyword'>int</span>     bci_from(address bcp) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="704"><td class="num" id="LN704">704</td><td class="line">  address bcp_from(<span class='keyword'>int</span> bci) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="705"><td class="num" id="LN705">705</td><td class="line">  address bcp_from(address bcp) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="706"><td class="num" id="LN706">706</td><td class="line">  <span class='keyword'>int</span> validate_bci_from_bcp(address bcp) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="707"><td class="num" id="LN707">707</td><td class="line">  <span class='keyword'>int</span> validate_bci(<span class='keyword'>int</span> bci) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="708"><td class="num" id="LN708">708</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="709"><td class="num" id="LN709">709</td><td class="line">  <span class='comment'>// Returns the line number for a bci if debugging information for the method is prowided,</span></td></tr>
<tr class="codeline" data-linenumber="710"><td class="num" id="LN710">710</td><td class="line">  <span class='comment'>// -1 is returned otherwise.</span></td></tr>
<tr class="codeline" data-linenumber="711"><td class="num" id="LN711">711</td><td class="line">  <span class='keyword'>int</span> line_number_from_bci(<span class='keyword'>int</span> bci) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="712"><td class="num" id="LN712">712</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="713"><td class="num" id="LN713">713</td><td class="line">  <span class='comment'>// Reflection support</span></td></tr>
<tr class="codeline" data-linenumber="714"><td class="num" id="LN714">714</td><td class="line">  <span class='keyword'>bool</span> is_overridden_in(Klass* k) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="715"><td class="num" id="LN715">715</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="716"><td class="num" id="LN716">716</td><td class="line">  <span class='comment'>// Stack walking support</span></td></tr>
<tr class="codeline" data-linenumber="717"><td class="num" id="LN717">717</td><td class="line">  <span class='keyword'>bool</span> is_ignored_by_security_stack_walk() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="718"><td class="num" id="LN718">718</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="719"><td class="num" id="LN719">719</td><td class="line">  <span class='comment'>// JSR 292 support</span></td></tr>
<tr class="codeline" data-linenumber="720"><td class="num" id="LN720">720</td><td class="line">  <span class='keyword'>bool</span> is_method_handle_intrinsic() <span class='keyword'>const</span>;          <span class='comment'>// MethodHandles::is_signature_polymorphic_intrinsic(intrinsic_id)</span></td></tr>
<tr class="codeline" data-linenumber="721"><td class="num" id="LN721">721</td><td class="line">  <span class='keyword'>bool</span> is_compiled_lambda_form() <span class='keyword'>const</span>;             <span class='comment'>// intrinsic_id() == vmIntrinsics::_compiledLambdaForm</span></td></tr>
<tr class="codeline" data-linenumber="722"><td class="num" id="LN722">722</td><td class="line">  <span class='keyword'>bool</span> has_member_arg() <span class='keyword'>const</span>;                      <span class='comment'>// intrinsic_id() == vmIntrinsics::_linkToSpecial, etc.</span></td></tr>
<tr class="codeline" data-linenumber="723"><td class="num" id="LN723">723</td><td class="line">  <span class='keyword'>static</span> methodHandle make_method_handle_intrinsic(vmIntrinsicID iid, <span class='comment'>// _invokeBasic, _linkToVirtual</span></td></tr>
<tr class="codeline" data-linenumber="724"><td class="num" id="LN724">724</td><td class="line">                                                   Symbol* signature, <span class='comment'>//anything at all</span></td></tr>
<tr class="codeline" data-linenumber="725"><td class="num" id="LN725">725</td><td class="line">                                                   <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="726"><td class="num" id="LN726">726</td><td class="line">  <span class='keyword'>static</span> Klass* check_non_bcp_klass(Klass* klass);</td></tr>
<tr class="codeline" data-linenumber="727"><td class="num" id="LN727">727</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="728"><td class="num" id="LN728">728</td><td class="line">  <span class='keyword'>enum</span> {</td></tr>
<tr class="codeline" data-linenumber="729"><td class="num" id="LN729">729</td><td class="line">    <span class='comment'>// How many extra stack entries for invokedynamic</span></td></tr>
<tr class="codeline" data-linenumber="730"><td class="num" id="LN730">730</td><td class="line">    extra_stack_entries_for_jsr292 = 1</td></tr>
<tr class="codeline" data-linenumber="731"><td class="num" id="LN731">731</td><td class="line">  };</td></tr>
<tr class="codeline" data-linenumber="732"><td class="num" id="LN732">732</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="733"><td class="num" id="LN733">733</td><td class="line">  <span class='comment'>// this operates only on invoke methods:</span></td></tr>
<tr class="codeline" data-linenumber="734"><td class="num" id="LN734">734</td><td class="line">  <span class='comment'>// presize interpreter frames for extra interpreter stack entries, if needed</span></td></tr>
<tr class="codeline" data-linenumber="735"><td class="num" id="LN735">735</td><td class="line">  <span class='comment'>// Account for the extra appendix argument for invokehandle/invokedynamic</span></td></tr>
<tr class="codeline" data-linenumber="736"><td class="num" id="LN736">736</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>int</span> extra_stack_entries() { <span class='keyword'>return</span> extra_stack_entries_for_jsr292; }</td></tr>
<tr class="codeline" data-linenumber="737"><td class="num" id="LN737">737</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>int</span> extra_stack_words();  <span class='comment'>// = extra_stack_entries() * Interpreter::stackElementSize</span></td></tr>
<tr class="codeline" data-linenumber="738"><td class="num" id="LN738">738</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="739"><td class="num" id="LN739">739</td><td class="line">  <span class='comment'>// RedefineClasses() support:</span></td></tr>
<tr class="codeline" data-linenumber="740"><td class="num" id="LN740">740</td><td class="line">  <span class='keyword'>bool</span> is_old() <span class='keyword'>const</span>                               { <span class='keyword'>return</span> access_flags().is_old(); }</td></tr>
<tr class="codeline" data-linenumber="741"><td class="num" id="LN741">741</td><td class="line">  <span class='keyword'>void</span> set_is_old()                                 { _access_flags.set_is_old(); }</td></tr>
<tr class="codeline" data-linenumber="742"><td class="num" id="LN742">742</td><td class="line">  <span class='keyword'>bool</span> is_obsolete() <span class='keyword'>const</span>                          { <span class='keyword'>return</span> access_flags().is_obsolete(); }</td></tr>
<tr class="codeline" data-linenumber="743"><td class="num" id="LN743">743</td><td class="line">  <span class='keyword'>void</span> set_is_obsolete()                            { _access_flags.set_is_obsolete(); }</td></tr>
<tr class="codeline" data-linenumber="744"><td class="num" id="LN744">744</td><td class="line">  <span class='keyword'>bool</span> is_deleted() <span class='keyword'>const</span>                           { <span class='keyword'>return</span> access_flags().is_deleted(); }</td></tr>
<tr class="codeline" data-linenumber="745"><td class="num" id="LN745">745</td><td class="line">  <span class='keyword'>void</span> set_is_deleted()                             { _access_flags.set_is_deleted(); }</td></tr>
<tr class="codeline" data-linenumber="746"><td class="num" id="LN746">746</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="747"><td class="num" id="LN747">747</td><td class="line">  <span class='keyword'>bool</span> on_stack() <span class='keyword'>const</span>                             { <span class='keyword'>return</span> access_flags().on_stack(); }</td></tr>
<tr class="codeline" data-linenumber="748"><td class="num" id="LN748">748</td><td class="line">  <span class='keyword'>void</span> set_on_stack(<span class='keyword'>const</span> <span class='keyword'>bool</span> value);</td></tr>
<tr class="codeline" data-linenumber="749"><td class="num" id="LN749">749</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="750"><td class="num" id="LN750">750</td><td class="line">  <span class='comment'>// see the definition in Method*.cpp for the gory details</span></td></tr>
<tr class="codeline" data-linenumber="751"><td class="num" id="LN751">751</td><td class="line">  <span class='keyword'>bool</span> should_not_be_cached() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="752"><td class="num" id="LN752">752</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="753"><td class="num" id="LN753">753</td><td class="line">  <span class='comment'>// JVMTI Native method prefixing support:</span></td></tr>
<tr class="codeline" data-linenumber="754"><td class="num" id="LN754">754</td><td class="line">  <span class='keyword'>bool</span> is_prefixed_native() <span class='keyword'>const</span>                   { <span class='keyword'>return</span> access_flags().is_prefixed_native(); }</td></tr>
<tr class="codeline" data-linenumber="755"><td class="num" id="LN755">755</td><td class="line">  <span class='keyword'>void</span> set_is_prefixed_native()                     { _access_flags.set_is_prefixed_native(); }</td></tr>
<tr class="codeline" data-linenumber="756"><td class="num" id="LN756">756</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="757"><td class="num" id="LN757">757</td><td class="line">  <span class='comment'>// Rewriting support</span></td></tr>
<tr class="codeline" data-linenumber="758"><td class="num" id="LN758">758</td><td class="line">  <span class='keyword'>static</span> methodHandle clone_with_new_data(<span class='keyword'>const</span> methodHandle&amp; m, u_char* new_code, <span class='keyword'>int</span> new_code_length,</td></tr>
<tr class="codeline" data-linenumber="759"><td class="num" id="LN759">759</td><td class="line">                                          u_char* new_compressed_linenumber_table, <span class='keyword'>int</span> new_compressed_linenumber_size, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="760"><td class="num" id="LN760">760</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="761"><td class="num" id="LN761">761</td><td class="line">  <span class='comment'>// jmethodID handling</span></td></tr>
<tr class="codeline" data-linenumber="762"><td class="num" id="LN762">762</td><td class="line">  <span class='comment'>// Because the useful life-span of a jmethodID cannot be determined,</span></td></tr>
<tr class="codeline" data-linenumber="763"><td class="num" id="LN763">763</td><td class="line">  <span class='comment'>// once created they are never reclaimed.  The methods to which they refer,</span></td></tr>
<tr class="codeline" data-linenumber="764"><td class="num" id="LN764">764</td><td class="line">  <span class='comment'>// however, can be GC'ed away if the class is unloaded or if the method is</span></td></tr>
<tr class="codeline" data-linenumber="765"><td class="num" id="LN765">765</td><td class="line">  <span class='comment'>// made obsolete or deleted -- in these cases, the jmethodID</span></td></tr>
<tr class="codeline" data-linenumber="766"><td class="num" id="LN766">766</td><td class="line">  <span class='comment'>// refers to NULL (as is the case for any weak reference).</span></td></tr>
<tr class="codeline" data-linenumber="767"><td class="num" id="LN767">767</td><td class="line">  <span class='keyword'>static</span> jmethodID make_jmethod_id(ClassLoaderData* loader_data, Method* mh);</td></tr>
<tr class="codeline" data-linenumber="768"><td class="num" id="LN768">768</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> destroy_jmethod_id(ClassLoaderData* loader_data, jmethodID mid);</td></tr>
<tr class="codeline" data-linenumber="769"><td class="num" id="LN769">769</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="770"><td class="num" id="LN770">770</td><td class="line">  <span class='comment'>// Ensure there is enough capacity in the internal tracking data</span></td></tr>
<tr class="codeline" data-linenumber="771"><td class="num" id="LN771">771</td><td class="line">  <span class='comment'>// structures to hold the number of jmethodIDs you plan to generate.</span></td></tr>
<tr class="codeline" data-linenumber="772"><td class="num" id="LN772">772</td><td class="line">  <span class='comment'>// This saves substantial time doing allocations.</span></td></tr>
<tr class="codeline" data-linenumber="773"><td class="num" id="LN773">773</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> ensure_jmethod_ids(ClassLoaderData* loader_data, <span class='keyword'>int</span> capacity);</td></tr>
<tr class="codeline" data-linenumber="774"><td class="num" id="LN774">774</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="775"><td class="num" id="LN775">775</td><td class="line">  <span class='comment'>// Use resolve_jmethod_id() in situations where the caller is expected</span></td></tr>
<tr class="codeline" data-linenumber="776"><td class="num" id="LN776">776</td><td class="line">  <span class='comment'>// to provide a valid jmethodID; the only sanity checks are in asserts;</span></td></tr>
<tr class="codeline" data-linenumber="777"><td class="num" id="LN777">777</td><td class="line">  <span class='comment'>// result guaranteed not to be NULL.</span></td></tr>
<tr class="codeline" data-linenumber="778"><td class="num" id="LN778">778</td><td class="line">  <span class='keyword'>inline</span> <span class='keyword'>static</span> Method* resolve_jmethod_id(jmethodID mid) {</td></tr>
<tr class="codeline" data-linenumber="779"><td class="num" id="LN779">779</td><td class="line">    <span class='macro'>assert(mid != NULL, <span class='string_literal'>"JNI method id should not be null"</span>)<span class='macro_popup'>do { if (!(mid != __null)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp"<br>, 779, "assert(" "mid != __null" ") failed", "JNI method id should not be null"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="780"><td class="num" id="LN780">780</td><td class="line">    <span class='keyword'>return</span> *((Method**)mid);</td></tr>
<tr class="codeline" data-linenumber="781"><td class="num" id="LN781">781</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="782"><td class="num" id="LN782">782</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="783"><td class="num" id="LN783">783</td><td class="line">  <span class='comment'>// Use checked_resolve_jmethod_id() in situations where the caller</span></td></tr>
<tr class="codeline" data-linenumber="784"><td class="num" id="LN784">784</td><td class="line">  <span class='comment'>// should provide a valid jmethodID, but might not. NULL is returned</span></td></tr>
<tr class="codeline" data-linenumber="785"><td class="num" id="LN785">785</td><td class="line">  <span class='comment'>// when the jmethodID does not refer to a valid method.</span></td></tr>
<tr class="codeline" data-linenumber="786"><td class="num" id="LN786">786</td><td class="line">  <span class='keyword'>static</span> Method* checked_resolve_jmethod_id(jmethodID mid);</td></tr>
<tr class="codeline" data-linenumber="787"><td class="num" id="LN787">787</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="788"><td class="num" id="LN788">788</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> change_method_associated_with_jmethod_id(jmethodID old_jmid_ptr, Method* new_method);</td></tr>
<tr class="codeline" data-linenumber="789"><td class="num" id="LN789">789</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>bool</span> is_method_id(jmethodID mid);</td></tr>
<tr class="codeline" data-linenumber="790"><td class="num" id="LN790">790</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="791"><td class="num" id="LN791">791</td><td class="line">  <span class='comment'>// Clear methods</span></td></tr>
<tr class="codeline" data-linenumber="792"><td class="num" id="LN792">792</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> clear_jmethod_ids(ClassLoaderData* loader_data);</td></tr>
<tr class="codeline" data-linenumber="793"><td class="num" id="LN793">793</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> print_jmethod_ids_count(<span class='keyword'>const</span> ClassLoaderData* loader_data, outputStream* out) PRODUCT_RETURN;</td></tr>
<tr class="codeline" data-linenumber="794"><td class="num" id="LN794">794</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="795"><td class="num" id="LN795">795</td><td class="line">  <span class='comment'>// Get this method's jmethodID -- allocate if it doesn't exist</span></td></tr>
<tr class="codeline" data-linenumber="796"><td class="num" id="LN796">796</td><td class="line">  jmethodID jmethod_id();</td></tr>
<tr class="codeline" data-linenumber="797"><td class="num" id="LN797">797</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="798"><td class="num" id="LN798">798</td><td class="line">  <span class='comment'>// Lookup the jmethodID for this method.  Return NULL if not found.</span></td></tr>
<tr class="codeline" data-linenumber="799"><td class="num" id="LN799">799</td><td class="line">  <span class='comment'>// NOTE that this function can be called from a signal handler</span></td></tr>
<tr class="codeline" data-linenumber="800"><td class="num" id="LN800">800</td><td class="line">  <span class='comment'>// (see AsyncGetCallTrace support for Forte Analyzer) and this</span></td></tr>
<tr class="codeline" data-linenumber="801"><td class="num" id="LN801">801</td><td class="line">  <span class='comment'>// needs to be async-safe. No allocation should be done and</span></td></tr>
<tr class="codeline" data-linenumber="802"><td class="num" id="LN802">802</td><td class="line">  <span class='comment'>// so handles are not used to avoid deadlock.</span></td></tr>
<tr class="codeline" data-linenumber="803"><td class="num" id="LN803">803</td><td class="line">  jmethodID find_jmethod_id_or_null()               { <span class='keyword'>return</span> method_holder()-&gt;jmethod_id_or_null(<span class='keyword'>this</span>); }</td></tr>
<tr class="codeline" data-linenumber="804"><td class="num" id="LN804">804</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="805"><td class="num" id="LN805">805</td><td class="line">  <span class='comment'>// Support for inlining of intrinsic methods</span></td></tr>
<tr class="codeline" data-linenumber="806"><td class="num" id="LN806">806</td><td class="line">  vmIntrinsicID intrinsic_id() <span class='keyword'>const</span>          { <span class='keyword'>return</span> (vmIntrinsicID) _intrinsic_id;           }</td></tr>
<tr class="codeline" data-linenumber="807"><td class="num" id="LN807">807</td><td class="line">  <span class='keyword'>void</span>     set_intrinsic_id(vmIntrinsicID id) {                           _intrinsic_id = (u2) id; }</td></tr>
<tr class="codeline" data-linenumber="808"><td class="num" id="LN808">808</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="809"><td class="num" id="LN809">809</td><td class="line">  <span class='comment'>// Helper routines for intrinsic_id() and vmIntrinsics::method().</span></td></tr>
<tr class="codeline" data-linenumber="810"><td class="num" id="LN810">810</td><td class="line">  <span class='keyword'>void</span> init_intrinsic_id(vmSymbolID klass_id);     <span class='comment'>// updates from _none if a match</span></td></tr>
<tr class="codeline" data-linenumber="811"><td class="num" id="LN811">811</td><td class="line">  <span class='keyword'>static</span> vmSymbolID klass_id_for_intrinsics(<span class='keyword'>const</span> Klass* holder);</td></tr>
<tr class="codeline" data-linenumber="812"><td class="num" id="LN812">812</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="813"><td class="num" id="LN813">813</td><td class="line">  <span class='keyword'>bool</span> caller_sensitive() {</td></tr>
<tr class="codeline" data-linenumber="814"><td class="num" id="LN814">814</td><td class="line">    <span class='keyword'>return</span> (_flags &amp; _caller_sensitive) != 0;</td></tr>
<tr class="codeline" data-linenumber="815"><td class="num" id="LN815">815</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="816"><td class="num" id="LN816">816</td><td class="line">  <span class='keyword'>void</span> set_caller_sensitive(<span class='keyword'>bool</span> x) {</td></tr>
<tr class="codeline" data-linenumber="817"><td class="num" id="LN817">817</td><td class="line">    _flags = x ? (_flags | _caller_sensitive) : (_flags &amp; ~_caller_sensitive);</td></tr>
<tr class="codeline" data-linenumber="818"><td class="num" id="LN818">818</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="819"><td class="num" id="LN819">819</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="820"><td class="num" id="LN820">820</td><td class="line">  <span class='keyword'>bool</span> force_inline() {</td></tr>
<tr class="codeline" data-linenumber="821"><td class="num" id="LN821">821</td><td class="line">    <span class='keyword'>return</span> (_flags &amp; _force_inline) != 0;</td></tr>
<tr class="codeline" data-linenumber="822"><td class="num" id="LN822">822</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="823"><td class="num" id="LN823">823</td><td class="line">  <span class='keyword'>void</span> set_force_inline(<span class='keyword'>bool</span> x) {</td></tr>
<tr class="codeline" data-linenumber="824"><td class="num" id="LN824">824</td><td class="line">    _flags = x ? (_flags | _force_inline) : (_flags &amp; ~_force_inline);</td></tr>
<tr class="codeline" data-linenumber="825"><td class="num" id="LN825">825</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="826"><td class="num" id="LN826">826</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="827"><td class="num" id="LN827">827</td><td class="line">  <span class='keyword'>bool</span> dont_inline() {</td></tr>
<tr class="codeline" data-linenumber="828"><td class="num" id="LN828">828</td><td class="line">    <span class='keyword'>return</span> (_flags &amp; _dont_inline) != 0;</td></tr>
<tr class="codeline" data-linenumber="829"><td class="num" id="LN829">829</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="830"><td class="num" id="LN830">830</td><td class="line">  <span class='keyword'>void</span> set_dont_inline(<span class='keyword'>bool</span> x) {</td></tr>
<tr class="codeline" data-linenumber="831"><td class="num" id="LN831">831</td><td class="line">    _flags = x ? (_flags | _dont_inline) : (_flags &amp; ~_dont_inline);</td></tr>
<tr class="codeline" data-linenumber="832"><td class="num" id="LN832">832</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="833"><td class="num" id="LN833">833</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="834"><td class="num" id="LN834">834</td><td class="line">  <span class='keyword'>bool</span> is_hidden() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="835"><td class="num" id="LN835">835</td><td class="line">    <span class='keyword'>return</span> (_flags &amp; _hidden) != 0;</td></tr>
<tr class="codeline" data-linenumber="836"><td class="num" id="LN836">836</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="837"><td class="num" id="LN837">837</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="838"><td class="num" id="LN838">838</td><td class="line">  <span class='keyword'>void</span> set_hidden(<span class='keyword'>bool</span> x) {</td></tr>
<tr class="codeline" data-linenumber="839"><td class="num" id="LN839">839</td><td class="line">    _flags = x ? (_flags | _hidden) : (_flags &amp; ~_hidden);</td></tr>
<tr class="codeline" data-linenumber="840"><td class="num" id="LN840">840</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="841"><td class="num" id="LN841">841</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="842"><td class="num" id="LN842">842</td><td class="line">  <span class='keyword'>bool</span> is_scoped() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="843"><td class="num" id="LN843">843</td><td class="line">    <span class='keyword'>return</span> (_flags &amp; _scoped) != 0;</td></tr>
<tr class="codeline" data-linenumber="844"><td class="num" id="LN844">844</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="845"><td class="num" id="LN845">845</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="846"><td class="num" id="LN846">846</td><td class="line">  <span class='keyword'>void</span> set_scoped(<span class='keyword'>bool</span> x) {</td></tr>
<tr class="codeline" data-linenumber="847"><td class="num" id="LN847">847</td><td class="line">    _flags = x ? (_flags | _scoped) : (_flags &amp; ~_scoped);</td></tr>
<tr class="codeline" data-linenumber="848"><td class="num" id="LN848">848</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="849"><td class="num" id="LN849">849</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="850"><td class="num" id="LN850">850</td><td class="line">  <span class='keyword'>bool</span> intrinsic_candidate() {</td></tr>
<tr class="codeline" data-linenumber="851"><td class="num" id="LN851">851</td><td class="line">    <span class='keyword'>return</span> (_flags &amp; _intrinsic_candidate) != 0;</td></tr>
<tr class="codeline" data-linenumber="852"><td class="num" id="LN852">852</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="853"><td class="num" id="LN853">853</td><td class="line">  <span class='keyword'>void</span> set_intrinsic_candidate(<span class='keyword'>bool</span> x) {</td></tr>
<tr class="codeline" data-linenumber="854"><td class="num" id="LN854">854</td><td class="line">    _flags = x ? (_flags | _intrinsic_candidate) : (_flags &amp; ~_intrinsic_candidate);</td></tr>
<tr class="codeline" data-linenumber="855"><td class="num" id="LN855">855</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="856"><td class="num" id="LN856">856</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="857"><td class="num" id="LN857">857</td><td class="line">  <span class='keyword'>bool</span> has_injected_profile() {</td></tr>
<tr class="codeline" data-linenumber="858"><td class="num" id="LN858">858</td><td class="line">    <span class='keyword'>return</span> (_flags &amp; _has_injected_profile) != 0;</td></tr>
<tr class="codeline" data-linenumber="859"><td class="num" id="LN859">859</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="860"><td class="num" id="LN860">860</td><td class="line">  <span class='keyword'>void</span> set_has_injected_profile(<span class='keyword'>bool</span> x) {</td></tr>
<tr class="codeline" data-linenumber="861"><td class="num" id="LN861">861</td><td class="line">    _flags = x ? (_flags | _has_injected_profile) : (_flags &amp; ~_has_injected_profile);</td></tr>
<tr class="codeline" data-linenumber="862"><td class="num" id="LN862">862</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="863"><td class="num" id="LN863">863</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="864"><td class="num" id="LN864">864</td><td class="line">  <span class='keyword'>bool</span> has_reserved_stack_access() {</td></tr>
<tr class="codeline" data-linenumber="865"><td class="num" id="LN865">865</td><td class="line">    <span class='keyword'>return</span> (_flags &amp; _reserved_stack_access) != 0;</td></tr>
<tr class="codeline" data-linenumber="866"><td class="num" id="LN866">866</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="867"><td class="num" id="LN867">867</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="868"><td class="num" id="LN868">868</td><td class="line">  <span class='keyword'>void</span> set_has_reserved_stack_access(<span class='keyword'>bool</span> x) {</td></tr>
<tr class="codeline" data-linenumber="869"><td class="num" id="LN869">869</td><td class="line">    _flags = x ? (_flags | _reserved_stack_access) : (_flags &amp; ~_reserved_stack_access);</td></tr>
<tr class="codeline" data-linenumber="870"><td class="num" id="LN870">870</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="871"><td class="num" id="LN871">871</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="872"><td class="num" id="LN872">872</td><td class="line">  <span class='macro'>JFR_ONLY(DEFINE_TRACE_FLAG_ACCESSOR;)<span class='macro_popup'>bool is_trace_flag_set(jshort flag) const { return _trace_flags<br>.is_set(flag); } jshort trace_flags() const { return _trace_flags<br>.flags(); } void set_trace_flags(jshort flags) const { _trace_flags<br>.set_flags(flags); } jbyte* trace_flags_addr() const { return<br> _trace_flags.flags_addr(); } jbyte* trace_meta_addr() const {<br> return _trace_flags.meta_addr(); };</span></span></td></tr>
<tr class="codeline" data-linenumber="873"><td class="num" id="LN873">873</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="874"><td class="num" id="LN874">874</td><td class="line">  ConstMethod::MethodType method_type() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="875"><td class="num" id="LN875">875</td><td class="line">      <span class='keyword'>return</span> _constMethod-&gt;method_type();</td></tr>
<tr class="codeline" data-linenumber="876"><td class="num" id="LN876">876</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="877"><td class="num" id="LN877">877</td><td class="line">  <span class='keyword'>bool</span> is_overpass() <span class='keyword'>const</span> { <span class='keyword'>return</span> method_type() == ConstMethod::OVERPASS; }</td></tr>
<tr class="codeline" data-linenumber="878"><td class="num" id="LN878">878</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="879"><td class="num" id="LN879">879</td><td class="line">  <span class='comment'>// On-stack replacement support</span></td></tr>
<tr class="codeline" data-linenumber="880"><td class="num" id="LN880">880</td><td class="line">  <span class='keyword'>bool</span> has_osr_nmethod(<span class='keyword'>int</span> level, <span class='keyword'>bool</span> match_level) {</td></tr>
<tr class="codeline" data-linenumber="881"><td class="num" id="LN881">881</td><td class="line">   <span class='keyword'>return</span> method_holder()-&gt;lookup_osr_nmethod(<span class='keyword'>this</span>, InvocationEntryBci, level, match_level) != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>;</td></tr>
<tr class="codeline" data-linenumber="882"><td class="num" id="LN882">882</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="883"><td class="num" id="LN883">883</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="884"><td class="num" id="LN884">884</td><td class="line">  <span class='keyword'>int</span> mark_osr_nmethods() {</td></tr>
<tr class="codeline" data-linenumber="885"><td class="num" id="LN885">885</td><td class="line">    <span class='keyword'>return</span> method_holder()-&gt;mark_osr_nmethods(<span class='keyword'>this</span>);</td></tr>
<tr class="codeline" data-linenumber="886"><td class="num" id="LN886">886</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="887"><td class="num" id="LN887">887</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="888"><td class="num" id="LN888">888</td><td class="line">  nmethod* lookup_osr_nmethod_for(<span class='keyword'>int</span> bci, <span class='keyword'>int</span> level, <span class='keyword'>bool</span> match_level) {</td></tr>
<tr class="codeline" data-linenumber="889"><td class="num" id="LN889">889</td><td class="line">    <span class='keyword'>return</span> method_holder()-&gt;lookup_osr_nmethod(<span class='keyword'>this</span>, bci, level, match_level);</td></tr>
<tr class="codeline" data-linenumber="890"><td class="num" id="LN890">890</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="891"><td class="num" id="LN891">891</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="892"><td class="num" id="LN892">892</td><td class="line">  <span class='comment'>// Find if klass for method is loaded</span></td></tr>
<tr class="codeline" data-linenumber="893"><td class="num" id="LN893">893</td><td class="line">  <span class='keyword'>bool</span> is_klass_loaded_by_klass_index(<span class='keyword'>int</span> klass_index) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="894"><td class="num" id="LN894">894</td><td class="line">  <span class='keyword'>bool</span> is_klass_loaded(<span class='keyword'>int</span> refinfo_index, <span class='keyword'>bool</span> must_be_resolved = <span class='keyword'>false</span>) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="895"><td class="num" id="LN895">895</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="896"><td class="num" id="LN896">896</td><td class="line">  <span class='comment'>// Indicates whether compilation failed earlier for this method, or</span></td></tr>
<tr class="codeline" data-linenumber="897"><td class="num" id="LN897">897</td><td class="line">  <span class='comment'>// whether it is not compilable for another reason like having a</span></td></tr>
<tr class="codeline" data-linenumber="898"><td class="num" id="LN898">898</td><td class="line">  <span class='comment'>// breakpoint set in it.</span></td></tr>
<tr class="codeline" data-linenumber="899"><td class="num" id="LN899">899</td><td class="line">  <span class='keyword'>bool</span>  is_not_compilable(<span class='keyword'>int</span> comp_level = CompLevel_any) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="900"><td class="num" id="LN900">900</td><td class="line">  <span class='keyword'>void</span> set_not_compilable(<span class='keyword'>const</span> <span class='keyword'>char</span>* reason, <span class='keyword'>int</span> comp_level = CompLevel_all, <span class='keyword'>bool</span> report = <span class='keyword'>true</span>);</td></tr>
<tr class="codeline" data-linenumber="901"><td class="num" id="LN901">901</td><td class="line">  <span class='keyword'>void</span> set_not_compilable_quietly(<span class='keyword'>const</span> <span class='keyword'>char</span>* reason, <span class='keyword'>int</span> comp_level = CompLevel_all) {</td></tr>
<tr class="codeline" data-linenumber="902"><td class="num" id="LN902">902</td><td class="line">    set_not_compilable(reason, comp_level, <span class='keyword'>false</span>);</td></tr>
<tr class="codeline" data-linenumber="903"><td class="num" id="LN903">903</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="904"><td class="num" id="LN904">904</td><td class="line">  <span class='keyword'>bool</span>  is_not_osr_compilable(<span class='keyword'>int</span> comp_level = CompLevel_any) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="905"><td class="num" id="LN905">905</td><td class="line">  <span class='keyword'>void</span> set_not_osr_compilable(<span class='keyword'>const</span> <span class='keyword'>char</span>* reason, <span class='keyword'>int</span> comp_level = CompLevel_all, <span class='keyword'>bool</span> report = <span class='keyword'>true</span>);</td></tr>
<tr class="codeline" data-linenumber="906"><td class="num" id="LN906">906</td><td class="line">  <span class='keyword'>void</span> set_not_osr_compilable_quietly(<span class='keyword'>const</span> <span class='keyword'>char</span>* reason, <span class='keyword'>int</span> comp_level = CompLevel_all) {</td></tr>
<tr class="codeline" data-linenumber="907"><td class="num" id="LN907">907</td><td class="line">    set_not_osr_compilable(reason, comp_level, <span class='keyword'>false</span>);</td></tr>
<tr class="codeline" data-linenumber="908"><td class="num" id="LN908">908</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="909"><td class="num" id="LN909">909</td><td class="line">  <span class='keyword'>bool</span> is_always_compilable() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="910"><td class="num" id="LN910">910</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="911"><td class="num" id="LN911">911</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="912"><td class="num" id="LN912">912</td><td class="line">  <span class='keyword'>void</span> print_made_not_compilable(<span class='keyword'>int</span> comp_level, <span class='keyword'>bool</span> is_osr, <span class='keyword'>bool</span> report, <span class='keyword'>const</span> <span class='keyword'>char</span>* reason);</td></tr>
<tr class="codeline" data-linenumber="913"><td class="num" id="LN913">913</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="914"><td class="num" id="LN914">914</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="915"><td class="num" id="LN915">915</td><td class="line">  MethodCounters* get_method_counters(Thread* current) {</td></tr>
<tr class="codeline" data-linenumber="916"><td class="num" id="LN916">916</td><td class="line">    <span class='keyword'>if</span> (_method_counters == <span class='macro'>NULL<span class='macro_popup'>__null</span></span>) {</td></tr>
<tr class="codeline" data-linenumber="917"><td class="num" id="LN917">917</td><td class="line">      build_method_counters(current, <span class='keyword'>this</span>);</td></tr>
<tr class="codeline" data-linenumber="918"><td class="num" id="LN918">918</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="919"><td class="num" id="LN919">919</td><td class="line">    <span class='keyword'>return</span> _method_counters;</td></tr>
<tr class="codeline" data-linenumber="920"><td class="num" id="LN920">920</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="921"><td class="num" id="LN921">921</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="922"><td class="num" id="LN922">922</td><td class="line">  <span class='keyword'>bool</span>   is_not_c1_compilable() <span class='keyword'>const</span>         { <span class='keyword'>return</span> access_flags().is_not_c1_compilable();  }</td></tr>
<tr class="codeline" data-linenumber="923"><td class="num" id="LN923">923</td><td class="line">  <span class='keyword'>void</span>  set_not_c1_compilable()               {       _access_flags.set_not_c1_compilable();   }</td></tr>
<tr class="codeline" data-linenumber="924"><td class="num" id="LN924">924</td><td class="line">  <span class='keyword'>void</span> clear_not_c1_compilable()              {       _access_flags.clear_not_c1_compilable(); }</td></tr>
<tr class="codeline" data-linenumber="925"><td class="num" id="LN925">925</td><td class="line">  <span class='keyword'>bool</span>   is_not_c2_compilable() <span class='keyword'>const</span>         { <span class='keyword'>return</span> access_flags().is_not_c2_compilable();  }</td></tr>
<tr class="codeline" data-linenumber="926"><td class="num" id="LN926">926</td><td class="line">  <span class='keyword'>void</span>  set_not_c2_compilable()               {       _access_flags.set_not_c2_compilable();   }</td></tr>
<tr class="codeline" data-linenumber="927"><td class="num" id="LN927">927</td><td class="line">  <span class='keyword'>void</span> clear_not_c2_compilable()              {       _access_flags.clear_not_c2_compilable(); }</td></tr>
<tr class="codeline" data-linenumber="928"><td class="num" id="LN928">928</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="929"><td class="num" id="LN929">929</td><td class="line">  <span class='keyword'>bool</span>    is_not_c1_osr_compilable() <span class='keyword'>const</span>    { <span class='keyword'>return</span> is_not_c1_compilable(); }  <span class='comment'>// don't waste an accessFlags bit</span></td></tr>
<tr class="codeline" data-linenumber="930"><td class="num" id="LN930">930</td><td class="line">  <span class='keyword'>void</span>   set_not_c1_osr_compilable()          {       set_not_c1_compilable(); }  <span class='comment'>// don't waste an accessFlags bit</span></td></tr>
<tr class="codeline" data-linenumber="931"><td class="num" id="LN931">931</td><td class="line">  <span class='keyword'>void</span> clear_not_c1_osr_compilable()          {     clear_not_c1_compilable(); }  <span class='comment'>// don't waste an accessFlags bit</span></td></tr>
<tr class="codeline" data-linenumber="932"><td class="num" id="LN932">932</td><td class="line">  <span class='keyword'>bool</span>   is_not_c2_osr_compilable() <span class='keyword'>const</span>     { <span class='keyword'>return</span> access_flags().is_not_c2_osr_compilable();  }</td></tr>
<tr class="codeline" data-linenumber="933"><td class="num" id="LN933">933</td><td class="line">  <span class='keyword'>void</span>  set_not_c2_osr_compilable()           {       _access_flags.set_not_c2_osr_compilable();   }</td></tr>
<tr class="codeline" data-linenumber="934"><td class="num" id="LN934">934</td><td class="line">  <span class='keyword'>void</span> clear_not_c2_osr_compilable()          {       _access_flags.clear_not_c2_osr_compilable(); }</td></tr>
<tr class="codeline" data-linenumber="935"><td class="num" id="LN935">935</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="936"><td class="num" id="LN936">936</td><td class="line">  <span class='comment'>// Background compilation support</span></td></tr>
<tr class="codeline" data-linenumber="937"><td class="num" id="LN937">937</td><td class="line">  <span class='keyword'>bool</span> queued_for_compilation() <span class='keyword'>const</span>  { <span class='keyword'>return</span> access_flags().queued_for_compilation(); }</td></tr>
<tr class="codeline" data-linenumber="938"><td class="num" id="LN938">938</td><td class="line">  <span class='keyword'>void</span> set_queued_for_compilation()    { _access_flags.set_queued_for_compilation();     }</td></tr>
<tr class="codeline" data-linenumber="939"><td class="num" id="LN939">939</td><td class="line">  <span class='keyword'>void</span> clear_queued_for_compilation()  { _access_flags.clear_queued_for_compilation();   }</td></tr>
<tr class="codeline" data-linenumber="940"><td class="num" id="LN940">940</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="941"><td class="num" id="LN941">941</td><td class="line">  <span class='comment'>// Resolve all classes in signature, return 'true' if successful</span></td></tr>
<tr class="codeline" data-linenumber="942"><td class="num" id="LN942">942</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>bool</span> load_signature_classes(<span class='keyword'>const</span> methodHandle&amp; m, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="943"><td class="num" id="LN943">943</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="944"><td class="num" id="LN944">944</td><td class="line">  <span class='comment'>// Return if true if not all classes references in signature, including return type, has been loaded</span></td></tr>
<tr class="codeline" data-linenumber="945"><td class="num" id="LN945">945</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>bool</span> has_unloaded_classes_in_signature(<span class='keyword'>const</span> methodHandle&amp; m, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="946"><td class="num" id="LN946">946</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="947"><td class="num" id="LN947">947</td><td class="line">  <span class='comment'>// Printing</span></td></tr>
<tr class="codeline" data-linenumber="948"><td class="num" id="LN948">948</td><td class="line">  <span class='keyword'>void</span> print_short_name(outputStream* st = tty); <span class='comment'>// prints as klassname::methodname; Exposed so field engineers can debug VM</span></td></tr>
<tr class="codeline" data-linenumber="949"><td class="num" id="LN949">949</td><td class="line"><span class='directive'>#if <span class='macro'>INCLUDE_JVMTI<span class='macro_popup'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="950"><td class="num" id="LN950">950</td><td class="line">  <span class='keyword'>void</span> print_name(outputStream* st = tty); <span class='comment'>// prints as "virtual void foo(int)"; exposed for -Xlog:redefine+class</span></td></tr>
<tr class="codeline" data-linenumber="951"><td class="num" id="LN951">951</td><td class="line"><span class='directive'>#else</span></td></tr>
<tr class="codeline" data-linenumber="952"><td class="num" id="LN952">952</td><td class="line">  <span class='keyword'>void</span> print_name(outputStream* st = tty)        PRODUCT_RETURN; <span class='comment'>// prints as "virtual void foo(int)"</span></td></tr>
<tr class="codeline" data-linenumber="953"><td class="num" id="LN953">953</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="954"><td class="num" id="LN954">954</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="955"><td class="num" id="LN955">955</td><td class="line">  <span class='keyword'>typedef</span> <span class='keyword'>int</span> (*method_comparator_func)(Method* a, Method* b);</td></tr>
<tr class="codeline" data-linenumber="956"><td class="num" id="LN956">956</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="957"><td class="num" id="LN957">957</td><td class="line">  <span class='comment'>// Helper routine used for method sorting</span></td></tr>
<tr class="codeline" data-linenumber="958"><td class="num" id="LN958">958</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>void</span> sort_methods(Array&lt;Method*&gt;* methods, <span class='keyword'>bool</span> set_idnums = <span class='keyword'>true</span>, method_comparator_func func = <span class='macro'>NULL<span class='macro_popup'>__null</span></span>);</td></tr>
<tr class="codeline" data-linenumber="959"><td class="num" id="LN959">959</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="960"><td class="num" id="LN960">960</td><td class="line">  <span class='comment'>// Deallocation function for redefine classes or if an error occurs</span></td></tr>
<tr class="codeline" data-linenumber="961"><td class="num" id="LN961">961</td><td class="line">  <span class='keyword'>void</span> deallocate_contents(ClassLoaderData* loader_data);</td></tr>
<tr class="codeline" data-linenumber="962"><td class="num" id="LN962">962</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="963"><td class="num" id="LN963">963</td><td class="line">  <span class='keyword'>void</span> release_C_heap_structures();</td></tr>
<tr class="codeline" data-linenumber="964"><td class="num" id="LN964">964</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="965"><td class="num" id="LN965">965</td><td class="line">  Method* get_new_method() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="966"><td class="num" id="LN966">966</td><td class="line">    InstanceKlass* holder = method_holder();</td></tr>
<tr class="codeline" data-linenumber="967"><td class="num" id="LN967">967</td><td class="line">    Method* new_method = holder-&gt;method_with_idnum(orig_method_idnum());</td></tr>
<tr class="codeline" data-linenumber="968"><td class="num" id="LN968">968</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="969"><td class="num" id="LN969">969</td><td class="line">    <span class='macro'>assert(new_method != NULL, <span class='string_literal'>"method_with_idnum() should not be NULL"</span>)<span class='macro_popup'>do { if (!(new_method != __null)) { (*g_assert_poison) = 'X';<br>; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp"<br>, 969, "assert(" "new_method != __null" ") failed", "method_with_idnum() should not be NULL"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="970"><td class="num" id="LN970">970</td><td class="line">    <span class='macro'>assert(<span class='keyword'>this</span> != new_method, <span class='string_literal'>"sanity check"</span>)<span class='macro_popup'>do { if (!(this != new_method)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp"<br>, 970, "assert(" "this != new_method" ") failed", "sanity check"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="971"><td class="num" id="LN971">971</td><td class="line">    <span class='keyword'>return</span> new_method;</td></tr>
<tr class="codeline" data-linenumber="972"><td class="num" id="LN972">972</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="973"><td class="num" id="LN973">973</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="974"><td class="num" id="LN974">974</td><td class="line">  <span class='comment'>// Printing</span></td></tr>
<tr class="codeline" data-linenumber="975"><td class="num" id="LN975">975</td><td class="line"><span class='directive'>#ifndef PRODUCT</span></td></tr>
<tr class="codeline" data-linenumber="976"><td class="num" id="LN976">976</td><td class="line">  <span class='keyword'>void</span> print_on(outputStream* st) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="977"><td class="num" id="LN977">977</td><td class="line"><span class='directive'>#endif</span></td></tr>
<tr class="codeline" data-linenumber="978"><td class="num" id="LN978">978</td><td class="line">  <span class='keyword'>void</span> print_value_on(outputStream* st) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="979"><td class="num" id="LN979">979</td><td class="line">  <span class='keyword'>void</span> print_linkage_flags(outputStream* st) PRODUCT_RETURN;</td></tr>
<tr class="codeline" data-linenumber="980"><td class="num" id="LN980">980</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="981"><td class="num" id="LN981">981</td><td class="line">  <span class='keyword'>const</span> <span class='keyword'>char</span>* internal_name() <span class='keyword'>const</span> { <span class='keyword'>return</span> <span class='string_literal'>"{method}"</span>; }</td></tr>
<tr class="codeline" data-linenumber="982"><td class="num" id="LN982">982</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="983"><td class="num" id="LN983">983</td><td class="line">  <span class='comment'>// Check for valid method pointer</span></td></tr>
<tr class="codeline" data-linenumber="984"><td class="num" id="LN984">984</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>bool</span> has_method_vptr(<span class='keyword'>const</span> <span class='keyword'>void</span>* ptr);</td></tr>
<tr class="codeline" data-linenumber="985"><td class="num" id="LN985">985</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>bool</span> is_valid_method(<span class='keyword'>const</span> Method* m);</td></tr>
<tr class="codeline" data-linenumber="986"><td class="num" id="LN986">986</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="987"><td class="num" id="LN987">987</td><td class="line">  <span class='comment'>// Verify</span></td></tr>
<tr class="codeline" data-linenumber="988"><td class="num" id="LN988">988</td><td class="line">  <span class='keyword'>void</span> verify() { verify_on(tty); }</td></tr>
<tr class="codeline" data-linenumber="989"><td class="num" id="LN989">989</td><td class="line">  <span class='keyword'>void</span> verify_on(outputStream* st);</td></tr>
<tr class="codeline" data-linenumber="990"><td class="num" id="LN990">990</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="991"><td class="num" id="LN991">991</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="992"><td class="num" id="LN992">992</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="993"><td class="num" id="LN993">993</td><td class="line">  <span class='comment'>// Inlined elements</span></td></tr>
<tr class="codeline" data-linenumber="994"><td class="num" id="LN994">994</td><td class="line">  address* native_function_addr() <span class='keyword'>const</span>          { <span class='macro'>assert(is_native(), <span class='string_literal'>"must be native"</span>)<span class='macro_popup'>do { if (!(is_native())) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp"<br>, 994, "assert(" "is_native()" ") failed", "must be native");<br> ::breakpoint(); } } while (0)</span></span>; <span class='keyword'>return</span> (address*) (<span class='keyword'>this</span>+1); }</td></tr>
<tr class="codeline" data-linenumber="995"><td class="num" id="LN995">995</td><td class="line">  address* signature_handler_addr() <span class='keyword'>const</span>        { <span class='keyword'>return</span> native_function_addr() + 1; }</td></tr>
<tr class="codeline" data-linenumber="996"><td class="num" id="LN996">996</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="997"><td class="num" id="LN997">997</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="998"><td class="num" id="LN998">998</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="999"><td class="num" id="LN999">999</td><td class="line"><span class='comment'>// Utility class for compressing line number tables</span></td></tr>
<tr class="codeline" data-linenumber="1000"><td class="num" id="LN1000">1000</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1001"><td class="num" id="LN1001">1001</td><td class="line"><span class='keyword'>class</span> CompressedLineNumberWriteStream: <span class='keyword'>public</span> CompressedWriteStream {</td></tr>
<tr class="codeline" data-linenumber="1002"><td class="num" id="LN1002">1002</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="1003"><td class="num" id="LN1003">1003</td><td class="line">  <span class='keyword'>int</span> _bci;</td></tr>
<tr class="codeline" data-linenumber="1004"><td class="num" id="LN1004">1004</td><td class="line">  <span class='keyword'>int</span> _line;</td></tr>
<tr class="codeline" data-linenumber="1005"><td class="num" id="LN1005">1005</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="1006"><td class="num" id="LN1006">1006</td><td class="line">  <span class='comment'>// Constructor</span></td></tr>
<tr class="codeline" data-linenumber="1007"><td class="num" id="LN1007">1007</td><td class="line">  CompressedLineNumberWriteStream(<span class='keyword'>int</span> initial_size) : CompressedWriteStream(initial_size), _bci(0), _line(0) {}</td></tr>
<tr class="codeline" data-linenumber="1008"><td class="num" id="LN1008">1008</td><td class="line">  CompressedLineNumberWriteStream(u_char* buffer, <span class='keyword'>int</span> initial_size) : CompressedWriteStream(buffer, initial_size), _bci(0), _line(0) {}</td></tr>
<tr class="codeline" data-linenumber="1009"><td class="num" id="LN1009">1009</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1010"><td class="num" id="LN1010">1010</td><td class="line">  <span class='comment'>// Write (bci, line number) pair to stream</span></td></tr>
<tr class="codeline" data-linenumber="1011"><td class="num" id="LN1011">1011</td><td class="line">  <span class='keyword'>void</span> write_pair_regular(<span class='keyword'>int</span> bci_delta, <span class='keyword'>int</span> line_delta);</td></tr>
<tr class="codeline" data-linenumber="1012"><td class="num" id="LN1012">1012</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1013"><td class="num" id="LN1013">1013</td><td class="line">  <span class='comment'>// If (bci delta, line delta) fits in (5-bit unsigned, 3-bit unsigned)</span></td></tr>
<tr class="codeline" data-linenumber="1014"><td class="num" id="LN1014">1014</td><td class="line">  <span class='comment'>// we save it as one byte, otherwise we write a 0xFF escape character</span></td></tr>
<tr class="codeline" data-linenumber="1015"><td class="num" id="LN1015">1015</td><td class="line">  <span class='comment'>// and use regular compression. 0x0 is used as end-of-stream terminator.</span></td></tr>
<tr class="codeline" data-linenumber="1016"><td class="num" id="LN1016">1016</td><td class="line">  <span class='keyword'>void</span> write_pair_inline(<span class='keyword'>int</span> bci, <span class='keyword'>int</span> line);</td></tr>
<tr class="codeline" data-linenumber="1017"><td class="num" id="LN1017">1017</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1018"><td class="num" id="LN1018">1018</td><td class="line">  <span class='keyword'>void</span> write_pair(<span class='keyword'>int</span> bci, <span class='keyword'>int</span> line);</td></tr>
<tr class="codeline" data-linenumber="1019"><td class="num" id="LN1019">1019</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1020"><td class="num" id="LN1020">1020</td><td class="line">  <span class='comment'>// Write end-of-stream marker</span></td></tr>
<tr class="codeline" data-linenumber="1021"><td class="num" id="LN1021">1021</td><td class="line">  <span class='keyword'>void</span> write_terminator()                        { write_byte(0); }</td></tr>
<tr class="codeline" data-linenumber="1022"><td class="num" id="LN1022">1022</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="1023"><td class="num" id="LN1023">1023</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1024"><td class="num" id="LN1024">1024</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1025"><td class="num" id="LN1025">1025</td><td class="line"><span class='comment'>// Utility class for decompressing line number tables</span></td></tr>
<tr class="codeline" data-linenumber="1026"><td class="num" id="LN1026">1026</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1027"><td class="num" id="LN1027">1027</td><td class="line"><span class='keyword'>class</span> CompressedLineNumberReadStream: <span class='keyword'>public</span> CompressedReadStream {</td></tr>
<tr class="codeline" data-linenumber="1028"><td class="num" id="LN1028">1028</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="1029"><td class="num" id="LN1029">1029</td><td class="line">  <span class='keyword'>int</span> _bci;</td></tr>
<tr class="codeline" data-linenumber="1030"><td class="num" id="LN1030">1030</td><td class="line">  <span class='keyword'>int</span> _line;</td></tr>
<tr class="codeline" data-linenumber="1031"><td class="num" id="LN1031">1031</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="1032"><td class="num" id="LN1032">1032</td><td class="line">  <span class='comment'>// Constructor</span></td></tr>
<tr class="codeline" data-linenumber="1033"><td class="num" id="LN1033">1033</td><td class="line">  CompressedLineNumberReadStream(u_char* buffer);</td></tr>
<tr class="codeline" data-linenumber="1034"><td class="num" id="LN1034">1034</td><td class="line">  <span class='comment'>// Read (bci, line number) pair from stream. Returns false at end-of-stream.</span></td></tr>
<tr class="codeline" data-linenumber="1035"><td class="num" id="LN1035">1035</td><td class="line">  <span class='keyword'>bool</span> read_pair();</td></tr>
<tr class="codeline" data-linenumber="1036"><td class="num" id="LN1036">1036</td><td class="line">  <span class='comment'>// Accessing bci and line number (after calling read_pair)</span></td></tr>
<tr class="codeline" data-linenumber="1037"><td class="num" id="LN1037">1037</td><td class="line">  <span class='keyword'>int</span> bci() <span class='keyword'>const</span>                               { <span class='keyword'>return</span> _bci; }</td></tr>
<tr class="codeline" data-linenumber="1038"><td class="num" id="LN1038">1038</td><td class="line">  <span class='keyword'>int</span> line() <span class='keyword'>const</span>                              { <span class='keyword'>return</span> _line; }</td></tr>
<tr class="codeline" data-linenumber="1039"><td class="num" id="LN1039">1039</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="1040"><td class="num" id="LN1040">1040</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1041"><td class="num" id="LN1041">1041</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1042"><td class="num" id="LN1042">1042</td><td class="line"><span class='directive'>#if <span class='macro'>INCLUDE_JVMTI<span class='macro_popup'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="1043"><td class="num" id="LN1043">1043</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1044"><td class="num" id="LN1044">1044</td><td class="line"><span class='comment'>/// Fast Breakpoints.</span></td></tr>
<tr class="codeline" data-linenumber="1045"><td class="num" id="LN1045">1045</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1046"><td class="num" id="LN1046">1046</td><td class="line"><span class='comment'>// If this structure gets more complicated (because bpts get numerous),</span></td></tr>
<tr class="codeline" data-linenumber="1047"><td class="num" id="LN1047">1047</td><td class="line"><span class='comment'>// move it into its own header.</span></td></tr>
<tr class="codeline" data-linenumber="1048"><td class="num" id="LN1048">1048</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1049"><td class="num" id="LN1049">1049</td><td class="line"><span class='comment'>// There is presently no provision for concurrent access</span></td></tr>
<tr class="codeline" data-linenumber="1050"><td class="num" id="LN1050">1050</td><td class="line"><span class='comment'>// to breakpoint lists, which is only OK for JVMTI because</span></td></tr>
<tr class="codeline" data-linenumber="1051"><td class="num" id="LN1051">1051</td><td class="line"><span class='comment'>// breakpoints are written only at safepoints, and are read</span></td></tr>
<tr class="codeline" data-linenumber="1052"><td class="num" id="LN1052">1052</td><td class="line"><span class='comment'>// concurrently only outside of safepoints.</span></td></tr>
<tr class="codeline" data-linenumber="1053"><td class="num" id="LN1053">1053</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1054"><td class="num" id="LN1054">1054</td><td class="line"><span class='keyword'>class</span> BreakpointInfo : <span class='keyword'>public</span> CHeapObj&lt;mtClass&gt; {</td></tr>
<tr class="codeline" data-linenumber="1055"><td class="num" id="LN1055">1055</td><td class="line">  <span class='keyword'>friend</span> <span class='keyword'>class</span> VMStructs;</td></tr>
<tr class="codeline" data-linenumber="1056"><td class="num" id="LN1056">1056</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="1057"><td class="num" id="LN1057">1057</td><td class="line">  Bytecodes::Code  _orig_bytecode;</td></tr>
<tr class="codeline" data-linenumber="1058"><td class="num" id="LN1058">1058</td><td class="line">  <span class='keyword'>int</span>              _bci;</td></tr>
<tr class="codeline" data-linenumber="1059"><td class="num" id="LN1059">1059</td><td class="line">  u2               _name_index;       <span class='comment'>// of method</span></td></tr>
<tr class="codeline" data-linenumber="1060"><td class="num" id="LN1060">1060</td><td class="line">  u2               _signature_index;  <span class='comment'>// of method</span></td></tr>
<tr class="codeline" data-linenumber="1061"><td class="num" id="LN1061">1061</td><td class="line">  BreakpointInfo*  _next;             <span class='comment'>// simple storage allocation</span></td></tr>
<tr class="codeline" data-linenumber="1062"><td class="num" id="LN1062">1062</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1063"><td class="num" id="LN1063">1063</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="1064"><td class="num" id="LN1064">1064</td><td class="line">  BreakpointInfo(Method* m, <span class='keyword'>int</span> bci);</td></tr>
<tr class="codeline" data-linenumber="1065"><td class="num" id="LN1065">1065</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1066"><td class="num" id="LN1066">1066</td><td class="line">  <span class='comment'>// accessors</span></td></tr>
<tr class="codeline" data-linenumber="1067"><td class="num" id="LN1067">1067</td><td class="line">  Bytecodes::Code orig_bytecode()                     { <span class='keyword'>return</span> _orig_bytecode; }</td></tr>
<tr class="codeline" data-linenumber="1068"><td class="num" id="LN1068">1068</td><td class="line">  <span class='keyword'>void</span>        set_orig_bytecode(Bytecodes::Code code) { _orig_bytecode = code; }</td></tr>
<tr class="codeline" data-linenumber="1069"><td class="num" id="LN1069">1069</td><td class="line">  <span class='keyword'>int</span>         bci()                                   { <span class='keyword'>return</span> _bci; }</td></tr>
<tr class="codeline" data-linenumber="1070"><td class="num" id="LN1070">1070</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1071"><td class="num" id="LN1071">1071</td><td class="line">  BreakpointInfo*          next() <span class='keyword'>const</span>               { <span class='keyword'>return</span> _next; }</td></tr>
<tr class="codeline" data-linenumber="1072"><td class="num" id="LN1072">1072</td><td class="line">  <span class='keyword'>void</span>                 set_next(BreakpointInfo* n)    { _next = n; }</td></tr>
<tr class="codeline" data-linenumber="1073"><td class="num" id="LN1073">1073</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1074"><td class="num" id="LN1074">1074</td><td class="line">  <span class='comment'>// helps for searchers</span></td></tr>
<tr class="codeline" data-linenumber="1075"><td class="num" id="LN1075">1075</td><td class="line">  <span class='keyword'>bool</span> match(<span class='keyword'>const</span> Method* m, <span class='keyword'>int</span> bci) {</td></tr>
<tr class="codeline" data-linenumber="1076"><td class="num" id="LN1076">1076</td><td class="line">    <span class='keyword'>return</span> bci == _bci &amp;&amp; match(m);</td></tr>
<tr class="codeline" data-linenumber="1077"><td class="num" id="LN1077">1077</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1078"><td class="num" id="LN1078">1078</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1079"><td class="num" id="LN1079">1079</td><td class="line">  <span class='keyword'>bool</span> match(<span class='keyword'>const</span> Method* m) {</td></tr>
<tr class="codeline" data-linenumber="1080"><td class="num" id="LN1080">1080</td><td class="line">    <span class='keyword'>return</span> _name_index == m-&gt;name_index() &amp;&amp;</td></tr>
<tr class="codeline" data-linenumber="1081"><td class="num" id="LN1081">1081</td><td class="line">      _signature_index == m-&gt;signature_index();</td></tr>
<tr class="codeline" data-linenumber="1082"><td class="num" id="LN1082">1082</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1083"><td class="num" id="LN1083">1083</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1084"><td class="num" id="LN1084">1084</td><td class="line">  <span class='keyword'>void</span> set(Method* method);</td></tr>
<tr class="codeline" data-linenumber="1085"><td class="num" id="LN1085">1085</td><td class="line">  <span class='keyword'>void</span> clear(Method* method);</td></tr>
<tr class="codeline" data-linenumber="1086"><td class="num" id="LN1086">1086</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="1087"><td class="num" id="LN1087">1087</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1088"><td class="num" id="LN1088">1088</td><td class="line"><span class='directive'>#endif // INCLUDE_JVMTI</span></td></tr>
<tr class="codeline" data-linenumber="1089"><td class="num" id="LN1089">1089</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1090"><td class="num" id="LN1090">1090</td><td class="line"><span class='comment'>// Utility class for access exception handlers</span></td></tr>
<tr class="codeline" data-linenumber="1091"><td class="num" id="LN1091">1091</td><td class="line"><span class='keyword'>class</span> ExceptionTable : <span class='keyword'>public</span> StackObj {</td></tr>
<tr class="codeline" data-linenumber="1092"><td class="num" id="LN1092">1092</td><td class="line"> <span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="1093"><td class="num" id="LN1093">1093</td><td class="line">  ExceptionTableElement* _table;</td></tr>
<tr class="codeline" data-linenumber="1094"><td class="num" id="LN1094">1094</td><td class="line">  u2  _length;</td></tr>
<tr class="codeline" data-linenumber="1095"><td class="num" id="LN1095">1095</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1096"><td class="num" id="LN1096">1096</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="1097"><td class="num" id="LN1097">1097</td><td class="line">  ExceptionTable(<span class='keyword'>const</span> Method* m) {</td></tr>
<tr class="codeline" data-linenumber="1098"><td class="num" id="LN1098">1098</td><td class="line">    <span class='keyword'>if</span> (m-&gt;has_exception_handler()) {</td></tr>
<tr class="codeline" data-linenumber="1099"><td class="num" id="LN1099">1099</td><td class="line">      _table = m-&gt;exception_table_start();</td></tr>
<tr class="codeline" data-linenumber="1100"><td class="num" id="LN1100">1100</td><td class="line">      _length = m-&gt;exception_table_length();</td></tr>
<tr class="codeline" data-linenumber="1101"><td class="num" id="LN1101">1101</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="1102"><td class="num" id="LN1102">1102</td><td class="line">      _table = <span class='macro'>NULL<span class='macro_popup'>__null</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1103"><td class="num" id="LN1103">1103</td><td class="line">      _length = 0;</td></tr>
<tr class="codeline" data-linenumber="1104"><td class="num" id="LN1104">1104</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="1105"><td class="num" id="LN1105">1105</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1106"><td class="num" id="LN1106">1106</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1107"><td class="num" id="LN1107">1107</td><td class="line">  <span class='keyword'>int</span> length() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="1108"><td class="num" id="LN1108">1108</td><td class="line">    <span class='keyword'>return</span> _length;</td></tr>
<tr class="codeline" data-linenumber="1109"><td class="num" id="LN1109">1109</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1110"><td class="num" id="LN1110">1110</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1111"><td class="num" id="LN1111">1111</td><td class="line">  u2 start_pc(<span class='keyword'>int</span> idx) <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="1112"><td class="num" id="LN1112">1112</td><td class="line">    <span class='macro'>assert(idx &lt; _length, <span class='string_literal'>"out of bounds"</span>)<span class='macro_popup'>do { if (!(idx &lt; _length)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp"<br>, 1112, "assert(" "idx &lt; _length" ") failed", "out of bounds"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1113"><td class="num" id="LN1113">1113</td><td class="line">    <span class='keyword'>return</span> _table[idx].start_pc;</td></tr>
<tr class="codeline" data-linenumber="1114"><td class="num" id="LN1114">1114</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1115"><td class="num" id="LN1115">1115</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1116"><td class="num" id="LN1116">1116</td><td class="line">  <span class='keyword'>void</span> set_start_pc(<span class='keyword'>int</span> idx, u2 value) {</td></tr>
<tr class="codeline" data-linenumber="1117"><td class="num" id="LN1117">1117</td><td class="line">    <span class='macro'>assert(idx &lt; _length, <span class='string_literal'>"out of bounds"</span>)<span class='macro_popup'>do { if (!(idx &lt; _length)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp"<br>, 1117, "assert(" "idx &lt; _length" ") failed", "out of bounds"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1118"><td class="num" id="LN1118">1118</td><td class="line">    _table[idx].start_pc = value;</td></tr>
<tr class="codeline" data-linenumber="1119"><td class="num" id="LN1119">1119</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1120"><td class="num" id="LN1120">1120</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1121"><td class="num" id="LN1121">1121</td><td class="line">  u2 end_pc(<span class='keyword'>int</span> idx) <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="1122"><td class="num" id="LN1122">1122</td><td class="line">    <span class='macro'>assert(idx &lt; _length, <span class='string_literal'>"out of bounds"</span>)<span class='macro_popup'>do { if (!(idx &lt; _length)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp"<br>, 1122, "assert(" "idx &lt; _length" ") failed", "out of bounds"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1123"><td class="num" id="LN1123">1123</td><td class="line">    <span class='keyword'>return</span> _table[idx].end_pc;</td></tr>
<tr class="codeline" data-linenumber="1124"><td class="num" id="LN1124">1124</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1125"><td class="num" id="LN1125">1125</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1126"><td class="num" id="LN1126">1126</td><td class="line">  <span class='keyword'>void</span> set_end_pc(<span class='keyword'>int</span> idx, u2 value) {</td></tr>
<tr class="codeline" data-linenumber="1127"><td class="num" id="LN1127">1127</td><td class="line">    <span class='macro'>assert(idx &lt; _length, <span class='string_literal'>"out of bounds"</span>)<span class='macro_popup'>do { if (!(idx &lt; _length)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp"<br>, 1127, "assert(" "idx &lt; _length" ") failed", "out of bounds"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1128"><td class="num" id="LN1128">1128</td><td class="line">    _table[idx].end_pc = value;</td></tr>
<tr class="codeline" data-linenumber="1129"><td class="num" id="LN1129">1129</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1130"><td class="num" id="LN1130">1130</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1131"><td class="num" id="LN1131">1131</td><td class="line">  u2 handler_pc(<span class='keyword'>int</span> idx) <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="1132"><td class="num" id="LN1132">1132</td><td class="line">    <span class='macro'>assert(idx &lt; _length, <span class='string_literal'>"out of bounds"</span>)<span class='macro_popup'>do { if (!(idx &lt; _length)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp"<br>, 1132, "assert(" "idx &lt; _length" ") failed", "out of bounds"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1133"><td class="num" id="LN1133">1133</td><td class="line">    <span class='keyword'>return</span> _table[idx].handler_pc;</td></tr>
<tr class="codeline" data-linenumber="1134"><td class="num" id="LN1134">1134</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1135"><td class="num" id="LN1135">1135</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1136"><td class="num" id="LN1136">1136</td><td class="line">  <span class='keyword'>void</span> set_handler_pc(<span class='keyword'>int</span> idx, u2 value) {</td></tr>
<tr class="codeline" data-linenumber="1137"><td class="num" id="LN1137">1137</td><td class="line">    <span class='macro'>assert(idx &lt; _length, <span class='string_literal'>"out of bounds"</span>)<span class='macro_popup'>do { if (!(idx &lt; _length)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp"<br>, 1137, "assert(" "idx &lt; _length" ") failed", "out of bounds"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1138"><td class="num" id="LN1138">1138</td><td class="line">    _table[idx].handler_pc = value;</td></tr>
<tr class="codeline" data-linenumber="1139"><td class="num" id="LN1139">1139</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1140"><td class="num" id="LN1140">1140</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1141"><td class="num" id="LN1141">1141</td><td class="line">  u2 catch_type_index(<span class='keyword'>int</span> idx) <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="1142"><td class="num" id="LN1142">1142</td><td class="line">    <span class='macro'>assert(idx &lt; _length, <span class='string_literal'>"out of bounds"</span>)<span class='macro_popup'>do { if (!(idx &lt; _length)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp"<br>, 1142, "assert(" "idx &lt; _length" ") failed", "out of bounds"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1143"><td class="num" id="LN1143">1143</td><td class="line">    <span class='keyword'>return</span> _table[idx].catch_type_index;</td></tr>
<tr class="codeline" data-linenumber="1144"><td class="num" id="LN1144">1144</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1145"><td class="num" id="LN1145">1145</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1146"><td class="num" id="LN1146">1146</td><td class="line">  <span class='keyword'>void</span> set_catch_type_index(<span class='keyword'>int</span> idx, u2 value) {</td></tr>
<tr class="codeline" data-linenumber="1147"><td class="num" id="LN1147">1147</td><td class="line">    <span class='macro'>assert(idx &lt; _length, <span class='string_literal'>"out of bounds"</span>)<span class='macro_popup'>do { if (!(idx &lt; _length)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/method.hpp"<br>, 1147, "assert(" "idx &lt; _length" ") failed", "out of bounds"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="1148"><td class="num" id="LN1148">1148</td><td class="line">    _table[idx].catch_type_index = value;</td></tr>
<tr class="codeline" data-linenumber="1149"><td class="num" id="LN1149">1149</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="1150"><td class="num" id="LN1150">1150</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="1151"><td class="num" id="LN1151">1151</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="1152"><td class="num" id="LN1152">1152</td><td class="line"><span class='directive'>#endif // SHARE_OOPS_METHOD_HPP</span></td></tr>
</table><hr class=divider>
<div id=File44890>
<div class=FileNav><a href="#File48751">&#x2190;</a></div><h4 class=FileName>/home/daniel/Projects/java/jdk/src/hotspot/share/oops/constMethod.hpp</h4>
</div>
<table class="code" data-fileid="44890">
<tr class="codeline" data-linenumber="1"><td class="num" id="LN1">1</td><td class="line"><span class='comment'>/*</span></td></tr>
<tr class="codeline" data-linenumber="2"><td class="num" id="LN2">2</td><td class="line"> <span class='comment'>* Copyright (c) 2003, 2021, Oracle and/or its affiliates. All rights reserved.</span></td></tr>
<tr class="codeline" data-linenumber="3"><td class="num" id="LN3">3</td><td class="line"> <span class='comment'>* DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.</span></td></tr>
<tr class="codeline" data-linenumber="4"><td class="num" id="LN4">4</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="5"><td class="num" id="LN5">5</td><td class="line"> <span class='comment'>* This code is free software; you can redistribute it and/or modify it</span></td></tr>
<tr class="codeline" data-linenumber="6"><td class="num" id="LN6">6</td><td class="line"> <span class='comment'>* under the terms of the GNU General Public License version 2 only, as</span></td></tr>
<tr class="codeline" data-linenumber="7"><td class="num" id="LN7">7</td><td class="line"> <span class='comment'>* published by the Free Software Foundation.</span></td></tr>
<tr class="codeline" data-linenumber="8"><td class="num" id="LN8">8</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="9"><td class="num" id="LN9">9</td><td class="line"> <span class='comment'>* This code is distributed in the hope that it will be useful, but WITHOUT</span></td></tr>
<tr class="codeline" data-linenumber="10"><td class="num" id="LN10">10</td><td class="line"> <span class='comment'>* ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or</span></td></tr>
<tr class="codeline" data-linenumber="11"><td class="num" id="LN11">11</td><td class="line"> <span class='comment'>* FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License</span></td></tr>
<tr class="codeline" data-linenumber="12"><td class="num" id="LN12">12</td><td class="line"> <span class='comment'>* version 2 for more details (a copy is included in the LICENSE file that</span></td></tr>
<tr class="codeline" data-linenumber="13"><td class="num" id="LN13">13</td><td class="line"> <span class='comment'>* accompanied this code).</span></td></tr>
<tr class="codeline" data-linenumber="14"><td class="num" id="LN14">14</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="15"><td class="num" id="LN15">15</td><td class="line"> <span class='comment'>* You should have received a copy of the GNU General Public License version</span></td></tr>
<tr class="codeline" data-linenumber="16"><td class="num" id="LN16">16</td><td class="line"> <span class='comment'>* 2 along with this work; if not, write to the Free Software Foundation,</span></td></tr>
<tr class="codeline" data-linenumber="17"><td class="num" id="LN17">17</td><td class="line"> <span class='comment'>* Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.</span></td></tr>
<tr class="codeline" data-linenumber="18"><td class="num" id="LN18">18</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="19"><td class="num" id="LN19">19</td><td class="line"> <span class='comment'>* Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA</span></td></tr>
<tr class="codeline" data-linenumber="20"><td class="num" id="LN20">20</td><td class="line"> <span class='comment'>* or visit www.oracle.com if you need additional information or have any</span></td></tr>
<tr class="codeline" data-linenumber="21"><td class="num" id="LN21">21</td><td class="line"> <span class='comment'>* questions.</span></td></tr>
<tr class="codeline" data-linenumber="22"><td class="num" id="LN22">22</td><td class="line"> <span class='comment'>*</span></td></tr>
<tr class="codeline" data-linenumber="23"><td class="num" id="LN23">23</td><td class="line"> <span class='comment'>*/</span></td></tr>
<tr class="codeline" data-linenumber="24"><td class="num" id="LN24">24</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="25"><td class="num" id="LN25">25</td><td class="line"><span class='directive'>#ifndef SHARE_OOPS_CONSTMETHOD_HPP</span></td></tr>
<tr class="codeline" data-linenumber="26"><td class="num" id="LN26">26</td><td class="line"><span class='directive'>#define SHARE_OOPS_CONSTMETHOD_HPP</span></td></tr>
<tr class="codeline" data-linenumber="27"><td class="num" id="LN27">27</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="28"><td class="num" id="LN28">28</td><td class="line"><span class='directive'>#include "oops/oop.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="29"><td class="num" id="LN29">29</td><td class="line"><span class='directive'>#include "utilities/align.hpp"</span></td></tr>
<tr class="codeline" data-linenumber="30"><td class="num" id="LN30">30</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="31"><td class="num" id="LN31">31</td><td class="line"><span class='comment'>// An ConstMethod represents portions of a Java method which are not written to after</span></td></tr>
<tr class="codeline" data-linenumber="32"><td class="num" id="LN32">32</td><td class="line"><span class='comment'>// the classfile is parsed(*see below).  This part of the method can be shared across</span></td></tr>
<tr class="codeline" data-linenumber="33"><td class="num" id="LN33">33</td><td class="line"><span class='comment'>// processes in a read-only section with Class Data Sharing (CDS).  It's important</span></td></tr>
<tr class="codeline" data-linenumber="34"><td class="num" id="LN34">34</td><td class="line"><span class='comment'>// that this class doesn't have virtual functions because the vptr cannot be shared</span></td></tr>
<tr class="codeline" data-linenumber="35"><td class="num" id="LN35">35</td><td class="line"><span class='comment'>// with CDS.</span></td></tr>
<tr class="codeline" data-linenumber="36"><td class="num" id="LN36">36</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="37"><td class="num" id="LN37">37</td><td class="line"><span class='comment'>// Note that most applications load thousands of methods, so keeping the size of this</span></td></tr>
<tr class="codeline" data-linenumber="38"><td class="num" id="LN38">38</td><td class="line"><span class='comment'>// structure small has a big impact on footprint.</span></td></tr>
<tr class="codeline" data-linenumber="39"><td class="num" id="LN39">39</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="40"><td class="num" id="LN40">40</td><td class="line"><span class='comment'>// The actual bytecodes are inlined after the end of the ConstMethod struct.</span></td></tr>
<tr class="codeline" data-linenumber="41"><td class="num" id="LN41">41</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="42"><td class="num" id="LN42">42</td><td class="line"><span class='comment'>// The line number table is compressed and inlined following the byte codes. It is</span></td></tr>
<tr class="codeline" data-linenumber="43"><td class="num" id="LN43">43</td><td class="line"><span class='comment'>// found as the first byte following the byte codes.  Note that accessing the line</span></td></tr>
<tr class="codeline" data-linenumber="44"><td class="num" id="LN44">44</td><td class="line"><span class='comment'>// number and local variable tables is not performance critical at all.</span></td></tr>
<tr class="codeline" data-linenumber="45"><td class="num" id="LN45">45</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="46"><td class="num" id="LN46">46</td><td class="line"><span class='comment'>// The checked exceptions table and the local variable table are inlined after the</span></td></tr>
<tr class="codeline" data-linenumber="47"><td class="num" id="LN47">47</td><td class="line"><span class='comment'>// line number table, and indexed from the end of the method. We do not compress the</span></td></tr>
<tr class="codeline" data-linenumber="48"><td class="num" id="LN48">48</td><td class="line"><span class='comment'>// checked exceptions table since the average length is less than 2, and it is used</span></td></tr>
<tr class="codeline" data-linenumber="49"><td class="num" id="LN49">49</td><td class="line"><span class='comment'>// by reflection so access should be fast.  We do not bother to compress the local</span></td></tr>
<tr class="codeline" data-linenumber="50"><td class="num" id="LN50">50</td><td class="line"><span class='comment'>// variable table either since it is mostly absent.</span></td></tr>
<tr class="codeline" data-linenumber="51"><td class="num" id="LN51">51</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="52"><td class="num" id="LN52">52</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="53"><td class="num" id="LN53">53</td><td class="line"><span class='comment'>//  ConstMethod embedded field layout (after declared fields):</span></td></tr>
<tr class="codeline" data-linenumber="54"><td class="num" id="LN54">54</td><td class="line"><span class='comment'>//    [EMBEDDED byte codes]</span></td></tr>
<tr class="codeline" data-linenumber="55"><td class="num" id="LN55">55</td><td class="line"><span class='comment'>//    [EMBEDDED compressed linenumber table]</span></td></tr>
<tr class="codeline" data-linenumber="56"><td class="num" id="LN56">56</td><td class="line"><span class='comment'>//     (see class CompressedLineNumberReadStream)</span></td></tr>
<tr class="codeline" data-linenumber="57"><td class="num" id="LN57">57</td><td class="line"><span class='comment'>//     (note that length is unknown until decompressed)</span></td></tr>
<tr class="codeline" data-linenumber="58"><td class="num" id="LN58">58</td><td class="line"><span class='comment'>//     (access flags bit tells whether table is present)</span></td></tr>
<tr class="codeline" data-linenumber="59"><td class="num" id="LN59">59</td><td class="line"><span class='comment'>//     (indexed from start of ConstMethod)</span></td></tr>
<tr class="codeline" data-linenumber="60"><td class="num" id="LN60">60</td><td class="line"><span class='comment'>//     (elements not necessarily sorted!)</span></td></tr>
<tr class="codeline" data-linenumber="61"><td class="num" id="LN61">61</td><td class="line"><span class='comment'>//    [EMBEDDED localvariable table elements + length (length last)]</span></td></tr>
<tr class="codeline" data-linenumber="62"><td class="num" id="LN62">62</td><td class="line"><span class='comment'>//     (length is u2, elements are 6-tuples of u2)</span></td></tr>
<tr class="codeline" data-linenumber="63"><td class="num" id="LN63">63</td><td class="line"><span class='comment'>//     (see class LocalVariableTableElement)</span></td></tr>
<tr class="codeline" data-linenumber="64"><td class="num" id="LN64">64</td><td class="line"><span class='comment'>//     (access flags bit tells whether table is present)</span></td></tr>
<tr class="codeline" data-linenumber="65"><td class="num" id="LN65">65</td><td class="line"><span class='comment'>//     (indexed from end of ConstMethod*)</span></td></tr>
<tr class="codeline" data-linenumber="66"><td class="num" id="LN66">66</td><td class="line"><span class='comment'>//    [EMBEDDED exception table + length (length last)]</span></td></tr>
<tr class="codeline" data-linenumber="67"><td class="num" id="LN67">67</td><td class="line"><span class='comment'>//     (length is u2, elements are 4-tuples of u2)</span></td></tr>
<tr class="codeline" data-linenumber="68"><td class="num" id="LN68">68</td><td class="line"><span class='comment'>//     (see class ExceptionTableElement)</span></td></tr>
<tr class="codeline" data-linenumber="69"><td class="num" id="LN69">69</td><td class="line"><span class='comment'>//     (access flags bit tells whether table is present)</span></td></tr>
<tr class="codeline" data-linenumber="70"><td class="num" id="LN70">70</td><td class="line"><span class='comment'>//     (indexed from end of ConstMethod*)</span></td></tr>
<tr class="codeline" data-linenumber="71"><td class="num" id="LN71">71</td><td class="line"><span class='comment'>//    [EMBEDDED checked exceptions elements + length (length last)]</span></td></tr>
<tr class="codeline" data-linenumber="72"><td class="num" id="LN72">72</td><td class="line"><span class='comment'>//     (length is u2, elements are u2)</span></td></tr>
<tr class="codeline" data-linenumber="73"><td class="num" id="LN73">73</td><td class="line"><span class='comment'>//     (see class CheckedExceptionElement)</span></td></tr>
<tr class="codeline" data-linenumber="74"><td class="num" id="LN74">74</td><td class="line"><span class='comment'>//     (access flags bit tells whether table is present)</span></td></tr>
<tr class="codeline" data-linenumber="75"><td class="num" id="LN75">75</td><td class="line"><span class='comment'>//     (indexed from end of ConstMethod*)</span></td></tr>
<tr class="codeline" data-linenumber="76"><td class="num" id="LN76">76</td><td class="line"><span class='comment'>//    [EMBEDDED method parameters elements + length (length last)]</span></td></tr>
<tr class="codeline" data-linenumber="77"><td class="num" id="LN77">77</td><td class="line"><span class='comment'>//     (length is u2, elements are u2, u4 structures)</span></td></tr>
<tr class="codeline" data-linenumber="78"><td class="num" id="LN78">78</td><td class="line"><span class='comment'>//     (see class MethodParametersElement)</span></td></tr>
<tr class="codeline" data-linenumber="79"><td class="num" id="LN79">79</td><td class="line"><span class='comment'>//     (access flags bit tells whether table is present)</span></td></tr>
<tr class="codeline" data-linenumber="80"><td class="num" id="LN80">80</td><td class="line"><span class='comment'>//     (indexed from end of ConstMethod*)</span></td></tr>
<tr class="codeline" data-linenumber="81"><td class="num" id="LN81">81</td><td class="line"><span class='comment'>//    [EMBEDDED generic signature index (u2)]</span></td></tr>
<tr class="codeline" data-linenumber="82"><td class="num" id="LN82">82</td><td class="line"><span class='comment'>//     (indexed from end of constMethodOop)</span></td></tr>
<tr class="codeline" data-linenumber="83"><td class="num" id="LN83">83</td><td class="line"><span class='comment'>//    [EMBEDDED annotations arrays - method, parameter, type, default]</span></td></tr>
<tr class="codeline" data-linenumber="84"><td class="num" id="LN84">84</td><td class="line"><span class='comment'>//      pointer to Array&lt;u1&gt; if annotation is present</span></td></tr>
<tr class="codeline" data-linenumber="85"><td class="num" id="LN85">85</td><td class="line"><span class='comment'>//</span></td></tr>
<tr class="codeline" data-linenumber="86"><td class="num" id="LN86">86</td><td class="line"><span class='comment'>// IMPORTANT: If anything gets added here, there need to be changes to</span></td></tr>
<tr class="codeline" data-linenumber="87"><td class="num" id="LN87">87</td><td class="line"><span class='comment'>// ensure that ServicabilityAgent doesn't get broken as a result!</span></td></tr>
<tr class="codeline" data-linenumber="88"><td class="num" id="LN88">88</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="89"><td class="num" id="LN89">89</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="90"><td class="num" id="LN90">90</td><td class="line"><span class='comment'>// Utility class describing elements in checked exceptions table inlined in Method*.</span></td></tr>
<tr class="codeline" data-linenumber="91"><td class="num" id="LN91">91</td><td class="line"><span class='keyword'>class</span> CheckedExceptionElement {</td></tr>
<tr class="codeline" data-linenumber="92"><td class="num" id="LN92">92</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="93"><td class="num" id="LN93">93</td><td class="line">  u2 class_cp_index;</td></tr>
<tr class="codeline" data-linenumber="94"><td class="num" id="LN94">94</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="95"><td class="num" id="LN95">95</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="96"><td class="num" id="LN96">96</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="97"><td class="num" id="LN97">97</td><td class="line"><span class='comment'>// Utility class describing elements in local variable table inlined in Method*.</span></td></tr>
<tr class="codeline" data-linenumber="98"><td class="num" id="LN98">98</td><td class="line"><span class='keyword'>class</span> LocalVariableTableElement {</td></tr>
<tr class="codeline" data-linenumber="99"><td class="num" id="LN99">99</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="100"><td class="num" id="LN100">100</td><td class="line">  u2 start_bci;</td></tr>
<tr class="codeline" data-linenumber="101"><td class="num" id="LN101">101</td><td class="line">  u2 length;</td></tr>
<tr class="codeline" data-linenumber="102"><td class="num" id="LN102">102</td><td class="line">  u2 name_cp_index;</td></tr>
<tr class="codeline" data-linenumber="103"><td class="num" id="LN103">103</td><td class="line">  u2 descriptor_cp_index;</td></tr>
<tr class="codeline" data-linenumber="104"><td class="num" id="LN104">104</td><td class="line">  u2 signature_cp_index;</td></tr>
<tr class="codeline" data-linenumber="105"><td class="num" id="LN105">105</td><td class="line">  u2 slot;</td></tr>
<tr class="codeline" data-linenumber="106"><td class="num" id="LN106">106</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="107"><td class="num" id="LN107">107</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="108"><td class="num" id="LN108">108</td><td class="line"><span class='comment'>// Utility class describing elements in exception table</span></td></tr>
<tr class="codeline" data-linenumber="109"><td class="num" id="LN109">109</td><td class="line"><span class='keyword'>class</span> ExceptionTableElement {</td></tr>
<tr class="codeline" data-linenumber="110"><td class="num" id="LN110">110</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="111"><td class="num" id="LN111">111</td><td class="line">  u2 start_pc;</td></tr>
<tr class="codeline" data-linenumber="112"><td class="num" id="LN112">112</td><td class="line">  u2 end_pc;</td></tr>
<tr class="codeline" data-linenumber="113"><td class="num" id="LN113">113</td><td class="line">  u2 handler_pc;</td></tr>
<tr class="codeline" data-linenumber="114"><td class="num" id="LN114">114</td><td class="line">  u2 catch_type_index;</td></tr>
<tr class="codeline" data-linenumber="115"><td class="num" id="LN115">115</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="116"><td class="num" id="LN116">116</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="117"><td class="num" id="LN117">117</td><td class="line"><span class='comment'>// Utility class describing elements in method parameters</span></td></tr>
<tr class="codeline" data-linenumber="118"><td class="num" id="LN118">118</td><td class="line"><span class='keyword'>class</span> MethodParametersElement {</td></tr>
<tr class="codeline" data-linenumber="119"><td class="num" id="LN119">119</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="120"><td class="num" id="LN120">120</td><td class="line">  u2 name_cp_index;</td></tr>
<tr class="codeline" data-linenumber="121"><td class="num" id="LN121">121</td><td class="line">  u2 flags;</td></tr>
<tr class="codeline" data-linenumber="122"><td class="num" id="LN122">122</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="123"><td class="num" id="LN123">123</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="124"><td class="num" id="LN124">124</td><td class="line"><span class='comment'>// Class to collect the sizes of ConstMethod inline tables</span></td></tr>
<tr class="codeline" data-linenumber="125"><td class="num" id="LN125">125</td><td class="line"><span class='directive'>#define <span class='macro'>INLINE_TABLES_DO(do_element)<span class='macro_popup'>do_element(localvariable_table_length) do_element(compressed_linenumber_size<br>) do_element(exception_table_length) do_element(checked_exceptions_length<br>) do_element(method_parameters_length) do_element(generic_signature_index<br>) do_element(method_annotations_length) do_element(parameter_annotations_length<br>) do_element(type_annotations_length) do_element(default_annotations_length<br>)</span></span>            \</span></td></tr>
<tr class="codeline" data-linenumber="126"><td class="num" id="LN126">126</td><td class="line">  <span class='directive'>do_element(localvariable_table_length)        \</span></td></tr>
<tr class="codeline" data-linenumber="127"><td class="num" id="LN127">127</td><td class="line">  <span class='directive'>do_element(compressed_linenumber_size)        \</span></td></tr>
<tr class="codeline" data-linenumber="128"><td class="num" id="LN128">128</td><td class="line">  <span class='directive'>do_element(exception_table_length)            \</span></td></tr>
<tr class="codeline" data-linenumber="129"><td class="num" id="LN129">129</td><td class="line">  <span class='directive'>do_element(checked_exceptions_length)         \</span></td></tr>
<tr class="codeline" data-linenumber="130"><td class="num" id="LN130">130</td><td class="line">  <span class='directive'>do_element(method_parameters_length)          \</span></td></tr>
<tr class="codeline" data-linenumber="131"><td class="num" id="LN131">131</td><td class="line">  <span class='directive'>do_element(generic_signature_index)           \</span></td></tr>
<tr class="codeline" data-linenumber="132"><td class="num" id="LN132">132</td><td class="line">  <span class='directive'>do_element(method_annotations_length)         \</span></td></tr>
<tr class="codeline" data-linenumber="133"><td class="num" id="LN133">133</td><td class="line">  <span class='directive'>do_element(parameter_annotations_length)      \</span></td></tr>
<tr class="codeline" data-linenumber="134"><td class="num" id="LN134">134</td><td class="line">  <span class='directive'>do_element(type_annotations_length)           \</span></td></tr>
<tr class="codeline" data-linenumber="135"><td class="num" id="LN135">135</td><td class="line">  <span class='directive'>do_element(default_annotations_length)</span></td></tr>
<tr class="codeline" data-linenumber="136"><td class="num" id="LN136">136</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="137"><td class="num" id="LN137">137</td><td class="line"><span class='directive'>#define INLINE_TABLE_DECLARE(sym)    int _##sym;</span></td></tr>
<tr class="codeline" data-linenumber="138"><td class="num" id="LN138">138</td><td class="line"><span class='directive'>#define INLINE_TABLE_PARAM(sym)      int sym,</span></td></tr>
<tr class="codeline" data-linenumber="139"><td class="num" id="LN139">139</td><td class="line"><span class='directive'>#define INLINE_TABLE_INIT(sym)       _##sym(sym),</span></td></tr>
<tr class="codeline" data-linenumber="140"><td class="num" id="LN140">140</td><td class="line"><span class='directive'>#define INLINE_TABLE_NULL(sym)       _##sym(0),</span></td></tr>
<tr class="codeline" data-linenumber="141"><td class="num" id="LN141">141</td><td class="line"><span class='directive'>#define INLINE_TABLE_ACCESSOR(sym)   int sym() const { return _##sym; }</span></td></tr>
<tr class="codeline" data-linenumber="142"><td class="num" id="LN142">142</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="143"><td class="num" id="LN143">143</td><td class="line"><span class='keyword'>class</span> InlineTableSizes : StackObj {</td></tr>
<tr class="codeline" data-linenumber="144"><td class="num" id="LN144">144</td><td class="line">  <span class='comment'>// declarations</span></td></tr>
<tr class="codeline" data-linenumber="145"><td class="num" id="LN145">145</td><td class="line">  <span class='macro'>INLINE_TABLES_DO(INLINE_TABLE_DECLARE)<span class='macro_popup'>INLINE_TABLE_DECLARE(localvariable_table_length) INLINE_TABLE_DECLARE<br>(compressed_linenumber_size) INLINE_TABLE_DECLARE(exception_table_length<br>) INLINE_TABLE_DECLARE(checked_exceptions_length) INLINE_TABLE_DECLARE<br>(method_parameters_length) INLINE_TABLE_DECLARE(generic_signature_index<br>) INLINE_TABLE_DECLARE(method_annotations_length) INLINE_TABLE_DECLARE<br>(parameter_annotations_length) INLINE_TABLE_DECLARE(type_annotations_length<br>) INLINE_TABLE_DECLARE(default_annotations_length)</span></span></td></tr>
<tr class="codeline" data-linenumber="146"><td class="num" id="LN146">146</td><td class="line">  <span class='keyword'>int</span> _end;</td></tr>
<tr class="codeline" data-linenumber="147"><td class="num" id="LN147">147</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="148"><td class="num" id="LN148">148</td><td class="line">  InlineTableSizes(</td></tr>
<tr class="codeline" data-linenumber="149"><td class="num" id="LN149">149</td><td class="line">      <span class='macro'>INLINE_TABLES_DO(INLINE_TABLE_PARAM)<span class='macro_popup'>INLINE_TABLE_PARAM(localvariable_table_length) INLINE_TABLE_PARAM<br>(compressed_linenumber_size) INLINE_TABLE_PARAM(exception_table_length<br>) INLINE_TABLE_PARAM(checked_exceptions_length) INLINE_TABLE_PARAM<br>(method_parameters_length) INLINE_TABLE_PARAM(generic_signature_index<br>) INLINE_TABLE_PARAM(method_annotations_length) INLINE_TABLE_PARAM<br>(parameter_annotations_length) INLINE_TABLE_PARAM(type_annotations_length<br>) INLINE_TABLE_PARAM(default_annotations_length)</span></span></td></tr>
<tr class="codeline" data-linenumber="150"><td class="num" id="LN150">150</td><td class="line">      <span class='keyword'>int</span> end) :</td></tr>
<tr class="codeline" data-linenumber="151"><td class="num" id="LN151">151</td><td class="line">      <span class='macro'>INLINE_TABLES_DO(INLINE_TABLE_INIT)<span class='macro_popup'>INLINE_TABLE_INIT(localvariable_table_length) INLINE_TABLE_INIT<br>(compressed_linenumber_size) INLINE_TABLE_INIT(exception_table_length<br>) INLINE_TABLE_INIT(checked_exceptions_length) INLINE_TABLE_INIT<br>(method_parameters_length) INLINE_TABLE_INIT(generic_signature_index<br>) INLINE_TABLE_INIT(method_annotations_length) INLINE_TABLE_INIT<br>(parameter_annotations_length) INLINE_TABLE_INIT(type_annotations_length<br>) INLINE_TABLE_INIT(default_annotations_length)</span></span></td></tr>
<tr class="codeline" data-linenumber="152"><td class="num" id="LN152">152</td><td class="line">      _end(end) {}</td></tr>
<tr class="codeline" data-linenumber="153"><td class="num" id="LN153">153</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="154"><td class="num" id="LN154">154</td><td class="line">  <span class='comment'>// Default constructor for no inlined tables</span></td></tr>
<tr class="codeline" data-linenumber="155"><td class="num" id="LN155">155</td><td class="line">  InlineTableSizes() :</td></tr>
<tr class="codeline" data-linenumber="156"><td class="num" id="LN156">156</td><td class="line">      <span class='macro'>INLINE_TABLES_DO(INLINE_TABLE_NULL)<span class='macro_popup'>INLINE_TABLE_NULL(localvariable_table_length) INLINE_TABLE_NULL<br>(compressed_linenumber_size) INLINE_TABLE_NULL(exception_table_length<br>) INLINE_TABLE_NULL(checked_exceptions_length) INLINE_TABLE_NULL<br>(method_parameters_length) INLINE_TABLE_NULL(generic_signature_index<br>) INLINE_TABLE_NULL(method_annotations_length) INLINE_TABLE_NULL<br>(parameter_annotations_length) INLINE_TABLE_NULL(type_annotations_length<br>) INLINE_TABLE_NULL(default_annotations_length)</span></span></td></tr>
<tr class="codeline" data-linenumber="157"><td class="num" id="LN157">157</td><td class="line">      _end(0) {}</td></tr>
<tr class="codeline" data-linenumber="158"><td class="num" id="LN158">158</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="159"><td class="num" id="LN159">159</td><td class="line">  <span class='comment'>// Accessors</span></td></tr>
<tr class="codeline" data-linenumber="160"><td class="num" id="LN160">160</td><td class="line">  <span class='macro'>INLINE_TABLES_DO(INLINE_TABLE_ACCESSOR)<span class='macro_popup'>INLINE_TABLE_ACCESSOR(localvariable_table_length) INLINE_TABLE_ACCESSOR<br>(compressed_linenumber_size) INLINE_TABLE_ACCESSOR(exception_table_length<br>) INLINE_TABLE_ACCESSOR(checked_exceptions_length) INLINE_TABLE_ACCESSOR<br>(method_parameters_length) INLINE_TABLE_ACCESSOR(generic_signature_index<br>) INLINE_TABLE_ACCESSOR(method_annotations_length) INLINE_TABLE_ACCESSOR<br>(parameter_annotations_length) INLINE_TABLE_ACCESSOR(type_annotations_length<br>) INLINE_TABLE_ACCESSOR(default_annotations_length)</span></span></td></tr>
<tr class="codeline" data-linenumber="161"><td class="num" id="LN161">161</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="162"><td class="num" id="LN162">162</td><td class="line"><span class='directive'>#undef INLINE_TABLE_ACCESSOR</span></td></tr>
<tr class="codeline" data-linenumber="163"><td class="num" id="LN163">163</td><td class="line"><span class='directive'>#undef INLINE_TABLE_NULL</span></td></tr>
<tr class="codeline" data-linenumber="164"><td class="num" id="LN164">164</td><td class="line"><span class='directive'>#undef INLINE_TABLE_INIT</span></td></tr>
<tr class="codeline" data-linenumber="165"><td class="num" id="LN165">165</td><td class="line"><span class='directive'>#undef INLINE_TABLE_PARAM</span></td></tr>
<tr class="codeline" data-linenumber="166"><td class="num" id="LN166">166</td><td class="line"><span class='directive'>#undef INLINE_TABLE_DECLARE</span></td></tr>
<tr class="codeline" data-linenumber="167"><td class="num" id="LN167">167</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="168"><td class="num" id="LN168">168</td><td class="line"><span class='keyword'>class</span> ConstMethod : <span class='keyword'>public</span> MetaspaceObj {</td></tr>
<tr class="codeline" data-linenumber="169"><td class="num" id="LN169">169</td><td class="line">  <span class='keyword'>friend</span> <span class='keyword'>class</span> VMStructs;</td></tr>
<tr class="codeline" data-linenumber="170"><td class="num" id="LN170">170</td><td class="line">  <span class='keyword'>friend</span> <span class='keyword'>class</span> JVMCIVMStructs;</td></tr>
<tr class="codeline" data-linenumber="171"><td class="num" id="LN171">171</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="172"><td class="num" id="LN172">172</td><td class="line"><span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="173"><td class="num" id="LN173">173</td><td class="line">  <span class='keyword'>typedef</span> <span class='keyword'>enum</span> { NORMAL, OVERPASS } MethodType;</td></tr>
<tr class="codeline" data-linenumber="174"><td class="num" id="LN174">174</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="175"><td class="num" id="LN175">175</td><td class="line"><span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="176"><td class="num" id="LN176">176</td><td class="line">  <span class='keyword'>enum</span> {</td></tr>
<tr class="codeline" data-linenumber="177"><td class="num" id="LN177">177</td><td class="line">    _has_linenumber_table = 0x0001,</td></tr>
<tr class="codeline" data-linenumber="178"><td class="num" id="LN178">178</td><td class="line">    _has_checked_exceptions = 0x0002,</td></tr>
<tr class="codeline" data-linenumber="179"><td class="num" id="LN179">179</td><td class="line">    _has_localvariable_table = 0x0004,</td></tr>
<tr class="codeline" data-linenumber="180"><td class="num" id="LN180">180</td><td class="line">    _has_exception_table = 0x0008,</td></tr>
<tr class="codeline" data-linenumber="181"><td class="num" id="LN181">181</td><td class="line">    _has_generic_signature = 0x0010,</td></tr>
<tr class="codeline" data-linenumber="182"><td class="num" id="LN182">182</td><td class="line">    _has_method_parameters = 0x0020,</td></tr>
<tr class="codeline" data-linenumber="183"><td class="num" id="LN183">183</td><td class="line">    _is_overpass = 0x0040,</td></tr>
<tr class="codeline" data-linenumber="184"><td class="num" id="LN184">184</td><td class="line">    _has_method_annotations = 0x0080,</td></tr>
<tr class="codeline" data-linenumber="185"><td class="num" id="LN185">185</td><td class="line">    _has_parameter_annotations = 0x0100,</td></tr>
<tr class="codeline" data-linenumber="186"><td class="num" id="LN186">186</td><td class="line">    _has_type_annotations = 0x0200,</td></tr>
<tr class="codeline" data-linenumber="187"><td class="num" id="LN187">187</td><td class="line">    _has_default_annotations = 0x0400</td></tr>
<tr class="codeline" data-linenumber="188"><td class="num" id="LN188">188</td><td class="line">  };</td></tr>
<tr class="codeline" data-linenumber="189"><td class="num" id="LN189">189</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="190"><td class="num" id="LN190">190</td><td class="line">  <span class='comment'>// Bit vector of signature</span></td></tr>
<tr class="codeline" data-linenumber="191"><td class="num" id="LN191">191</td><td class="line">  <span class='comment'>// Callers interpret 0=not initialized yet and</span></td></tr>
<tr class="codeline" data-linenumber="192"><td class="num" id="LN192">192</td><td class="line">  <span class='comment'>// -1=too many args to fix, must parse the slow way.</span></td></tr>
<tr class="codeline" data-linenumber="193"><td class="num" id="LN193">193</td><td class="line">  <span class='comment'>// The real initial value is special to account for nonatomicity of 64 bit</span></td></tr>
<tr class="codeline" data-linenumber="194"><td class="num" id="LN194">194</td><td class="line">  <span class='comment'>// loads and stores.  This value may updated and read without a lock by</span></td></tr>
<tr class="codeline" data-linenumber="195"><td class="num" id="LN195">195</td><td class="line">  <span class='comment'>// multiple threads, so is volatile.</span></td></tr>
<tr class="codeline" data-linenumber="196"><td class="num" id="LN196">196</td><td class="line">  <span class='keyword'>volatile</span> uint64_t _fingerprint;</td></tr>
<tr class="codeline" data-linenumber="197"><td class="num" id="LN197">197</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="198"><td class="num" id="LN198">198</td><td class="line">  <span class='comment'>// If you add a new field that points to any metaspace object, you</span></td></tr>
<tr class="codeline" data-linenumber="199"><td class="num" id="LN199">199</td><td class="line">  <span class='comment'>// must add this field to ConstMethod::metaspace_pointers_do().</span></td></tr>
<tr class="codeline" data-linenumber="200"><td class="num" id="LN200">200</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="201"><td class="num" id="LN201">201</td><td class="line">  ConstantPool*     _constants;                  <span class='comment'>// Constant pool</span></td></tr>
<tr class="codeline" data-linenumber="202"><td class="num" id="LN202">202</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="203"><td class="num" id="LN203">203</td><td class="line">  <span class='comment'>// Raw stackmap data for the method</span></td></tr>
<tr class="codeline" data-linenumber="204"><td class="num" id="LN204">204</td><td class="line">  Array&lt;u1&gt;*        _stackmap_data;</td></tr>
<tr class="codeline" data-linenumber="205"><td class="num" id="LN205">205</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="206"><td class="num" id="LN206">206</td><td class="line">  <span class='keyword'>int</span>               _constMethod_size;</td></tr>
<tr class="codeline" data-linenumber="207"><td class="num" id="LN207">207</td><td class="line">  u2                _flags;</td></tr>
<tr class="codeline" data-linenumber="208"><td class="num" id="LN208">208</td><td class="line">  u1                _result_type;                 <span class='comment'>// BasicType of result</span></td></tr>
<tr class="codeline" data-linenumber="209"><td class="num" id="LN209">209</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="210"><td class="num" id="LN210">210</td><td class="line">  <span class='comment'>// Size of Java bytecodes allocated immediately after Method*.</span></td></tr>
<tr class="codeline" data-linenumber="211"><td class="num" id="LN211">211</td><td class="line">  u2                _code_size;</td></tr>
<tr class="codeline" data-linenumber="212"><td class="num" id="LN212">212</td><td class="line">  u2                _name_index;                 <span class='comment'>// Method name (index in constant pool)</span></td></tr>
<tr class="codeline" data-linenumber="213"><td class="num" id="LN213">213</td><td class="line">  u2                _signature_index;            <span class='comment'>// Method signature (index in constant pool)</span></td></tr>
<tr class="codeline" data-linenumber="214"><td class="num" id="LN214">214</td><td class="line">  u2                _method_idnum;               <span class='comment'>// unique identification number for the method within the class</span></td></tr>
<tr class="codeline" data-linenumber="215"><td class="num" id="LN215">215</td><td class="line">                                                 <span class='comment'>// initially corresponds to the index into the methods array.</span></td></tr>
<tr class="codeline" data-linenumber="216"><td class="num" id="LN216">216</td><td class="line">                                                 <span class='comment'>// but this may change with redefinition</span></td></tr>
<tr class="codeline" data-linenumber="217"><td class="num" id="LN217">217</td><td class="line">  u2                _max_stack;                  <span class='comment'>// Maximum number of entries on the expression stack</span></td></tr>
<tr class="codeline" data-linenumber="218"><td class="num" id="LN218">218</td><td class="line">  u2                _max_locals;                 <span class='comment'>// Number of local variables used by this method</span></td></tr>
<tr class="codeline" data-linenumber="219"><td class="num" id="LN219">219</td><td class="line">  u2                _size_of_parameters;         <span class='comment'>// size of the parameter block (receiver + arguments) in words</span></td></tr>
<tr class="codeline" data-linenumber="220"><td class="num" id="LN220">220</td><td class="line">  u2                _orig_method_idnum;          <span class='comment'>// Original unique identification number for the method</span></td></tr>
<tr class="codeline" data-linenumber="221"><td class="num" id="LN221">221</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="222"><td class="num" id="LN222">222</td><td class="line">  <span class='comment'>// Constructor</span></td></tr>
<tr class="codeline" data-linenumber="223"><td class="num" id="LN223">223</td><td class="line">  ConstMethod(<span class='keyword'>int</span> byte_code_size,</td></tr>
<tr class="codeline" data-linenumber="224"><td class="num" id="LN224">224</td><td class="line">              InlineTableSizes* sizes,</td></tr>
<tr class="codeline" data-linenumber="225"><td class="num" id="LN225">225</td><td class="line">              MethodType is_overpass,</td></tr>
<tr class="codeline" data-linenumber="226"><td class="num" id="LN226">226</td><td class="line">              <span class='keyword'>int</span> size);</td></tr>
<tr class="codeline" data-linenumber="227"><td class="num" id="LN227">227</td><td class="line"><span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="228"><td class="num" id="LN228">228</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="229"><td class="num" id="LN229">229</td><td class="line">  <span class='keyword'>static</span> ConstMethod* allocate(ClassLoaderData* loader_data,</td></tr>
<tr class="codeline" data-linenumber="230"><td class="num" id="LN230">230</td><td class="line">                               <span class='keyword'>int</span> byte_code_size,</td></tr>
<tr class="codeline" data-linenumber="231"><td class="num" id="LN231">231</td><td class="line">                               InlineTableSizes* sizes,</td></tr>
<tr class="codeline" data-linenumber="232"><td class="num" id="LN232">232</td><td class="line">                               MethodType mt,</td></tr>
<tr class="codeline" data-linenumber="233"><td class="num" id="LN233">233</td><td class="line">                               <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="234"><td class="num" id="LN234">234</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="235"><td class="num" id="LN235">235</td><td class="line">  <span class='comment'>// Inlined tables</span></td></tr>
<tr class="codeline" data-linenumber="236"><td class="num" id="LN236">236</td><td class="line">  <span class='keyword'>void</span> set_inlined_tables_length(InlineTableSizes* sizes);</td></tr>
<tr class="codeline" data-linenumber="237"><td class="num" id="LN237">237</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="238"><td class="num" id="LN238">238</td><td class="line">  <span class='keyword'>bool</span> has_generic_signature() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="239"><td class="num" id="LN239">239</td><td class="line">    { <span class='keyword'>return</span> (_flags &amp; _has_generic_signature) != 0; }</td></tr>
<tr class="codeline" data-linenumber="240"><td class="num" id="LN240">240</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="241"><td class="num" id="LN241">241</td><td class="line">  <span class='keyword'>bool</span> has_linenumber_table() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="242"><td class="num" id="LN242">242</td><td class="line">    { <span class='keyword'>return</span> (_flags &amp; _has_linenumber_table) != 0; }</td></tr>
<tr class="codeline" data-linenumber="243"><td class="num" id="LN243">243</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="244"><td class="num" id="LN244">244</td><td class="line">  <span class='keyword'>bool</span> has_checked_exceptions() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="245"><td class="num" id="LN245">245</td><td class="line">    { <span class='keyword'>return</span> (_flags &amp; _has_checked_exceptions) != 0; }</td></tr>
<tr class="codeline" data-linenumber="246"><td class="num" id="LN246">246</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="247"><td class="num" id="LN247">247</td><td class="line">  <span class='keyword'>bool</span> has_localvariable_table() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="248"><td class="num" id="LN248">248</td><td class="line">    { <span class='keyword'>return</span> (_flags &amp; _has_localvariable_table) != 0; }</td></tr>
<tr class="codeline" data-linenumber="249"><td class="num" id="LN249">249</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="250"><td class="num" id="LN250">250</td><td class="line">  <span class='keyword'>bool</span> has_exception_handler() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="251"><td class="num" id="LN251">251</td><td class="line">    { <span class='keyword'>return</span> (_flags &amp; _has_exception_table) != 0; }</td></tr>
<tr class="codeline" data-linenumber="252"><td class="num" id="LN252">252</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="253"><td class="num" id="LN253">253</td><td class="line">  <span class='keyword'>bool</span> has_method_parameters() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="254"><td class="num" id="LN254">254</td><td class="line">    { <span class='keyword'>return</span> (_flags &amp; _has_method_parameters) != 0; }</td></tr>
<tr class="codeline" data-linenumber="255"><td class="num" id="LN255">255</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="256"><td class="num" id="LN256">256</td><td class="line">  MethodType method_type() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="257"><td class="num" id="LN257">257</td><td class="line">    <span class='keyword'>return</span> ((_flags &amp; _is_overpass) == 0) ? NORMAL : OVERPASS;</td></tr>
<tr class="codeline" data-linenumber="258"><td class="num" id="LN258">258</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="259"><td class="num" id="LN259">259</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="260"><td class="num" id="LN260">260</td><td class="line">  <span class='keyword'>void</span> set_method_type(MethodType mt) {</td></tr>
<tr class="codeline" data-linenumber="261"><td class="num" id="LN261">261</td><td class="line">    <span class='keyword'>if</span> (mt == NORMAL) {</td></tr>
<tr class="codeline" data-linenumber="262"><td class="num" id="LN262">262</td><td class="line">      _flags &amp;= ~(_is_overpass);</td></tr>
<tr class="codeline" data-linenumber="263"><td class="num" id="LN263">263</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="264"><td class="num" id="LN264">264</td><td class="line">      _flags |= _is_overpass;</td></tr>
<tr class="codeline" data-linenumber="265"><td class="num" id="LN265">265</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="266"><td class="num" id="LN266">266</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="267"><td class="num" id="LN267">267</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="268"><td class="num" id="LN268">268</td><td class="line">  <span class='comment'>// constant pool</span></td></tr>
<tr class="codeline" data-linenumber="269"><td class="num" id="LN269">269</td><td class="line">  ConstantPool* constants() <span class='keyword'>const</span>        { <span class='keyword'>return</span> _constants; }</td></tr>
<tr class="codeline" data-linenumber="270"><td class="num" id="LN270">270</td><td class="line">  <span class='keyword'>void</span> set_constants(ConstantPool* c)    { _constants = c; }</td></tr>
<tr class="codeline" data-linenumber="271"><td class="num" id="LN271">271</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="272"><td class="num" id="LN272">272</td><td class="line">  Method* method() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="273"><td class="num" id="LN273">273</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="274"><td class="num" id="LN274">274</td><td class="line">  <span class='comment'>// stackmap table data</span></td></tr>
<tr class="codeline" data-linenumber="275"><td class="num" id="LN275">275</td><td class="line">  Array&lt;u1&gt;* stackmap_data() <span class='keyword'>const</span> { <span class='keyword'>return</span> _stackmap_data; }</td></tr>
<tr class="codeline" data-linenumber="276"><td class="num" id="LN276">276</td><td class="line">  <span class='keyword'>void</span> set_stackmap_data(Array&lt;u1&gt;* sd) { _stackmap_data = sd; }</td></tr>
<tr class="codeline" data-linenumber="277"><td class="num" id="LN277">277</td><td class="line">  <span class='keyword'>void</span> copy_stackmap_data(ClassLoaderData* loader_data, u1* sd, <span class='keyword'>int</span> length, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="278"><td class="num" id="LN278">278</td><td class="line">  <span class='keyword'>bool</span> has_stackmap_table() <span class='keyword'>const</span> { <span class='keyword'>return</span> _stackmap_data != <span class='macro'>NULL<span class='macro_popup'>__null</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="279"><td class="num" id="LN279">279</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="280"><td class="num" id="LN280">280</td><td class="line">  <span class='keyword'>void</span> init_fingerprint() {</td></tr>
<tr class="codeline" data-linenumber="281"><td class="num" id="LN281">281</td><td class="line">    <span class='keyword'>const</span> uint64_t initval = <span class='macro'>UCONST64(0x8000000000000000)<span class='macro_popup'>(0x8000000000000000ULL)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="282"><td class="num" id="LN282">282</td><td class="line">    _fingerprint = initval;</td></tr>
<tr class="codeline" data-linenumber="283"><td class="num" id="LN283">283</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="284"><td class="num" id="LN284">284</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="285"><td class="num" id="LN285">285</td><td class="line">  uint64_t fingerprint() <span class='keyword'>const</span>                   {</td></tr>
<tr class="codeline" data-linenumber="286"><td class="num" id="LN286">286</td><td class="line">    <span class='comment'>// Since reads aren't atomic for 64 bits, if any of the high or low order</span></td></tr>
<tr class="codeline" data-linenumber="287"><td class="num" id="LN287">287</td><td class="line">    <span class='comment'>// word is the initial value, return 0.  See init_fingerprint for initval.</span></td></tr>
<tr class="codeline" data-linenumber="288"><td class="num" id="LN288">288</td><td class="line">    uint high_fp = (uint)(_fingerprint &gt;&gt; 32);</td></tr>
<tr class="codeline" data-linenumber="289"><td class="num" id="LN289">289</td><td class="line">    <span class='keyword'>if</span> ((<span class='keyword'>int</span>) _fingerprint == 0 || high_fp == 0x80000000) {</td></tr>
<tr class="codeline" data-linenumber="290"><td class="num" id="LN290">290</td><td class="line">      <span class='keyword'>return</span> 0L;</td></tr>
<tr class="codeline" data-linenumber="291"><td class="num" id="LN291">291</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="292"><td class="num" id="LN292">292</td><td class="line">      <span class='keyword'>return</span> _fingerprint;</td></tr>
<tr class="codeline" data-linenumber="293"><td class="num" id="LN293">293</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="294"><td class="num" id="LN294">294</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="295"><td class="num" id="LN295">295</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="296"><td class="num" id="LN296">296</td><td class="line">  uint64_t set_fingerprint(uint64_t new_fingerprint) {</td></tr>
<tr class="codeline" data-linenumber="297"><td class="num" id="LN297">297</td><td class="line"><span class='directive'>#ifdef <span class='macro'>ASSERT<span class='macro_popup'>1</span></span></span></td></tr>
<tr class="codeline" data-linenumber="298"><td class="num" id="LN298">298</td><td class="line">    <span class='comment'>// Assert only valid if complete/valid 64 bit _fingerprint value is read.</span></td></tr>
<tr class="codeline" data-linenumber="299"><td class="num" id="LN299">299</td><td class="line">    uint64_t oldfp = fingerprint();</td></tr>
<tr class="codeline" data-linenumber="300"><td class="num" id="LN300">300</td><td class="line"><span class='directive'>#endif // ASSERT</span></td></tr>
<tr class="codeline" data-linenumber="301"><td class="num" id="LN301">301</td><td class="line">    _fingerprint = new_fingerprint;</td></tr>
<tr class="codeline" data-linenumber="302"><td class="num" id="LN302">302</td><td class="line">    <span class='macro'>assert(oldfp == 0L || new_fingerprint == oldfp,<span class='macro_popup'>do { if (!(oldfp == 0L || new_fingerprint == oldfp)) { (*g_assert_poison<br>) = 'X';; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/constMethod.hpp"<br>, 303, "assert(" "oldfp == 0L || new_fingerprint == oldfp" ") failed"<br>, "fingerprint cannot change"); ::breakpoint(); } } while (0)</span></span></td></tr>
<tr class="codeline" data-linenumber="303"><td class="num" id="LN303">303</td><td class="line">           <span class='string_literal'><span class='macro'>"fingerprint cannot change"</span>)<span class='macro_popup'>do { if (!(oldfp == 0L || new_fingerprint == oldfp)) { (*g_assert_poison<br>) = 'X';; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/constMethod.hpp"<br>, 303, "assert(" "oldfp == 0L || new_fingerprint == oldfp" ") failed"<br>, "fingerprint cannot change"); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="304"><td class="num" id="LN304">304</td><td class="line">    <span class='macro'>assert(((new_fingerprint &gt;&gt; 32) != 0x80000000) &amp;&amp; (<span class='keyword'>int</span>)new_fingerprint !=0,<span class='macro_popup'>do { if (!(((new_fingerprint &gt;&gt; 32) != 0x80000000) &amp;&amp;<br> (int)new_fingerprint !=0)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/constMethod.hpp"<br>, 305, "assert(" "((new_fingerprint &gt;&gt; 32) != 0x80000000) &amp;&amp; (int)new_fingerprint !=0"<br> ") failed", "fingerprint should call init to set initial value"<br>); ::breakpoint(); } } while (0)</span></span></td></tr>
<tr class="codeline" data-linenumber="305"><td class="num" id="LN305">305</td><td class="line">           <span class='string_literal'><span class='macro'>"fingerprint should call init to set initial value"</span>)<span class='macro_popup'>do { if (!(((new_fingerprint &gt;&gt; 32) != 0x80000000) &amp;&amp;<br> (int)new_fingerprint !=0)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/constMethod.hpp"<br>, 305, "assert(" "((new_fingerprint &gt;&gt; 32) != 0x80000000) &amp;&amp; (int)new_fingerprint !=0"<br> ") failed", "fingerprint should call init to set initial value"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="306"><td class="num" id="LN306">306</td><td class="line">    <span class='keyword'>return</span> new_fingerprint;</td></tr>
<tr class="codeline" data-linenumber="307"><td class="num" id="LN307">307</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="308"><td class="num" id="LN308">308</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="309"><td class="num" id="LN309">309</td><td class="line">  <span class='comment'>// name</span></td></tr>
<tr class="codeline" data-linenumber="310"><td class="num" id="LN310">310</td><td class="line">  <span class='keyword'>int</span> name_index() <span class='keyword'>const</span>                         { <span class='keyword'>return</span> _name_index; }</td></tr>
<tr class="codeline" data-linenumber="311"><td class="num" id="LN311">311</td><td class="line">  <span class='keyword'>void</span> set_name_index(<span class='keyword'>int</span> index)                 { _name_index = index; }</td></tr>
<tr class="codeline" data-linenumber="312"><td class="num" id="LN312">312</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="313"><td class="num" id="LN313">313</td><td class="line">  <span class='comment'>// signature</span></td></tr>
<tr class="codeline" data-linenumber="314"><td class="num" id="LN314">314</td><td class="line">  <span class='keyword'>int</span> signature_index() <span class='keyword'>const</span>                    { <span class='keyword'>return</span> _signature_index; }</td></tr>
<tr class="codeline" data-linenumber="315"><td class="num" id="LN315">315</td><td class="line">  <span class='keyword'>void</span> set_signature_index(<span class='keyword'>int</span> index)            { _signature_index = index; }</td></tr>
<tr class="codeline" data-linenumber="316"><td class="num" id="LN316">316</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="317"><td class="num" id="LN317">317</td><td class="line">  <span class='comment'>// generics support</span></td></tr>
<tr class="codeline" data-linenumber="318"><td class="num" id="LN318">318</td><td class="line">  <span class='keyword'>int</span> generic_signature_index() <span class='keyword'>const</span>            {</td></tr>
<tr class="codeline" data-linenumber="319"><td class="num" id="LN319">319</td><td class="line">    <span class='keyword'>if</span> (has_generic_signature()) {</td></tr>
<tr class="codeline" data-linenumber="320"><td class="num" id="LN320">320</td><td class="line">      <span class='keyword'>return</span> *generic_signature_index_addr();</td></tr>
<tr class="codeline" data-linenumber="321"><td class="num" id="LN321">321</td><td class="line">    } <span class='keyword'>else</span> {</td></tr>
<tr class="codeline" data-linenumber="322"><td class="num" id="LN322">322</td><td class="line">      <span class='keyword'>return</span> 0;</td></tr>
<tr class="codeline" data-linenumber="323"><td class="num" id="LN323">323</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="324"><td class="num" id="LN324">324</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="325"><td class="num" id="LN325">325</td><td class="line">  <span class='keyword'>void</span> set_generic_signature_index(u2 index)    {</td></tr>
<tr class="codeline" data-linenumber="326"><td class="num" id="LN326">326</td><td class="line">    <span class='macro'>assert(has_generic_signature(), <span class='string_literal'>""</span>)<span class='macro_popup'>do { if (!(has_generic_signature())) { (*g_assert_poison) = 'X'<br>;; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/constMethod.hpp"<br>, 326, "assert(" "has_generic_signature()" ") failed", ""); ::<br>breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="327"><td class="num" id="LN327">327</td><td class="line">    u2* addr = generic_signature_index_addr();</td></tr>
<tr class="codeline" data-linenumber="328"><td class="num" id="LN328">328</td><td class="line">    *addr = index;</td></tr>
<tr class="codeline" data-linenumber="329"><td class="num" id="LN329">329</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="330"><td class="num" id="LN330">330</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="331"><td class="num" id="LN331">331</td><td class="line">  <span class='comment'>// Sizing</span></td></tr>
<tr class="codeline" data-linenumber="332"><td class="num" id="LN332">332</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>int</span> header_size() {</td></tr>
<tr class="codeline" data-linenumber="333"><td class="num" id="LN333">333</td><td class="line">    <span class='keyword'>return</span> align_up((<span class='keyword'>int</span>)<span class='keyword'>sizeof</span>(ConstMethod), wordSize) / wordSize;</td></tr>
<tr class="codeline" data-linenumber="334"><td class="num" id="LN334">334</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="335"><td class="num" id="LN335">335</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="336"><td class="num" id="LN336">336</td><td class="line">  <span class='comment'>// Size needed</span></td></tr>
<tr class="codeline" data-linenumber="337"><td class="num" id="LN337">337</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>int</span> size(<span class='keyword'>int</span> code_size, InlineTableSizes* sizes);</td></tr>
<tr class="codeline" data-linenumber="338"><td class="num" id="LN338">338</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="339"><td class="num" id="LN339">339</td><td class="line">  <span class='keyword'>int</span> size() <span class='keyword'>const</span>                    { <span class='keyword'>return</span> _constMethod_size;}</td></tr>
<tr class="codeline" data-linenumber="340"><td class="num" id="LN340">340</td><td class="line">  <span class='keyword'>void</span> set_constMethod_size(<span class='keyword'>int</span> size)     { _constMethod_size = size; }</td></tr>
<tr class="codeline" data-linenumber="341"><td class="num" id="LN341">341</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="342"><td class="num" id="LN342">342</td><td class="line">  <span class='comment'>// ConstMethods should be stored in the read-only region of CDS archive.</span></td></tr>
<tr class="codeline" data-linenumber="343"><td class="num" id="LN343">343</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>bool</span> is_read_only_by_default() { <span class='keyword'>return</span> <span class='keyword'>true</span>; }</td></tr>
<tr class="codeline" data-linenumber="344"><td class="num" id="LN344">344</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="345"><td class="num" id="LN345">345</td><td class="line">  <span class='comment'>// code size</span></td></tr>
<tr class="codeline" data-linenumber="346"><td class="num" id="LN346">346</td><td class="line">  <span class='keyword'>int</span> code_size() <span class='keyword'>const</span>                          { <span class='keyword'>return</span> _code_size; }</td></tr>
<tr class="codeline" data-linenumber="347"><td class="num" id="LN347">347</td><td class="line">  <span class='keyword'>void</span> set_code_size(<span class='keyword'>int</span> size) {</td></tr>
<tr class="codeline" data-linenumber="348"><td class="num" id="LN348">348</td><td class="line">    <span class='macro'>assert(max_method_code_size &lt; (1 &lt;&lt; 16),<span class='macro_popup'>do { if (!(max_method_code_size &lt; (1 &lt;&lt; 16))) { (*g_assert_poison<br>) = 'X';; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/constMethod.hpp"<br>, 349, "assert(" "max_method_code_size &lt; (1 &lt;&lt; 16)" ") failed"<br>, "u2 is too small to hold method code size in general"); ::breakpoint<br>(); } } while (0)</span></span></td></tr>
<tr class="codeline" data-linenumber="349"><td class="num" id="LN349">349</td><td class="line">           <span class='string_literal'><span class='macro'>"u2 is too small to hold method code size in general"</span>)<span class='macro_popup'>do { if (!(max_method_code_size &lt; (1 &lt;&lt; 16))) { (*g_assert_poison<br>) = 'X';; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/constMethod.hpp"<br>, 349, "assert(" "max_method_code_size &lt; (1 &lt;&lt; 16)" ") failed"<br>, "u2 is too small to hold method code size in general"); ::breakpoint<br>(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="350"><td class="num" id="LN350">350</td><td class="line">    <span class='macro'>assert(0 &lt;= size &amp;&amp; size &lt;= max_method_code_size, <span class='string_literal'>"invalid code size"</span>)<span class='macro_popup'>do { if (!(0 &lt;= size &amp;&amp; size &lt;= max_method_code_size<br>)) { (*g_assert_poison) = 'X';; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/constMethod.hpp"<br>, 350, "assert(" "0 &lt;= size &amp;&amp; size &lt;= max_method_code_size"<br> ") failed", "invalid code size"); ::breakpoint(); } } while (<br>0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="351"><td class="num" id="LN351">351</td><td class="line">    _code_size = size;</td></tr>
<tr class="codeline" data-linenumber="352"><td class="num" id="LN352">352</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="353"><td class="num" id="LN353">353</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="354"><td class="num" id="LN354">354</td><td class="line">  <span class='comment'>// linenumber table - note that length is unknown until decompression,</span></td></tr>
<tr class="codeline" data-linenumber="355"><td class="num" id="LN355">355</td><td class="line">  <span class='comment'>// see class CompressedLineNumberReadStream.</span></td></tr>
<tr class="codeline" data-linenumber="356"><td class="num" id="LN356">356</td><td class="line">  u_char* compressed_linenumber_table() <span class='keyword'>const</span>;         <span class='comment'>// not preserved by gc</span></td></tr>
<tr class="codeline" data-linenumber="357"><td class="num" id="LN357">357</td><td class="line">  u2* generic_signature_index_addr() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="358"><td class="num" id="LN358">358</td><td class="line">  u2* checked_exceptions_length_addr() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="359"><td class="num" id="LN359">359</td><td class="line">  u2* localvariable_table_length_addr() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="360"><td class="num" id="LN360">360</td><td class="line">  u2* exception_table_length_addr() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="361"><td class="num" id="LN361">361</td><td class="line">  u2* method_parameters_length_addr() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="362"><td class="num" id="LN362">362</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="363"><td class="num" id="LN363">363</td><td class="line">  <span class='comment'>// checked exceptions</span></td></tr>
<tr class="codeline" data-linenumber="364"><td class="num" id="LN364">364</td><td class="line">  <span class='keyword'>int</span> checked_exceptions_length() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="365"><td class="num" id="LN365">365</td><td class="line">  CheckedExceptionElement* checked_exceptions_start() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="366"><td class="num" id="LN366">366</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="367"><td class="num" id="LN367">367</td><td class="line">  <span class='comment'>// localvariable table</span></td></tr>
<tr class="codeline" data-linenumber="368"><td class="num" id="LN368">368</td><td class="line">  <span class='keyword'>int</span> localvariable_table_length() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="369"><td class="num" id="LN369">369</td><td class="line">  LocalVariableTableElement* localvariable_table_start() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="370"><td class="num" id="LN370">370</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="371"><td class="num" id="LN371">371</td><td class="line">  <span class='comment'>// exception table</span></td></tr>
<tr class="codeline" data-linenumber="372"><td class="num" id="LN372">372</td><td class="line">  <span class='keyword'>int</span> exception_table_length() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="373"><td class="num" id="LN373">373</td><td class="line">  ExceptionTableElement* exception_table_start() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="374"><td class="num" id="LN374">374</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="375"><td class="num" id="LN375">375</td><td class="line">  <span class='comment'>// method parameters table</span></td></tr>
<tr class="codeline" data-linenumber="376"><td class="num" id="LN376">376</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="377"><td class="num" id="LN377">377</td><td class="line">  <span class='comment'>// This returns -1 if no parameters are present, a non-negative</span></td></tr>
<tr class="codeline" data-linenumber="378"><td class="num" id="LN378">378</td><td class="line">  <span class='comment'>// value otherwise.  Note: sometimes, there are 0-length parameters</span></td></tr>
<tr class="codeline" data-linenumber="379"><td class="num" id="LN379">379</td><td class="line">  <span class='comment'>// attributes that must be reported up to the reflection API all the</span></td></tr>
<tr class="codeline" data-linenumber="380"><td class="num" id="LN380">380</td><td class="line">  <span class='comment'>// same.</span></td></tr>
<tr class="codeline" data-linenumber="381"><td class="num" id="LN381">381</td><td class="line">  <span class='keyword'>int</span> method_parameters_length() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="382"><td class="num" id="LN382">382</td><td class="line">  MethodParametersElement* method_parameters_start() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="383"><td class="num" id="LN383">383</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="384"><td class="num" id="LN384">384</td><td class="line">  <span class='comment'>// method annotations</span></td></tr>
<tr class="codeline" data-linenumber="385"><td class="num" id="LN385">385</td><td class="line">  <span class='keyword'>bool</span> has_method_annotations() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="386"><td class="num" id="LN386">386</td><td class="line">    { <span class='keyword'>return</span> (_flags &amp; _has_method_annotations) != 0; }</td></tr>
<tr class="codeline" data-linenumber="387"><td class="num" id="LN387">387</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="388"><td class="num" id="LN388">388</td><td class="line">  <span class='keyword'>bool</span> has_parameter_annotations() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="389"><td class="num" id="LN389">389</td><td class="line">    { <span class='keyword'>return</span> (_flags &amp; _has_parameter_annotations) != 0; }</td></tr>
<tr class="codeline" data-linenumber="390"><td class="num" id="LN390">390</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="391"><td class="num" id="LN391">391</td><td class="line">  <span class='keyword'>bool</span> has_type_annotations() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="392"><td class="num" id="LN392">392</td><td class="line">    { <span class='keyword'>return</span> (_flags &amp; _has_type_annotations) != 0; }</td></tr>
<tr class="codeline" data-linenumber="393"><td class="num" id="LN393">393</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="394"><td class="num" id="LN394">394</td><td class="line">  <span class='keyword'>bool</span> has_default_annotations() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="395"><td class="num" id="LN395">395</td><td class="line">    { <span class='keyword'>return</span> (_flags &amp; _has_default_annotations) != 0; }</td></tr>
<tr class="codeline" data-linenumber="396"><td class="num" id="LN396">396</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="397"><td class="num" id="LN397">397</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="398"><td class="num" id="LN398">398</td><td class="line">  AnnotationArray** method_annotations_addr() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="399"><td class="num" id="LN399">399</td><td class="line">  AnnotationArray* method_annotations() <span class='keyword'>const</span>  {</td></tr>
<tr class="codeline" data-linenumber="400"><td class="num" id="LN400">400</td><td class="line">    <span class='keyword'>return</span> has_method_annotations() ? *(method_annotations_addr()) : <span class='macro'>NULL<span class='macro_popup'>__null</span></span>;</td></tr>
<tr class="codeline" data-linenumber="401"><td class="num" id="LN401">401</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="402"><td class="num" id="LN402">402</td><td class="line">  <span class='keyword'>void</span> set_method_annotations(AnnotationArray* anno) {</td></tr>
<tr class="codeline" data-linenumber="403"><td class="num" id="LN403">403</td><td class="line">    *(method_annotations_addr()) = anno;</td></tr>
<tr class="codeline" data-linenumber="404"><td class="num" id="LN404">404</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="405"><td class="num" id="LN405">405</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="406"><td class="num" id="LN406">406</td><td class="line">  AnnotationArray** parameter_annotations_addr() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="407"><td class="num" id="LN407">407</td><td class="line">  AnnotationArray* parameter_annotations() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="408"><td class="num" id="LN408">408</td><td class="line">    <span class='keyword'>return</span> has_parameter_annotations() ? *(parameter_annotations_addr()) : <span class='macro'>NULL<span class='macro_popup'>__null</span></span>;</td></tr>
<tr class="codeline" data-linenumber="409"><td class="num" id="LN409">409</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="410"><td class="num" id="LN410">410</td><td class="line">  <span class='keyword'>void</span> set_parameter_annotations(AnnotationArray* anno) {</td></tr>
<tr class="codeline" data-linenumber="411"><td class="num" id="LN411">411</td><td class="line">    *(parameter_annotations_addr()) = anno;</td></tr>
<tr class="codeline" data-linenumber="412"><td class="num" id="LN412">412</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="413"><td class="num" id="LN413">413</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="414"><td class="num" id="LN414">414</td><td class="line">  AnnotationArray** type_annotations_addr() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="415"><td class="num" id="LN415">415</td><td class="line">  AnnotationArray* type_annotations() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="416"><td class="num" id="LN416">416</td><td class="line">    <span class='keyword'>return</span> has_type_annotations() ? *(type_annotations_addr()) : <span class='macro'>NULL<span class='macro_popup'>__null</span></span>;</td></tr>
<tr class="codeline" data-linenumber="417"><td class="num" id="LN417">417</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="418"><td class="num" id="LN418">418</td><td class="line">  <span class='keyword'>void</span> set_type_annotations(AnnotationArray* anno) {</td></tr>
<tr class="codeline" data-linenumber="419"><td class="num" id="LN419">419</td><td class="line">    *(type_annotations_addr()) = anno;</td></tr>
<tr class="codeline" data-linenumber="420"><td class="num" id="LN420">420</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="421"><td class="num" id="LN421">421</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="422"><td class="num" id="LN422">422</td><td class="line">  AnnotationArray** default_annotations_addr() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="423"><td class="num" id="LN423">423</td><td class="line">  AnnotationArray* default_annotations() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="424"><td class="num" id="LN424">424</td><td class="line">    <span class='keyword'>return</span> has_default_annotations() ? *(default_annotations_addr()) : <span class='macro'>NULL<span class='macro_popup'>__null</span></span>;</td></tr>
<tr class="codeline" data-linenumber="425"><td class="num" id="LN425">425</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="426"><td class="num" id="LN426">426</td><td class="line">  <span class='keyword'>void</span> set_default_annotations(AnnotationArray* anno) {</td></tr>
<tr class="codeline" data-linenumber="427"><td class="num" id="LN427">427</td><td class="line">    *(default_annotations_addr()) = anno;</td></tr>
<tr class="codeline" data-linenumber="428"><td class="num" id="LN428">428</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="429"><td class="num" id="LN429">429</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="430"><td class="num" id="LN430">430</td><td class="line">  <span class='keyword'>int</span> method_annotations_length() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="431"><td class="num" id="LN431">431</td><td class="line">    <span class='keyword'>return</span> has_method_annotations() ? method_annotations()-&gt;length() : 0;</td></tr>
<tr class="codeline" data-linenumber="432"><td class="num" id="LN432">432</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="433"><td class="num" id="LN433">433</td><td class="line">  <span class='keyword'>int</span> parameter_annotations_length() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="434"><td class="num" id="LN434">434</td><td class="line">    <span class='keyword'>return</span> has_parameter_annotations() ? parameter_annotations()-&gt;length() : 0;</td></tr>
<tr class="codeline" data-linenumber="435"><td class="num" id="LN435">435</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="436"><td class="num" id="LN436">436</td><td class="line">  <span class='keyword'>int</span> type_annotations_length() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="437"><td class="num" id="LN437">437</td><td class="line">    <span class='keyword'>return</span> has_type_annotations() ? type_annotations()-&gt;length() : 0;</td></tr>
<tr class="codeline" data-linenumber="438"><td class="num" id="LN438">438</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="439"><td class="num" id="LN439">439</td><td class="line">  <span class='keyword'>int</span> default_annotations_length() <span class='keyword'>const</span> {</td></tr>
<tr class="codeline" data-linenumber="440"><td class="num" id="LN440">440</td><td class="line">    <span class='keyword'>return</span> has_default_annotations() ? default_annotations()-&gt;length() : 0;</td></tr>
<tr class="codeline" data-linenumber="441"><td class="num" id="LN441">441</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="442"><td class="num" id="LN442">442</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="443"><td class="num" id="LN443">443</td><td class="line">  <span class='comment'>// Copy annotations from other ConstMethod</span></td></tr>
<tr class="codeline" data-linenumber="444"><td class="num" id="LN444">444</td><td class="line">  <span class='keyword'>void</span> copy_annotations_from(ClassLoaderData* loader_data, ConstMethod* cm, <span class='macro'>TRAPS<span class='macro_popup'>JavaThread* __the_thread__</span></span>);</td></tr>
<tr class="codeline" data-linenumber="445"><td class="num" id="LN445">445</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="446"><td class="num" id="LN446">446</td><td class="line">  <span class='comment'>// byte codes</span></td></tr>
<tr class="codeline" data-linenumber="447"><td class="num" id="LN447">447</td><td class="line">  <span class='keyword'>void</span>    set_code(address code) {</td></tr>
<tr class="codeline" data-linenumber="448"><td class="num" id="LN448">448</td><td class="line">    <span class='keyword'>if</span> (<span class="mrange">code_size() &gt; 0</span>) {</td></tr>
<tr><td class="num"></td><td class="line"><div id="Path42" class="msg msgEvent" style="margin-left:9ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">42</div></td><td><div class="PathNav"><a href="#Path41" title="Previous event (41)">&#x2190;</a></div></td><td>Assuming the condition is true</td><td><div class="PathNav"><a href="#Path43" title="Next event (43)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr><td class="num"></td><td class="line"><div id="Path43" class="msg msgControl" style="margin-left:5ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexControl">43</div></td><td><div class="PathNav"><a href="#Path42" title="Previous event (42)">&#x2190;</a></div></td><td>Taking true branch</td><td><div class="PathNav"><a href="#EndPath" title="Next event (44)">&#x2192;</a></div></td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="449"><td class="num" id="LN449">449</td><td class="line">      memcpy(code_base(), <span class="mrange">code</span>, code_size());</td></tr>
<tr><td class="num"></td><td class="line"><div id="EndPath" class="msg msgEvent" style="margin-left:7ex"><table class="msgT"><tr><td valign="top"><div class="PathIndex PathIndexEvent">44</div></td><td><div class="PathNav"><a href="#Path43" title="Previous event (43)">&#x2190;</a></div></td><td>Null pointer passed to 2nd parameter expecting 'nonnull'</td></tr></table></div></td></tr>
<tr class="codeline" data-linenumber="450"><td class="num" id="LN450">450</td><td class="line">    }</td></tr>
<tr class="codeline" data-linenumber="451"><td class="num" id="LN451">451</td><td class="line">  }</td></tr>
<tr class="codeline" data-linenumber="452"><td class="num" id="LN452">452</td><td class="line">  address code_base() <span class='keyword'>const</span>            { <span class='keyword'>return</span> (address) (<span class='keyword'>this</span>+1); }</td></tr>
<tr class="codeline" data-linenumber="453"><td class="num" id="LN453">453</td><td class="line">  address code_end() <span class='keyword'>const</span>             { <span class='keyword'>return</span> code_base() + code_size(); }</td></tr>
<tr class="codeline" data-linenumber="454"><td class="num" id="LN454">454</td><td class="line">  <span class='keyword'>bool</span>    contains(address bcp) <span class='keyword'>const</span>  { <span class='keyword'>return</span> code_base() &lt;= bcp</td></tr>
<tr class="codeline" data-linenumber="455"><td class="num" id="LN455">455</td><td class="line">                                                     &amp;&amp; bcp &lt; code_end(); }</td></tr>
<tr class="codeline" data-linenumber="456"><td class="num" id="LN456">456</td><td class="line">  <span class='comment'>// Offset to bytecodes</span></td></tr>
<tr class="codeline" data-linenumber="457"><td class="num" id="LN457">457</td><td class="line">  <span class='keyword'>static</span> ByteSize codes_offset()</td></tr>
<tr class="codeline" data-linenumber="458"><td class="num" id="LN458">458</td><td class="line">                            { <span class='keyword'>return</span> in_ByteSize(<span class='keyword'>sizeof</span>(ConstMethod)); }</td></tr>
<tr class="codeline" data-linenumber="459"><td class="num" id="LN459">459</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="460"><td class="num" id="LN460">460</td><td class="line">  <span class='keyword'>static</span> ByteSize constants_offset()</td></tr>
<tr class="codeline" data-linenumber="461"><td class="num" id="LN461">461</td><td class="line">                            { <span class='keyword'>return</span> <span class='macro'>byte_offset_of(ConstMethod, _constants)<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((ConstMethod*)16)-&gt;<br>_constants) - 16))</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="462"><td class="num" id="LN462">462</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="463"><td class="num" id="LN463">463</td><td class="line">  <span class='keyword'>static</span> ByteSize max_stack_offset()</td></tr>
<tr class="codeline" data-linenumber="464"><td class="num" id="LN464">464</td><td class="line">                            { <span class='keyword'>return</span> <span class='macro'>byte_offset_of(ConstMethod, _max_stack)<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((ConstMethod*)16)-&gt;<br>_max_stack) - 16))</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="465"><td class="num" id="LN465">465</td><td class="line">  <span class='keyword'>static</span> ByteSize size_of_locals_offset()</td></tr>
<tr class="codeline" data-linenumber="466"><td class="num" id="LN466">466</td><td class="line">                            { <span class='keyword'>return</span> <span class='macro'>byte_offset_of(ConstMethod, _max_locals)<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((ConstMethod*)16)-&gt;<br>_max_locals) - 16))</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="467"><td class="num" id="LN467">467</td><td class="line">  <span class='keyword'>static</span> ByteSize size_of_parameters_offset()</td></tr>
<tr class="codeline" data-linenumber="468"><td class="num" id="LN468">468</td><td class="line">                            { <span class='keyword'>return</span> <span class='macro'>byte_offset_of(ConstMethod, _size_of_parameters)<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((ConstMethod*)16)-&gt;<br>_size_of_parameters) - 16))</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="469"><td class="num" id="LN469">469</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="470"><td class="num" id="LN470">470</td><td class="line">  <span class='keyword'>static</span> ByteSize result_type_offset()</td></tr>
<tr class="codeline" data-linenumber="471"><td class="num" id="LN471">471</td><td class="line">                            { <span class='keyword'>return</span> <span class='macro'>byte_offset_of(ConstMethod, _result_type)<span class='macro_popup'>in_ByteSize((int)(size_t)((intx)&amp;(((ConstMethod*)16)-&gt;<br>_result_type) - 16))</span></span>; }</td></tr>
<tr class="codeline" data-linenumber="472"><td class="num" id="LN472">472</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="473"><td class="num" id="LN473">473</td><td class="line">  <span class='comment'>// Unique id for the method</span></td></tr>
<tr class="codeline" data-linenumber="474"><td class="num" id="LN474">474</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>const</span> u2 MAX_IDNUM;</td></tr>
<tr class="codeline" data-linenumber="475"><td class="num" id="LN475">475</td><td class="line">  <span class='keyword'>static</span> <span class='keyword'>const</span> u2 UNSET_IDNUM;</td></tr>
<tr class="codeline" data-linenumber="476"><td class="num" id="LN476">476</td><td class="line">  u2 method_idnum() <span class='keyword'>const</span>                        { <span class='keyword'>return</span> _method_idnum; }</td></tr>
<tr class="codeline" data-linenumber="477"><td class="num" id="LN477">477</td><td class="line">  <span class='keyword'>void</span> set_method_idnum(u2 idnum)                { _method_idnum = idnum; }</td></tr>
<tr class="codeline" data-linenumber="478"><td class="num" id="LN478">478</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="479"><td class="num" id="LN479">479</td><td class="line">  u2 orig_method_idnum() <span class='keyword'>const</span>                   { <span class='keyword'>return</span> _orig_method_idnum; }</td></tr>
<tr class="codeline" data-linenumber="480"><td class="num" id="LN480">480</td><td class="line">  <span class='keyword'>void</span> set_orig_method_idnum(u2 idnum)           { _orig_method_idnum = idnum; }</td></tr>
<tr class="codeline" data-linenumber="481"><td class="num" id="LN481">481</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="482"><td class="num" id="LN482">482</td><td class="line">  <span class='comment'>// max stack</span></td></tr>
<tr class="codeline" data-linenumber="483"><td class="num" id="LN483">483</td><td class="line">  <span class='keyword'>int</span>  max_stack() <span class='keyword'>const</span>                         { <span class='keyword'>return</span> _max_stack; }</td></tr>
<tr class="codeline" data-linenumber="484"><td class="num" id="LN484">484</td><td class="line">  <span class='keyword'>void</span> set_max_stack(<span class='keyword'>int</span> size)                   { _max_stack = size; }</td></tr>
<tr class="codeline" data-linenumber="485"><td class="num" id="LN485">485</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="486"><td class="num" id="LN486">486</td><td class="line">  <span class='comment'>// max locals</span></td></tr>
<tr class="codeline" data-linenumber="487"><td class="num" id="LN487">487</td><td class="line">  <span class='keyword'>int</span>  max_locals() <span class='keyword'>const</span>                        { <span class='keyword'>return</span> _max_locals; }</td></tr>
<tr class="codeline" data-linenumber="488"><td class="num" id="LN488">488</td><td class="line">  <span class='keyword'>void</span> set_max_locals(<span class='keyword'>int</span> size)                  { _max_locals = size; }</td></tr>
<tr class="codeline" data-linenumber="489"><td class="num" id="LN489">489</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="490"><td class="num" id="LN490">490</td><td class="line">  <span class='comment'>// size of parameters</span></td></tr>
<tr class="codeline" data-linenumber="491"><td class="num" id="LN491">491</td><td class="line">  <span class='keyword'>int</span>  size_of_parameters() <span class='keyword'>const</span>                { <span class='keyword'>return</span> _size_of_parameters; }</td></tr>
<tr class="codeline" data-linenumber="492"><td class="num" id="LN492">492</td><td class="line">  <span class='keyword'>void</span> set_size_of_parameters(<span class='keyword'>int</span> size)          { _size_of_parameters = size; }</td></tr>
<tr class="codeline" data-linenumber="493"><td class="num" id="LN493">493</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="494"><td class="num" id="LN494">494</td><td class="line">  <span class='comment'>// result type (basic type of return value)</span></td></tr>
<tr class="codeline" data-linenumber="495"><td class="num" id="LN495">495</td><td class="line">  BasicType result_type() <span class='keyword'>const</span>                  { <span class='macro'>assert(_result_type &gt;= T_BOOLEAN, <span class='string_literal'>"Must be set"</span>)<span class='macro_popup'>do { if (!(_result_type &gt;= T_BOOLEAN)) { (*g_assert_poison<br>) = 'X';; report_vm_error("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/constMethod.hpp"<br>, 495, "assert(" "_result_type &gt;= T_BOOLEAN" ") failed", "Must be set"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="496"><td class="num" id="LN496">496</td><td class="line">                                                   <span class='keyword'>return</span> (BasicType)_result_type; }</td></tr>
<tr class="codeline" data-linenumber="497"><td class="num" id="LN497">497</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="498"><td class="num" id="LN498">498</td><td class="line">  <span class='keyword'>void</span> set_result_type(BasicType rt)             { <span class='macro'>assert(rt &lt; 16, <span class='string_literal'>"result type too large"</span>)<span class='macro_popup'>do { if (!(rt &lt; 16)) { (*g_assert_poison) = 'X';; report_vm_error<br>("/home/daniel/Projects/java/jdk/src/hotspot/share/oops/constMethod.hpp"<br>, 498, "assert(" "rt &lt; 16" ") failed", "result type too large"<br>); ::breakpoint(); } } while (0)</span></span>;</td></tr>
<tr class="codeline" data-linenumber="499"><td class="num" id="LN499">499</td><td class="line">                                                   _result_type = (u1)rt; }</td></tr>
<tr class="codeline" data-linenumber="500"><td class="num" id="LN500">500</td><td class="line">  <span class='comment'>// Deallocation for RedefineClasses</span></td></tr>
<tr class="codeline" data-linenumber="501"><td class="num" id="LN501">501</td><td class="line">  <span class='keyword'>void</span> deallocate_contents(ClassLoaderData* loader_data);</td></tr>
<tr class="codeline" data-linenumber="502"><td class="num" id="LN502">502</td><td class="line">  <span class='keyword'>bool</span> is_klass() <span class='keyword'>const</span> { <span class='keyword'>return</span> <span class='keyword'>false</span>; }</td></tr>
<tr class="codeline" data-linenumber="503"><td class="num" id="LN503">503</td><td class="line">  <span class='macro'>DEBUG_ONLY(<span class='keyword'>bool</span> on_stack() { <span class='keyword'>return</span> <span class='keyword'>false</span>; })<span class='macro_popup'>bool on_stack() { return false; }</span></span></td></tr>
<tr class="codeline" data-linenumber="504"><td class="num" id="LN504">504</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="505"><td class="num" id="LN505">505</td><td class="line">  <span class='keyword'>void</span> metaspace_pointers_do(MetaspaceClosure* it);</td></tr>
<tr class="codeline" data-linenumber="506"><td class="num" id="LN506">506</td><td class="line">  MetaspaceObj::Type type() <span class='keyword'>const</span> { <span class='keyword'>return</span> ConstMethodType; }</td></tr>
<tr class="codeline" data-linenumber="507"><td class="num" id="LN507">507</td><td class="line"><span class='keyword'>private</span>:</td></tr>
<tr class="codeline" data-linenumber="508"><td class="num" id="LN508">508</td><td class="line">  <span class='comment'>// Since the size of the compressed line number table is unknown, the</span></td></tr>
<tr class="codeline" data-linenumber="509"><td class="num" id="LN509">509</td><td class="line">  <span class='comment'>// offsets of the other variable sized sections are computed backwards</span></td></tr>
<tr class="codeline" data-linenumber="510"><td class="num" id="LN510">510</td><td class="line">  <span class='comment'>// from the end of the ConstMethod*.</span></td></tr>
<tr class="codeline" data-linenumber="511"><td class="num" id="LN511">511</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="512"><td class="num" id="LN512">512</td><td class="line">  <span class='comment'>// First byte after ConstMethod*</span></td></tr>
<tr class="codeline" data-linenumber="513"><td class="num" id="LN513">513</td><td class="line">  address constMethod_end() <span class='keyword'>const</span></td></tr>
<tr class="codeline" data-linenumber="514"><td class="num" id="LN514">514</td><td class="line">                          { <span class='keyword'>return</span> (address)((intptr_t*)<span class='keyword'>this</span> + _constMethod_size); }</td></tr>
<tr class="codeline" data-linenumber="515"><td class="num" id="LN515">515</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="516"><td class="num" id="LN516">516</td><td class="line">  <span class='comment'>// Last short in ConstMethod*</span></td></tr>
<tr class="codeline" data-linenumber="517"><td class="num" id="LN517">517</td><td class="line">  u2* last_u2_element() <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="518"><td class="num" id="LN518">518</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="519"><td class="num" id="LN519">519</td><td class="line"> <span class='keyword'>public</span>:</td></tr>
<tr class="codeline" data-linenumber="520"><td class="num" id="LN520">520</td><td class="line">  <span class='comment'>// Printing</span></td></tr>
<tr class="codeline" data-linenumber="521"><td class="num" id="LN521">521</td><td class="line">  <span class='keyword'>void</span> print_on      (outputStream* st) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="522"><td class="num" id="LN522">522</td><td class="line">  <span class='keyword'>void</span> print_value_on(outputStream* st) <span class='keyword'>const</span>;</td></tr>
<tr class="codeline" data-linenumber="523"><td class="num" id="LN523">523</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="524"><td class="num" id="LN524">524</td><td class="line">  <span class='keyword'>const</span> <span class='keyword'>char</span>* internal_name() <span class='keyword'>const</span> { <span class='keyword'>return</span> <span class='string_literal'>"{constMethod}"</span>; }</td></tr>
<tr class="codeline" data-linenumber="525"><td class="num" id="LN525">525</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="526"><td class="num" id="LN526">526</td><td class="line">  <span class='comment'>// Verify</span></td></tr>
<tr class="codeline" data-linenumber="527"><td class="num" id="LN527">527</td><td class="line">  <span class='keyword'>void</span> verify_on(outputStream* st);</td></tr>
<tr class="codeline" data-linenumber="528"><td class="num" id="LN528">528</td><td class="line">};</td></tr>
<tr class="codeline" data-linenumber="529"><td class="num" id="LN529">529</td><td class="line"> </td></tr>
<tr class="codeline" data-linenumber="530"><td class="num" id="LN530">530</td><td class="line"><span class='directive'>#endif // SHARE_OOPS_CONSTMETHOD_HPP</span></td></tr>
</table></body></html>
